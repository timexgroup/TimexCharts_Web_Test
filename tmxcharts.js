!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tmxcharts=e():t.tmxcharts=e()}(self,(()=>(()=>{"use strict";var t={319:(t,e,r)=>{r.r(e);const n={USE_12HR_FORMAT:0,USE_24HR_FORMAT:1,USE_SYSTEM_FORMAT:2},a={ONE_SECOND:86400,ONE_MINUTE:1440,FIVE_MINUTES:288,TEN_MINUTES:144,FIFTEEN_MINUTES:96,TWENTY_MINUTES:72,THIRTY_MINUTES:48,ONE_HOUR:24};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:String(e)}const s=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startTime=e,this.stepCount=r}var e,r;return e=t,(r=[{key:"stepCount",get:function(){return this._stepCount},set:function(t){this._stepCount=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:String(e)}const y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.barColor="#3EB1C8",this.timeFormat=n.USE_12HR_FORMAT,this.maxIntervalCount=a.ONE_SECOND,this.intervalUsed=a.ONE_SECOND,this.displayIntervalCount=a.FIFTEEN_MINUTES,this.defdata={labels:[""],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,borderWidth:1,barPercentage:1,categoryPercentage:1}]};var r={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,r){return r.length,""}}},y:{display:!1,beginAtZero:!0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customBackground:{enabled:!0,label1:"12:00 AM",label2:"12:00 PM",label3:"11:59 PM"}}}};this.addCustomXAxisLabels(),this.chart=new Chart(this.ctx,r)}var e,r;return e=t,(r=[{key:"addCustomXAxisLabels",value:function(){Chart.register({id:"customBackground",beforeDraw:function(t,e,r){var n=t.ctx,a=t.scales.x;n.save(),n.fillStyle="rgba(237, 239, 240, 1.0)",n.fillRect(0,t.chartArea.bottom,a.width,30),n.fillStyle="black",n.textAlign="center",n.fillText(r.label1,t.chartArea.left+30,t.chartArea.bottom+15),n.fillText(r.label2,a.width/2,t.chartArea.bottom+15),n.fillText(r.label3,t.chartArea.right-30,t.chartArea.bottom+15),n.restore()}})}},{key:"convertTimeToIndex",value:function(t){var e,r,n=t.split(":"),o=0,i=!1,l=0;switch(t.length>5&&(i=!0),e=Number(n[0]),r=Number(n[1]),1==i&&(o=Number(n[2])),this.maxIntervalCount){case a.ONE_SECOND:l=3600*e,l+=60*r,!0===i&&(l+=o);break;case a.ONE_MINUTE:l=60*e,l+=r;break;case a.FIVE_MINUTES:l=12*e,l+=r/5;break;case a.TEN_MINUTES:l=6*e,l+=r/10;break;case a.FIFTEEN_MINUTES:l=4*e,l+=r/15;break;case a.TWENTY_MINUTES:l=3*e,l+=r/20;break;case a.THIRTY_MINUTES:l=2*e,l+=r/30;break;case a.ONE_HOUR:l=e;break;default:l=0}return l}},{key:"setChartData",value:function(t){console.log("StepCountBarChart setChartData");var e=new Array(this.maxIntervalCount).fill(0),r=this.displayIntervalCount;if(this.displayIntervalCount>this.maxIntervalCount&&(r=this.maxIntervalCount),null!=t&&Array.isArray(t)&&t.length>0){this.setMaxIntervalCount(this.maxIntervalCount);var n,a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;e[this.convertTimeToIndex(o.startTime)]+=o.stepCount}}catch(t){a.e(t)}finally{a.f()}for(var i=new Array(r).fill(0),l=this.maxIntervalCount/r,s=0,u=0,f=0;f<r;f++)for(s=0;s<l;s++)i[f]+=e[u],u++;this.intervalUsed=this.displayIntervalCount,this.defdata.labels=new Array(r).fill(""),this.defdata.datasets[0].data=i,this.chart.update()}}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=[],this.chart.update()}},{key:"setMaxStepsPerInterval",value:function(){console.log("StepCountBarChart setMaxStepsPerInterval")}},{key:"setMaxIntervalCount",value:function(t){this.maxIntervalCount=t}},{key:"setDisplayIntervalCount",value:function(t){this.displayIntervalCount=t}},{key:"getXAxisLabelsWithFormatting",value:function(t,e){switch(this.timeFormat){case n.USE_12HR_FORMAT:return t;case n.USE_24HR_FORMAT:return e;default:return t}}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customBackground.label1=this.getXAxisLabelsWithFormatting("12:00 AM","00:00"),this.chart.options.plugins.customBackground.label2=this.getXAxisLabelsWithFormatting("12:00 PM","12:00"),this.chart.options.plugins.customBackground.label3=this.getXAxisLabelsWithFormatting("11:59 PM","23:59"),this.chart.update()}},{key:"setBarColor",value:function(t){this.barColor=t,this.defdata.datasets[0].backgroundColor=t,this.defdata.datasets[0].borderColor=t,this.chart.update()}}])&&f(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d={AWAKE:0,LIGHT_SLEEP:1,DEEP_SLEEP:2,REM_SLEEP:3};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}const v=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quality=e,this.startTime=r,this.endTime=n}var e,r;return e=t,(r=[{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"endTime",get:function(){return this._endTime},set:function(t){this._endTime=t}},{key:"totalTime",get:function(){var t=new Date(this._startTime.replace(" ","T")+":00");return(new Date(this._endTime.replace(" ","T")+":00")-t)/6e4}}])&&p(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T(n.key),n)}}function T(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}const E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quality=e.quality,this.startTime=e.startTime,this.endTime=e.endTime,this.startIndex=0,this.endIndex=0}var e,r;return e=t,(r=[{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"endTime",get:function(){return this._endTime},set:function(t){this._endTime=t}},{key:"startIndex",get:function(){return this._startIndex},set:function(t){this._startIndex=t}},{key:"endIndex",get:function(){return this._endIndex},set:function(t){this._endIndex=t}},{key:"setIndices",value:function(t,e){this.startIndex=t,this.endIndex=e}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),C="#FFFFFF",w="#C3BEE3",x="#8551D3",I="#3F098A";function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function _(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function P(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:String(e)}const O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.emptyChart=!0,this.barColor="#3EB1C8",this.timeFormat=n.USE_12HR_FORMAT,this.maxIntervalCount=a.ONE_MINUTE,this.defdata={labels:[""],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,borderWidth:1,barPercentage:1,categoryPercentage:1}]};var r={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,r){return r.length,""}}},y:{display:!1,beginAtZero:!0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customBackground:{enabled:!0,label1:"10:00 PM",label2:"06:00 AM"},customNoDataBackground:{backgroundColor:"rgba(200, 200, 200, 0.5)",label:"No Data Available"}}}};if("function"!=typeof Chart){var o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/chart.js",document.head.appendChild(o)}this.addCustomXAxisLabels(),this.chart=new Chart(this.ctx,r)}var e,r;return e=t,(r=[{key:"addCustomXAxisLabels",value:function(){Chart.register({id:"customBackground",beforeDraw:function(t,e,r){var n=t.ctx,a=t.scales.x;n.save(),n.fillStyle="rgba(237, 239, 240, 1.0)",n.fillRect(0,t.chartArea.bottom,a.width,30),n.fillStyle="black",n.textAlign="center",n.fillText(r.label1,t.chartArea.left+30,t.chartArea.bottom+15),n.fillText(r.label2,t.chartArea.right-30,t.chartArea.bottom+15),n.restore()}}),Chart.register({id:"customNoDataBackground",beforeDraw:function(t,e,r){}})}},{key:"computeEndTime",value:function(t,e){var r=new Date(t.replace(" ","T")+":00"),n=new Date(r.getTime()+6e4*e);n.getHours().toString().padStart(2,"0"),n.getMinutes().toString().padStart(2,"0")}},{key:"updateChart",value:function(t,e,r){var n=0;this.computeEndTime(t,sleepList.length),console.log(t.split(" ")[1]),console.log(e.split(" ")[1]),console.log(r);var a,o=[],i=[],l=_(r);try{for(l.s();!(a=l.n()).done;){var s=a.value;n<this.maxIntervalCount&&(o.push(100),s===d.AWAKE?i.push(C):s===d.LIGHT_SLEEP?i.push(w):s===d.DEEP_SLEEP?i.push(x):s===d.REM_SLEEP&&i.push(I),n++)}}catch(t){l.e(t)}finally{l.f()}this.defdata.labels=new Array(o.length).fill(""),this.defdata.datasets[0].data=o,this.defdata.datasets[0].backgroundColor=i,this.defdata.datasets[0].borderColor=i,console.log(this.defdata),this.chart.options.plugins.customBackground.label1=t.split(" ")[1],this.chart.options.plugins.customBackground.label2=e.split(" ")[1],this.chart.update()}},{key:"setChartData",value:function(t){if(null!=t&&Array.isArray(t)&&t.length>0){var e=[];t.sort((function(t,e){var r=t.startTime,n=e.startTime;return r<n?-1:r>n?1:0}));for(var r=0;r<t.length;r++)if(r<t.length-1){var n=t[r].endTime,a=t[r+1].startTime;n!==a&&t.splice(r+1,0,new v(d.AWAKE,n,a))}var o,i=0,l=0,s=[],u=_(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,f=new E(c);i=l;for(var h=0;h<c.totalTime;h++)e.push(c.quality),l++;f.setIndices(i,l-1),s.push(f)}}catch(t){u.e(t)}finally{u.f()}this.updateChart(t[0].startTime,t[t.length-1].endTime,e)}}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=[],this.chart.update()}},{key:"getXAxisLabelsWithFormatting",value:function(t,e){switch(this.timeFormat){case n.USE_12HR_FORMAT:return t;case n.USE_24HR_FORMAT:return e;default:return t}}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customBackground.label1=this.getXAxisLabelsWithFormatting("12:00 AM","00:00"),this.chart.options.plugins.customBackground.label2=this.getXAxisLabelsWithFormatting("12:00 PM","12:00"),this.chart.update()}}])&&M(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();void 0!==(t=r.hmd(t)).exports?t.exports={TimeDisplayFormat:n,TimeInterval:a,StepCountInterval:s,StepCountBarChart:y,SleepQuality:d,SleepQualityInterval:v,SleepQualityBarChart:O}:(window.TimeDisplayFormat=n,window.TimeInterval=a,window.StepCountInterval=s,window.StepCountBarChart=y,window.SleepQuality=d,window.SleepQualityInterval=v,window.SleepQualityBarChart=O)}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n](o,o.exports,r),o.loaded=!0,o.exports}return r.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(319)})()));