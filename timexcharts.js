!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.timexcharts=e():t.timexcharts=e()}(self,(()=>(()=>{"use strict";var t={320:(t,e,a)=>{a.r(e);const r={USE_12HR_FORMAT:0,USE_24HR_FORMAT:1,USE_SYSTEM_FORMAT:2},i={ONE_SECOND:86400,ONE_MINUTE:1440,FIVE_MINUTES:288,TEN_MINUTES:144,FIFTEEN_MINUTES:96,TWENTY_MINUTES:72,THIRTY_MINUTES:48,ONE_HOUR:24};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:String(e)}const l=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startTime=e,this.stepCount=a}var e,a;return e=t,(a=[{key:"stepCount",get:function(){return this._stepCount},set:function(t){this._stepCount=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}}])&&o(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function c(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:String(e)}const f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.barColor="#3EB1C8",this.timeFormat=r.USE_12HR_FORMAT,this.maxIntervalCount=i.ONE_SECOND,this.intervalUsed=i.ONE_SECOND,this.displayIntervalCount=i.FIFTEEN_MINUTES,this.defdata={labels:[""],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,hoverBackgroundColor:this.barColor,borderWidth:0,barPercentage:1,categoryPercentage:1}]};var a={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,a){return a.length,""}}},y:{display:!1,beginAtZero:!0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customBackground:{enabled:!0,label1:"12:00 AM",label2:"12:00 PM",label3:"11:59 PM"}}}};this.addCustomXAxisLabels(),this.chart=new Chart(this.ctx,a)}var e,a;return e=t,(a=[{key:"addCustomXAxisLabels",value:function(){Chart.register({id:"customBackground",beforeDraw:function(t,e,a){var r=t.ctx,i=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,i.width,30),r.fillStyle="black",r.textAlign="center",r.fillText(a.label1,t.chartArea.left+30,t.chartArea.bottom+15),r.fillText(a.label2,i.width/2,t.chartArea.bottom+15),r.fillText(a.label3,t.chartArea.right-30,t.chartArea.bottom+15),r.restore()}})}},{key:"convertTimeToIndex",value:function(t){var e,a,r=t.split(":"),n=0,o=!1,s=0;switch(t.length>5&&(o=!0),e=Number(r[0]),a=Number(r[1]),1==o&&(n=Number(r[2])),this.maxIntervalCount){case i.ONE_SECOND:s=3600*e,s+=60*a,!0===o&&(s+=n);break;case i.ONE_MINUTE:s=60*e,s+=a;break;case i.FIVE_MINUTES:s=12*e,s+=a/5;break;case i.TEN_MINUTES:s=6*e,s+=a/10;break;case i.FIFTEEN_MINUTES:s=4*e,s+=a/15;break;case i.TWENTY_MINUTES:s=3*e,s+=a/20;break;case i.THIRTY_MINUTES:s=2*e,s+=a/30;break;case i.ONE_HOUR:s=e;break;default:s=0}return s}},{key:"setChartData",value:function(t){console.log("StepCountBarChart setChartData");var e=new Array(this.maxIntervalCount).fill(0),a=this.displayIntervalCount;if(this.displayIntervalCount>this.maxIntervalCount&&(a=this.maxIntervalCount),null!=t&&Array.isArray(t)&&t.length>0){this.setMaxIntervalCount(this.maxIntervalCount);var r,i=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(t){if("string"==typeof t)return u(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}(t);try{for(i.s();!(r=i.n()).done;){var n=r.value;e[this.convertTimeToIndex(n.startTime)]+=n.stepCount}}catch(t){i.e(t)}finally{i.f()}for(var o=new Array(a).fill(0),s=this.maxIntervalCount/a,l=0,h=0,c=0;c<a;c++)for(l=0;l<s;l++)o[c]+=e[h],h++;this.intervalUsed=this.displayIntervalCount,this.defdata.labels=new Array(a).fill(""),this.defdata.datasets[0].data=o,this.chart.update()}}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=[],this.chart.update()}},{key:"setMaxStepsPerInterval",value:function(){console.log("StepCountBarChart setMaxStepsPerInterval")}},{key:"setMaxIntervalCount",value:function(t){this.maxIntervalCount=t}},{key:"setDisplayIntervalCount",value:function(t){this.displayIntervalCount=t}},{key:"getXAxisLabelsWithFormatting",value:function(t,e){switch(this.timeFormat){case r.USE_12HR_FORMAT:return t;case r.USE_24HR_FORMAT:return e;default:return t}}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customBackground.label1=this.getXAxisLabelsWithFormatting("12:00 AM","00:00"),this.chart.options.plugins.customBackground.label2=this.getXAxisLabelsWithFormatting("12:00 PM","12:00"),this.chart.options.plugins.customBackground.label3=this.getXAxisLabelsWithFormatting("11:59 PM","23:59"),this.chart.update()}},{key:"setBarColor",value:function(t){this.barColor=t,this.defdata.datasets[0].backgroundColor=t,this.defdata.datasets[0].borderColor=t,this.chart.update()}}])&&c(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),y={AWAKE:0,LIGHT_SLEEP:1,DEEP_SLEEP:2,REM_SLEEP:3};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function p(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}const b=function(){function t(e,a,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quality=e,this.startTime=a,this.endTime=r}var e,a;return e=t,(a=[{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"endTime",get:function(){return this._endTime},set:function(t){this._endTime=t}},{key:"totalTime",get:function(){var t=new Date(this._startTime.replace(" ","T")+":00");return(new Date(this._endTime.replace(" ","T")+":00")-t)/6e4}}])&&p(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function C(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}const x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quality=e.quality,this.startTime=e.startTime,this.endTime=e.endTime,this.startIndex=0,this.endIndex=0}var e,a;return e=t,(a=[{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"endTime",get:function(){return this._endTime},set:function(t){this._endTime=t}},{key:"startIndex",get:function(){return this._startIndex},set:function(t){this._startIndex=t}},{key:"endIndex",get:function(){return this._endIndex},set:function(t){this._endIndex=t}},{key:"setIndices",value:function(t,e){this.startIndex=t,this.endIndex=e}}])&&C(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();const T={ENGLISH:"en",SPANISH:"es",SYSTEM_LANGUAGE:"sys"};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function D(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(t){if("string"==typeof t)return E(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function L(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:String(e)}const w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.barColor="#FFFFFFFF",this.timeFormat=r.USE_12HR_FORMAT,this.maxIntervalCount=i.ONE_MINUTE,this.sleepStartTime="22:00",this.sleepEndTime="06:00",this.language=T.ENGLISH,this.defdata={labels:[""],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,borderWidth:0,barPercentage:1,categoryPercentage:1}]};var a={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,a){return a.length,""}}},y:{display:!1,beginAtZero:!0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customXAxisLabels:{enabled:!0,label1:this.getXAxisLabelsWithFormatting(this.sleepStartTime),label2:this.getXAxisLabelsWithFormatting(this.sleepEndTime)},customNoDataBackground:{backgroundColor:"rgba(200, 200, 200, 0.5)",label:this.getLocalizedNoDataString(this.language),emptyChart:!0}}}};if("function"!=typeof Chart){var n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/chart.js",document.head.appendChild(n)}this.addCustomXAxisLabels(),this.chart=new Chart(this.ctx,a)}var e,a;return e=t,a=[{key:"addCustomXAxisLabels",value:function(){Chart.register({id:"customXAxisLabels",beforeDraw:function(t,e,a){var r=t.ctx,i=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,i.width,30),r.fillStyle="black",r.textAlign="center",r.fillText(a.label1,t.chartArea.left+30,t.chartArea.bottom+15),r.fillText(a.label2,t.chartArea.right-30,t.chartArea.bottom+15),r.restore()}}),Chart.register({id:"customNoDataBackground",beforeDraw:function(t,e,a){if(console.log(a.emptyChart),!0===a.emptyChart){var r=t.ctx,i=(t.canvas,t.scales.x),n=t.chartArea;n.top,n.right,n.bottom,n.left,r.save(),r.fillStyle=a.backgroundColor,r.fillRect(0,0,i.width,t.chartArea.bottom),r.fillStyle="black",r.font="20px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(a.label,i.width/2,t.chartArea.bottom/2),r.restore()}}})}},{key:"updateChart",value:function(t,e,a){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=0,o=[],s=[],l=D(a);try{for(l.s();!(r=l.n()).done;){var h=r.value;n<this.maxIntervalCount&&(o.push(100),h===y.AWAKE?s.push("#FFFFFF"):h===y.LIGHT_SLEEP?s.push("#C3BEE3"):h===y.DEEP_SLEEP?s.push("#8551D3"):h===y.REM_SLEEP&&s.push("#3F098A"),n++)}}catch(t){l.e(t)}finally{l.f()}null!==i&&console.log("HR data is available"),this.defdata.labels=new Array(o.length).fill(""),this.defdata.datasets[0].data=o,this.defdata.datasets[0].backgroundColor=s,this.defdata.datasets[0].borderColor=s,this.defdata.datasets[0].hoverBackgroundColor=s,this.sleepStartTime=t.split(" ")[1],this.sleepEndTime=e.split(" ")[1],this.chart.options.plugins.customXAxisLabels.label1=this.getXAxisLabelsWithFormatting(this.sleepStartTime),this.chart.options.plugins.customXAxisLabels.label2=this.getXAxisLabelsWithFormatting(this.sleepEndTime),this.chart.options.plugins.customNoDataBackground.emptyChart=!1,this.chart.update()}},{key:"setChartData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=t&&Array.isArray(t)&&t.length>0){var a=[];t.sort((function(t,e){var a=t.startTime,r=e.startTime;return a<r?-1:a>r?1:0}));for(var r=0;r<t.length;r++)if(r<t.length-1){var i=t[r].endTime,n=t[r+1].startTime;i!==n&&t.splice(r+1,0,new b(y.AWAKE,i,n))}var o,s=0,l=0,h=[],u=D(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,d=new x(c);s=l;for(var f=0;f<c.totalTime;f++)a.push(c.quality),l++;d.setIndices(s,l-1),h.push(d)}}catch(t){u.e(t)}finally{u.f()}null!==e?this.updateChart(t[0].startTime,t[t.length-1].endTime,a,hrList):this.updateChart(t[0].startTime,t[t.length-1].endTime,a)}}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=[],this.sleepStartTime="22:00",this.sleepEndTime="06:00",this.chart.options.plugins.customXAxisLabels.label1=this.getXAxisLabelsWithFormatting(this.sleepStartTime),this.chart.options.plugins.customXAxisLabels.label2=this.getXAxisLabelsWithFormatting(this.sleepEndTime),this.chart.options.plugins.customNoDataBackground.emptyChart=!0,this.chart.update()}},{key:"getXAxisLabelsWithFormatting",value:function(t){if(this.timeFormat===r.USE_12HR_FORMAT){var e=t.split(":"),a=parseInt(e[0],10),i=parseInt(e[1],10),n=a>=12?"PM":"AM";return((a=a%12==0?12:a%12)<10?"0":"")+a+":"+(i<10?"0":"")+i+" "+n}return t}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customXAxisLabels.label1=this.getXAxisLabelsWithFormatting(this.sleepStartTime),this.chart.options.plugins.customXAxisLabels.label2=this.getXAxisLabelsWithFormatting(this.sleepEndTime),this.chart.update()}},{key:"getLocalizedNoDataString",value:function(t){return"es"===t?"Sin Datos":"No Data"}},{key:"setLanguage",value:function(t){this.language=t,this.chart.options.plugins.customNoDataBackground.label=this.getLocalizedNoDataString(t),this.chart.update()}}],a&&L(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();var M={BELOW_AVERAGE:0,FAIR:1,GOOD:2,VERY_GOOD:3,EXCELLENT:4};function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function R(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H(r.key),r)}}function H(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:String(e)}const N=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.ageValue=0,this.thresholdValue=[66,62,58,54];var a=["#EB5B59","#F7BD4C","#01B9FE","#9071FE","#26CBA8"];this.defdata={labels:["","","","",""],datasets:[{data:[12,12,12,12,12],backgroundColor:a,borderColor:a,hoverBackgroundColor:a,borderWidth:0,barPercentage:1,categoryPercentage:1}]};var r={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{display:!1,maxTicksLimit:24}},y:{display:!1,beginAtZero:!0,max:35}},plugins:{tooltip:{enabled:!1},legend:{display:!1},selectedBarImage:{enabled:!1,barIndex:2,heartHeightRatio:1,heartWidthRatio:.6,heartColor:"white"}}}};if("function"!=typeof Chart){var i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/chart.js",document.head.appendChild(i)}this.addCustomChartPlugins(),this.chart=new Chart(this.ctx,r)}var e,a;return e=t,(a=[{key:"addCustomChartPlugins",value:function(){Chart.register({id:"selectedBarImage",afterDraw:function(t,e,a){var r=t.ctx,i=t.chartArea,n=t.options.plugins.selectedBarImage;if(n&&!0===n.enabled){var o=n.barIndex||0;if(o>=0&&o<t.data.labels.length){var s=t.getDatasetMeta(0).data[o].x,l=t.getDatasetMeta(0).data[o].width,h=i.height/1.3,u=l*n.heartWidthRatio,c=h*n.heartHeightRatio,d=n.heartColor||"red",f=s,y=i.top+h;r.fillStyle=d,r.beginPath(),r.moveTo(f,y-c/2),r.bezierCurveTo(f-u/3,y-c,f-u,y-c/3,f,y),r.bezierCurveTo(f+u,y-c/3,f+u/3,y-c,f,y-c/2),r.closePath(),r.fill()}}}})}},{key:"setAgeLevelThresholds",value:function(t,e,a,r){this.thresholdValue[0]=t,this.thresholdValue[1]=e,this.thresholdValue[2]=a,this.thresholdValue[3]=r,this.setChartData(this.ageValue)}},{key:"setChartData",value:function(t){var e,a=12,r=12,i=12,n=12,o=12;this.ageValue=t,0==t?e=M.NONE:t>this.thresholdValue[0]?(a=35,e=M.BELOW_AVERAGE):t>this.thresholdValue[1]?(r=35,e=M.FAIR):t>this.thresholdValue[2]?(i=35,e=M.GOOD):t>this.thresholdValue[3]?(n=35,e=M.VERY_GOOD):(o=35,e=M.EXCELLENT),this.chart.options.plugins.selectedBarImage.enabled=!0,this.chart.options.plugins.selectedBarImage.barIndex=e,this.defdata.datasets[0].data=[a,r,i,n,o],this.chart.update()}},{key:"resetChart",value:function(){this.chart.options.plugins.selectedBarImage.enabled=!1,this.defdata.datasets[0].data=[12,12,12,12,12],this.chart.update()}}])&&R(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function O(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:String(e)}const B=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.paiScore=e,this.paiEarned=a}var e,a;return e=t,(a=[{key:"paiScore",get:function(){return this._paiScore},set:function(t){this._paiScore=t}},{key:"paiEarned",get:function(){return this._paiEarned},set:function(t){this._paiEarned=t}},{key:"paiCarriedOver",get:function(){return this._paiScore-this._paiEarned}}])&&O(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function j(t,e){if(t){if("string"==typeof t)return W(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function F(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function X(t,e,a){return(e=G(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function G(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:String(e)}const J=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,"getTopXAxisLabel",(function(t,e,r){return a.topXAxisLabels[t]})),X(this,"getBottomXAxisLabel",(function(t,e,r){return a.bottomXAxisLabels[t]})),this.ctx=e,this.barColor="#3EB1C8",this.goalValue=100,this.maxLevel=100,this.topXAxisLabels=["0","0","0","0","0","0","0"],this.bottomXAxisLabels=["S","M","T","W","T","F","TODAY"],this.language=T.ENGLISH;var r=new Date;this.customDate=r.toISOString().slice(0,10),this.updateBottomXAxisLabels(r),this.defdata={labels:this.bottomXAxisLabels,datasets:[{backgroundColor:"#C0B2FB",data:[0,0,0,0,0,0,0],barThickness:20},{backgroundColor:"#8551D3",data:[0,0,0,0,0,0,0],barThickness:20},{backgroundColor:"#E9E7F3",data:[100,100,100,100,100,100,100],barThickness:20}]};var i={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{stacked:!0,grid:{display:!1},position:"bottom",ticks:{stepSize:10,padding:0,callback:this.getBottomXAxisLabel}},x1:{display:!1,grid:{display:!1},position:"top",ticks:{callback:this.getTopXAxisLabel}},y:X(X(X({stacked:!0,max:100,display:!0,beginAtZero:!0},"max",this.maxLevel),"grid",{drawBorder:!1,lineWidth:1,color:"#D9D2F8",tick:{stepSize:50}}),"ticks",{autoSkip:!0,maxTicksLimit:4})},plugins:{tooltip:{enabled:!1},legend:{display:!1},customGoalLevelLimitLine:{enabled:!0,goalValue:this.goalValue,lineColor:"#26CBA8",lineWidth:2}}}};this.addCustomPlugins(),this.chart=new Chart(this.ctx,i)}var e,a;return e=t,(a=[{key:"getLocalizedTodayString",value:function(t){return"es"===t?"HOY":"TODAY"}},{key:"getLocalized1LetterDOWString",value:function(t,e){return"es"===t?["d","l","m","m","j","v","s"][e]:["S","M","T","W","T","F","S"][e]}},{key:"updateBottomXAxisLabels",value:function(t){var e=t.getDay();this.bottomXAxisLabels[this.bottomXAxisLabels.length-1]=this.getLocalizedTodayString(this.language);for(var a=this.bottomXAxisLabels.length-2;a>=0;a--)t.setDate(t.getDate()-1),e=t.getDay(),this.bottomXAxisLabels[a]=this.getLocalized1LetterDOWString(this.language,e)}},{key:"addCustomPlugins",value:function(){Chart.register({id:"customGoalLevelLimitLine",afterDraw:function(t,e,a){var r=t.ctx,i=t.scales.y,n=t.chartArea.left,o=i.getPixelForValue(t.options.plugins.customGoalLevelLimitLine.goalValue);r.save(),r.beginPath(),r.moveTo(n,o),r.strokeStyle=t.options.plugins.customGoalLevelLimitLine.lineColor,r.lineWidth=t.options.plugins.customGoalLevelLimitLine.lineWidth,r.lineTo(t.chartArea.right,o),r.stroke(),r.restore()}}),Chart.register({id:"customTotalText",afterDraw:function(t,e,a){var r=t.ctx;r.save();var i=t.chartArea,n=(t.scales.x1,t.scales.x._labelItems[0].font.lineHeight),o=i.top-n;r.fillStyle="black",r.textAlign="left",r.fillText("Total",0,o),r.restore()}})}},{key:"updateChart",value:function(t,e){for(var a=[],r=0;r<t.length;r++)this.goalValue<=t[r]+e[r]?a.push(0):a.push(this.goalValue-(t[r]+e[r]));this.defdata.datasets[0].data=e,this.defdata.datasets[1].data=t,this.defdata.datasets[2].data=a,this.chart.options.scales.x1.display=!0,this.chart.update()}},{key:"setMaxLevel",value:function(t){for(this.maxLevel=100,this.chart.options.scales.y.max=100,this.chart.options.scales.y.ticks.maxTicksLimit=4;this.maxLevel<t;)this.maxLevel+=50;this.chart.options.scales.y.max=this.maxLevel,this.chart.options.scales.y.ticks.maxTicksLimit=this.maxLevel/50+1}},{key:"setChartData",value:function(t){if(null!=t&&Array.isArray(t)&&t.length>0){var e,a=0,r=0,i=[],n=[],o=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=j(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;s.paiScore>r&&(r=s.paiScore),i.push(s.paiEarned),n.push(s.paiCarriedOver),this.topXAxisLabels[a]=s.paiScore.toString(),a++}}catch(t){o.e(t)}finally{o.f()}this.setMaxLevel(r),this.updateChart(i,n)}}},{key:"setGoalLevel",value:function(t){this.goalValue=t,this.chart.options.plugins.customGoalLevelLimitLine.goalValue=t,this.updateChart(this.defdata.datasets[1].data,this.defdata.datasets[0].data),this.chart.update()}},{key:"resetChart",value:function(){var t=[];this.customDate="",this.setGoalLevel(100);for(var e=0;e<7;e++)t.push(100);this.defdata.datasets[0].data=[],this.defdata.datasets[1].data=[],this.defdata.datasets[2].data=t,this.chart.options.scales.y.max=100,this.chart.options.scales.y.ticks.maxTicksLimit=4,this.chart.options.scales.x1.display=!1,this.updateBottomXAxisLabels(new Date),this.chart.update()}},{key:"setCustomDate",value:function(t){this.customDate=t;var e,a,r=(e=t.split("-"),a=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,n,o,s=[],l=!0,h=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=n.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(h)throw i}}return s}}(e,a)||j(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],n=r[1],o=r[2],s=new Date(Number(i),Number(n)-1,Number(o));this.updateBottomXAxisLabels(s),this.chart.update()}},{key:"setLanguage",value:function(t){this.language=t,this.setCustomDate(this.customDate),this.chart.update()}}])&&F(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Y={TODAY:0,LAST_7_DAYS:1,LAST_MONTH:2};function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,n,o,s=[],l=!0,h=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=n.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(h)throw i}}return s}}(t,e)||q(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){if(t){if("string"==typeof t)return $(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$(t,e):void 0}}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function K(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t,e){if("object"!=V(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:String(e)}const Z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.barColor="#3EB1C8",this.language=ChartLanguage.ENGLISH,this.filter=Y.TODAY,this.isDragging=!1,this.startX=0,this.defdata={labels:["TODAY"],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,hoverBackgroundColor:this.barColor,borderWidth:0,barThickness:40}]};var a={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{min:0,max:4,grid:{display:!1},position:"bottom"},y:{display:!1,beginAtZero:!0,max:150}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customBackground:{enabled:!0}}}};this.addCustomXAxisLabels(),this.chart=new Chart(this.ctx,a)}var e,a;return e=t,(a=[{key:"addCustomXAxisLabels",value:function(){Chart.register({id:"customBackground",beforeDraw:function(t,e,a){var r=t.ctx,i=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,i.width,30),r.restore()}})}},{key:"getDateDifferenceFromToday",value:function(t){var e=(new Date-t)/864e5;return Math.floor(e)}},{key:"getDateDifference",value:function(t,e){var a=(e-t)/864e5;return Math.floor(a)}},{key:"setChartData",value:function(t){var e=this;if(console.log("StepCountBarChart setChartData"),null!=t&&Array.isArray(t)&&t.length>0){t.sort((function(t,e){var a=t.startTime,r=e.startTime;return a<r?-1:a>r?1:0}));for(var a=z(t[0].startTime.split("-"),3),r=a[0],i=a[1],n=a[2],o=new Date(Number(r),Number(i)-1,Number(n)),s=this.getDateDifferenceFromToday(o)+1,l=0,h=new Array(s).fill(0),u=[],c=0;c<s;c++){var d=o.getMonth()+1,f=o.getDate(),y=d+"/"+(f<10?"0":"")+f;u.push(y),o.setDate(o.getDate()+1)}o=new Date(Number(r),Number(i)-1,Number(n));var m,p=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=q(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}(t);try{for(p.s();!(m=p.n()).done;){var v=m.value,b=z(v.startTime.split("-"),3);r=b[0],i=b[1],n=b[2];var g=new Date(Number(r),Number(i)-1,Number(n));h[this.getDateDifference(o,g)]=v.stepCount,v.stepCount>l&&(l=v.stepCount)}}catch(t){p.e(t)}finally{p.f()}u[u.length-1]="TODAY",this.chart.options.scales.y.max=l,this.defdata.labels=u,this.defdata.datasets[0].data=h,this.chart.update(),s>5&&(this.chart.canvas.addEventListener("mousedown",(function(t){e.isDragging=!0,e.startX=t.offsetX})),this.chart.canvas.addEventListener("mousemove",(function(t){if(e.isDragging){var a=t.offsetX-e.startX;a>0?a>100&&(e.startX=t.offsetX,e.chart.config.options.scales.x.min>0?(e.chart.config.options.scales.x.min-=1,e.chart.config.options.scales.x.max-=1):(e.chart.config.options.scales.x.min=0,e.chart.config.options.scales.x.max=4)):a<0&&a<-100&&(e.startX=t.offsetX,e.chart.config.options.scales.x.max<s-1?(e.chart.config.options.scales.x.min+=1,e.chart.config.options.scales.x.max+=1):(e.chart.config.options.scales.x.min=s-5,e.chart.config.options.scales.x.max=s-1)),e.chart.update()}})),this.chart.canvas.addEventListener("mouseup",(function(){e.isDragging=!1})),this.chart.canvas.addEventListener("mouseout",(function(){e.isDragging=!1})))}}},{key:"setChartFilter",value:function(t){this.filter=t}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=[],this.chart.update()}}])&&K(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function at(t,e,a){return e&&et(t.prototype,e),a&&et(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function rt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tt(e)?e:String(e)}const it=at((function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hr=e,this.time=a}));function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t){return function(t){if(Array.isArray(t))return lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||st(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){if(t){if("string"==typeof t)return lt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?lt(t,e):void 0}}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ht(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function ut(t,e,a){return(e=ct(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ct(t){var e=function(t,e){if("object"!=nt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nt(e)?e:String(e)}const dt=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,"hoverLineAndTextPlugin",{afterDatasetsDraw:function(t,e,r){var i=t.ctx,n=(t.canvas,t.data),o=t.chartArea,s=o.top,l=o.bottom,h=o.left,u=o.right,c=(o.width,o.height),d=t.scales,f=(d.x,d.y);if(a.xHoverCoor&&a.yHoverCoor)for(var y=0;y<t._metasets[0].data.length;y++){var m=void 0,p=void 0,v=t._metasets[0].data[y].x-1,b=t._metasets[0].data[y].x+1;if(a.xHoverCoor>=v&&a.xHoverCoor<=b){t.ctx.save(),t.ctx.beginPath();var g=void 0,C=t._metasets[0].data[y].$context.raw.y,A=t._metasets[0].data[y].$context.raw.x;if(null!==C&&a.isChartClicked){m=C,p=A,C>=a.thresholds.ADJUSTABLE_MIN&&C<a.thresholds.LOW?g=a.colors.MIN:C>=a.thresholds.LOW&&C<a.thresholds.MODERATE?g=a.colors.LOW:C>=a.thresholds.MODERATE&&C<a.thresholds.HIGH?g=a.colors.MODERATE:C>=a.thresholds.HIGH&&C<=a.thresholds.MAX&&(g=a.colors.HIGH),t.ctx.strokeStyle=g,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore();var x=c/3-m;x<s&&(x=s);var T=a.xHoverCoor-100,S=T+28;a.xHoverCoor<100+h?S=(T=h)+28:a.xHoverCoor>u-100&&(S=28+(T=u-200)),t.ctx.beginPath(),i.arc(a.xHoverCoor,f.getPixelForValue(C),5,0,2*Math.PI),i.borderWidth=5,i.borderColor="white",i.fillStyle=g,i.fill(),i.closePath(),t.ctx.beginPath(),t.ctx.fillStyle=g,t.ctx.roundRect(T-3,x-3,206,46,0),t.ctx.fill(),t.ctx.beginPath(),t.ctx.fillStyle="white",t.ctx.roundRect(T,x,200,40,0),t.ctx.fill(),t.ctx.beginPath(),i.arc(S-10,x+22,5,0,2*Math.PI),i.fillStyle=g,i.fill(),i.closePath(),t.ctx.font="bold 20px sans-serif";var D=new Date(p),E=D.getHours(),L=E>=12?"PM":"AM",I=(E%12||12).toString().padStart(2,"0"),w=D.getMinutes().toString().padStart(2,"0"),M="".concat(I,":").concat(w).concat(L),k=t.ctx.measureText("".concat(m," bpm ")).width;t.ctx.fillStyle="black",t.ctx.fillText("".concat(m," bpm "),S,x+23),t.ctx.font="20px sans-serif",t.ctx.fillText(M,S+k,x+23);break}g="rgba(255,255,255,0)"}else a.isChartClicked&&a.xHoverCoor+1>n.datasets[0].placeLineInPixels&&(t.ctx.save(),t.ctx.beginPath(),t.ctx.strokeStyle=a.colors.MIN,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore())}}}),ut(this,"customLineBorderPlugin",{beforeDraw:function(t,e){var r=t.chartArea.bottom,i=a.chartCanvas.parentNode,n=i.offsetWidth,o=window.getComputedStyle(i),s=o.getPropertyValue("padding-left"),l=o.getPropertyValue("padding-right"),h=n-(parseInt(s,10)+parseInt(l,10))-2,u=t.ctx;u.save(),u.beginPath(),u.strokeStyle="rgba(128, 128, 128,0.5)",u.moveTo(1,1),u.lineTo(h,1),u.lineTo(h,r+50),u.lineTo(1,r+50),u.closePath(),u.stroke()}}),ut(this,"nowIndicatorLinePlugin",{beforeDatasetsDraw:function(t,e,r){if(!1!==a.lineIndicator&&0!==t._metasets[0].data.length){var i=t.ctx,n=t.data,o=t.chartArea,s=(o.top,o.bottom),l=o.left,h=o.right,u=t.scales;u.x,u.y,i.save(),a.myChart.ctx.beginPath(),a.myChart.ctx.strokeStyle=a.colors.MODERATE,a.myChart.ctx.lineWidth=a.lineWidthValues.NOW_INDICATOR_LINE;var c=(f=n.datasets[0].placeLine.split(":").map(Number),y=2,function(t){if(Array.isArray(t))return t}(f)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,n,o,s=[],l=!0,h=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=n.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(h)throw i}}return s}}(f,y)||st(f,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=(60*c[0]+c[1])/1440*(h-l);n.datasets[0].placeLineInPixels=d+l,a.myChart.ctx.moveTo(d+l,1),a.myChart.ctx.lineTo(d+l,s),a.myChart.ctx.stroke(),a.myChart.ctx.restore(),a.myChart.ctx.font="normal 23px Arial",a.myChart.ctx.textBaseline="middle",a.myChart.ctx.fillStyle=a.colors.MODERATE,a.myChart.ctx.fillText(a.lineIndicatorText,d+20,s+70)}var f,y}}),ut(this,"fadeChartPlugin",{afterDatasetsDraw:function(t,e,r){t.ctx,t.canvas,t.data;var i=t.chartArea,n=(i.top,i.bottom),o=(i.left,i.right),s=(i.width,i.height,t.scales);if(s.x,s.y,a.isChartClicked){var l=t.ctx;t.scales.y,t.scales.x,l.save(),l.fillStyle=a.colors.FADE_CHART_ONCLICK,l.fillRect(2,2,o,n-2),l.restore()}}}),ut(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,i=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);i.x,i.y,e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),ut(this,"clickOnChartEnableHoverPlugin",{afterEvent:function(t,e){var r=e.event.x;if("click"===e.event.type){t.ctx,t.data;for(var i=t.chartArea,n=(i.top,i.bottom,i.left,i.right,t.scales),o=(n.x,n.y,0);o<t._metasets[0].data.length;o++){var s=t._metasets[0].data[o].x-8,l=t._metasets[0].data[o].x+8;if(r>=s&&r<=l){if(!0===a.isChartClicked)return void(a.isChartClicked=!1);a.isChartClicked=!0;break}}}}}),ut(this,"lineColorChangeOnThresholdPlugin",{afterLayout:function(t){var e=t.ctx;e.save();var r=t.scales.y,i=e.createLinearGradient(0,r.top,0,r.bottom);i.addColorStop(0,a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MIN),i.addColorStop(1,a.colors.MIN),t.data.datasets[0].borderColor=i,e.restore()}}),ut(this,"customXAxisLabelColorPlugin",{beforeDraw:function(t,e,r){var i=t.scales.x,n=i.top,o=(i.bottom,t.chartArea.left),s=t.chartArea.right,l=t.ctx;l.fillStyle=a.colors.X_AXIS_LABELS,l.fillRect(2,n,s+o-5,49)}}),ut(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,n=!1,o=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=st(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}(t.data.datasets);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){n=!0;break}}}catch(t){o.e(t)}finally{o.f()}if(!n){var l=t.chartArea,h=l.left,u=l.top,c=l.right,d=l.bottom,f=t.ctx,y=(h+c)/2,m=(u+d)/2;f.save(),f.textAlign="center",f.font="40px Arial",f.fillStyle="black",f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)",X_AXIS_LABELS:"rgb(237, 239, 240)",HOVER_RECTANGLE:"rgba(237, 239, 240,0.3)",FADE_CHART_ONCLICK:"rgba(255, 255, 255, 0.7)"},this.lineWidthValues={NOW_INDICATOR_LINE:3,HOVER_LINE:2,CHART_LINE:2,BORDER_LINE:1},this.myChart,this.xHoverCoor,this.yHoverCoor,this.isChartClicked=!1,this.chartCanvas=e,this.heartRateData=[],this.hourFormat=!0,this.maxValue=220,this.lineIndicator=!0,this.lineIndicatorText="NOW",this.noDataText="NO DATA",this.connectDuration=10,this.connectAllPoints=!0,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:220},this.initializeChart()}var e,a;return e=t,(a=[{key:"initializeChart",value:function(){var t=this,e={labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:this.lineWidthValues.CHART_LINE,spanGaps:!1,placeLine:"00:00",placeLineInPixels:0}]},a={type:"line",data:e,options:{animation:{duration:0},layout:{padding:{bottom:50}},responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour"},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!0,grid:{drawOnChartArea:!1,display:!1,drawBorder:!1},border:{display:!1},ticks:{offset:!1,autoSkip:!1,callback:function(e,a,r){switch(a){case 0:return t.hourFormat?"12:00AM":"00:00";case 6:return t.hourFormat?"06:00AM":"06:00";case 12:return t.hourFormat?"12:00PM":"12:00";case 18:return t.hourFormat?"06:00PM":"18:00";case 24:return t.hourFormat?"11:59PM":"23:59";default:return}},maxRotation:0,minRotation:0,color:"black",padding:8,font:{weight:"normal",size:20}}},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},ticks:{stepSize:1,maxTicksLimit:2*this.thresholds.MAX,color:"black",font:{weight:"bold",size:20},callback:function(a,r){if(0!==e.datasets[0].data.length)return a===t.thresholds.LOW||a===t.thresholds.MODERATE||a===t.thresholds.HIGH?a:void 0},grid:{color:"red"},gridLines:{drawBorder:!1}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.customLineBorderPlugin,this.nowIndicatorLinePlugin,this.hoverCursorValuesXYPlugin,this.fadeChartPlugin,this.hoverLineAndTextPlugin,this.clickOnChartEnableHoverPlugin,this.lineColorChangeOnThresholdPlugin,this.customXAxisLabelColorPlugin,this.noDataTextPlugin]};this.myChart=new Chart(this.chartCanvas,a)}},{key:"showChart",value:function(){}},{key:"setChartData",value:function(t){this.heartRateData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.heartRateData).push.apply(e,ot(t)),this.updateChart()}},{key:"addData",value:function(t){this.heartRateData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortHeartRateDataByTime(),this.updateChartYMinMax(),this.updateChartData(),this.myChart.update(),console.log("Heart Rate Chart is rendered!")}},{key:"updateChartData",value:function(){for(var t,e=0;e<this.heartRateData.length;e++){var a=this.heartRateData[e];this.myChart.data.datasets[0].data.push({x:a.time,y:parseInt(a.hr)}),this.addGapIfRequired(e)}var r=null===(t=this.heartRateData[this.heartRateData.length-1])||void 0===t?void 0:t.time;r&&this.moveLineToLatest(r)}},{key:"addGapIfRequired",value:function(t){if(t+1<this.heartRateData.length){var e=(this.heartRateData[t+1].time-this.heartRateData[t].time)/6e4,a=this.connectAllPoints,r=this.connectDuration;if(!a&&e>r){var i=new Date(this.heartRateData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:i,y:null})}}}},{key:"convertToDates",value:function(){this.heartRateData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortHeartRateDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.heartRateData=this.heartRateData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.heartRateData.length){var t=Math.min.apply(Math,ot(this.heartRateData.map((function(t){return t.hr})))),e=Math.max.apply(Math,ot(this.heartRateData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"setMaxValue",value:function(t){t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setFormat",value:function(t){"12HR"===t||"24HR"===t?(this.hourFormat="12HR"===t,this.updateChart()):alert("Error value. Values accepted are only 12HR and 24HR")}},{key:"deleteData",value:function(t){t>=this.heartRateData.length?alert("Error value. Can delete index from length of list value"):this.heartRateData.splice(t,1)}},{key:"moveLine",value:function(t){/^([01]\d|2[0-3]):([0-5]\d)$/.test(t)?0===this.heartRateData.length?alert("No data in chart."):(this.myChart.data.datasets[0].placeLine=t,this.myChart.update()):alert("Invalid time format. Please use military time format (HH:mm).")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),n=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(n)&&r<=i&&i<=n?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=n,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"setTimeLineIndicatorToggle",value:function(t){"boolean"==typeof t&&(this.lineIndicator=!!t,this.myChart.update())}},{key:"setLineIndicator",value:function(t){this.lineIndicatorText=t,this.myChart.update()}},{key:"clearChart",value:function(){this.heartRateData=[],this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.connectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.heartRateData.length>0){var i=this.heartRateData[this.heartRateData.length-1].time,n=i.getHours(),o=i.getMinutes(),s=i.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(n,o,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.heartRateData.push({hr:h,time:new Date(r)}),r.setMinutes(r.getMinutes()+1)}}},{key:"moveLineToLatest",value:function(t){var e=new Date(t),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");this.myChart.data.datasets[0].placeLine="".concat(a,":").concat(r)}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}}])&&ht(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function yt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pt(r.key),r)}}function mt(t,e,a){return e&&yt(t.prototype,e),a&&yt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function pt(t){var e=function(t,e){if("object"!=ft(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(e)?e:String(e)}const vt=mt((function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hr=e,this.time=a}));function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function gt(t){return function(t){if(Array.isArray(t))return Ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ct(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ct(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function At(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xt(r.key),r)}}function xt(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:String(e)}const Tt=function(){function t(e){var a,r,i,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i={afterLayout:function(t){var e=t.ctx;e.save();var a=t.scales.y,r=e.createLinearGradient(0,a.top,0,a.bottom);r.addColorStop(0,n.colors.HIGH),r.addColorStop(n.getThreshold(n.thresholds.HIGH-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.HIGH),r.addColorStop(n.getThreshold(n.thresholds.HIGH-.5-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.MODERATE),r.addColorStop(n.getThreshold(n.thresholds.MODERATE-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.MODERATE),r.addColorStop(n.getThreshold(n.thresholds.MODERATE-.5-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.LOW),r.addColorStop(n.getThreshold(n.thresholds.LOW-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.LOW),r.addColorStop(n.getThreshold(n.thresholds.LOW-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.MIN),r.addColorStop(1,n.colors.MIN),t.data.datasets[0].borderColor=r,e.restore()}},(r=xt(r="lineColorChangeOnThresholdPlugin"))in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i,this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)"},this.myChart,this.chartCanvas=e,this.heartRateData=[],this.maxValue=220,this.connectDuration=10,this.connectAllPoints=!1,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:220},this.initializeChart()}var e,a;return e=t,(a=[{key:"initializeChart",value:function(){var t={type:"line",data:{labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:1,spanGaps:!1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour"},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!1},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},display:!1}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.lineColorChangeOnThresholdPlugin]};this.myChart=new Chart(this.chartCanvas,t)}},{key:"showChart",value:function(){}},{key:"setChartData",value:function(t){this.heartRateData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.heartRateData).push.apply(e,gt(t)),this.updateChart()}},{key:"addData",value:function(t){this.heartRateData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortHeartRateDataByTime(),this.updateChartYMinMax(),this.updateChartData(),this.myChart.update(),console.log("Tile Heart Rate Chart is rendered!")}},{key:"updateChartData",value:function(){for(var t=0;t<this.heartRateData.length;t++){var e=this.heartRateData[t];this.myChart.data.datasets[0].data.push({x:e.time,y:parseInt(e.hr)}),this.addGapIfRequired(t)}}},{key:"addGapIfRequired",value:function(t){if(t+1<this.heartRateData.length){var e=(this.heartRateData[t+1].time-this.heartRateData[t].time)/6e4,a=this.connectAllPoints,r=this.connectDuration;if(!a&&e>r){var i=new Date(this.heartRateData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:i,y:null})}}}},{key:"convertToDates",value:function(){this.heartRateData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortHeartRateDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.heartRateData=this.heartRateData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.heartRateData.length){var t=Math.min.apply(Math,gt(this.heartRateData.map((function(t){return t.hr})))),e=Math.max.apply(Math,gt(this.heartRateData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"addDataToChart",value:function(t,e){if(""===t||""===e||isNaN(t))alert("Please enter correct values.");else if(parseInt(t)>this.thresholds.MAX)alert("Input exceeds max value. Please enter correct values.");else if(parseInt(t)<this.thresholds.MIN)alert("Input is below minimum value. Please enter correct values.");else{var a={hr:parseInt(t),time:new Date("2024-01-01T".concat(e))};this.heartRateData.push(a)}}},{key:"setMaxValue",value:function(t){t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),n=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(n)&&r<=i&&i<=n?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=n,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"deleteData",value:function(t){t>=this.heartRateData.length?alert("Error value. Can delete index from length of list value"):this.heartRateData.splice(t,1)}},{key:"clearChart",value:function(){this.heartRateData=[],this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.connectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.heartRateData.length>0){var i=this.heartRateData[this.heartRateData.length-1].time,n=i.getHours(),o=i.getMinutes(),s=i.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(n,o,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.heartRateData.push({hr:h,time:new Date(r)}),r.setMinutes(r.getMinutes()+1)}}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}}])&&At(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Dt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lt(r.key),r)}}function Et(t,e,a){return e&&Dt(t.prototype,e),a&&Dt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lt(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:String(e)}const It=Et((function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=a}));function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function Mt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){if(t){if("string"==typeof t)return Rt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Rt(t,e):void 0}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Ht(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Nt(t,e,a){return(e=Pt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pt(t){var e=function(t,e){if("object"!=wt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wt(e)?e:String(e)}const Ot=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Nt(this,"customXAxisLabelColorPlugin",{beforeDraw:function(t,e,r){var i=t.scales.x,n=i.top,o=(i.bottom,t.chartArea.left),s=t.chartArea.right,l=t.ctx;l.fillStyle=a.colors.CUSTOM_X_AXIS,l.fillRect(o,n,s+o,70),l.save(),l.beginPath(),l.strokeStyle=a.colors.LINE,l.lineWidth=1,l.moveTo(o,n),l.lineTo(s+o,n),l.stroke(),l.restore()}}),Nt(this,"lineIndicatorPlugin",{beforeDatasetsDraw:function(t,e,r){var i=t.ctx,n=(t.data,t.chartArea),o=(n.top,n.bottom),s=(n.left,n.right,t.scales),l=s.x;if(s.y,0!==t.data.datasets[0].data.length){i.save(),i.beginPath();var h=a.myChart.data.datasets[0].placeLine;if(a.filter===a.AverageRestingHRFilter.WEEKLY){if(h>7||h<0)return}else if(a.filter===a.AverageRestingHRFilter.MONTHLY){if(h>30||h<0)return}else if(a.filter===a.AverageRestingHRFilter.YEARLY&&(h>365||h<0))return;i.strokeStyle=a.colors.LINE,i.lineWidth=2,i.moveTo(l.getPixelForTick(h),0),i.lineTo(l.getPixelForTick(h),o),i.stroke()}}}),Nt(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,n=!1,o=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=kt(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}(t.data.datasets);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){n=!0;break}}}catch(t){o.e(t)}finally{o.f()}if(!n){var l=t.chartArea,h=l.left,u=l.top,c=l.right,d=l.bottom,f=t.ctx,y=(t.scales.x,(h+c)/2),m=(u+d)/2;f.save(),f.textAlign="center",f.font="40px Arial",f.fillStyle="black",f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),Nt(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,i=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);i.x,i.y,e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),Nt(this,"clickAndChangeLinePositionPlugin",{afterEvent:function(t,e){var r=e.event.x,i=(e.event.y,e.event.type),n=8;if(a.filter===a.AverageRestingHRFilter.YEARLY&&(n=4),"click"===i){t.ctx,t.data;for(var o=t.chartArea,s=(o.top,o.bottom,o.left,o.right,t.scales),l=(s.x,s.y,0);l<t._metasets[0].data.length;l++){var h=t._metasets[0].data[l].x-n,u=t._metasets[0].data[l].x+n;if(r>=h&&r<=u){var c=t._metasets[0].data[l].$context.raw.x,d=a.myChart.options.scales.x.min.getTime(),f=(c.getTime()-d)/864e5;a.moveLineToLatest(f)}}}}}),this.chartCanvas=e,this.myChart,this.noDataText="NOT ENOUGH HR DATA",this.filter,this.startDate,this.endDate,this.todayDate=new Date,this.aveRestingHRData=[],this.lowestDateScrolling,this.highestDateScrolling,this.dayCounter=0,this.xHoverCoor,this.yHoverCoor,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:80,MODERATE:100,HIGH:120,ADJUSTABLE_MAX:200},this.colors={LINE:"rgb(111, 111, 111)",POINTER:"rgb(42, 192, 238)",POINTER_RADIUS:"rgb(147, 147, 147)",CUSTOM_X_AXIS:"rgb(237, 239, 240)"},this.AverageRestingHRFilter={WEEKLY:0,MONTHLY:1,YEARLY:2};var r={type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:this.colors.POINTER,borderColor:this.colors.POINTER_RADIUS,borderWidth:2,pointStyle:"circle",pointRadius:7,pointHoverRadius:7,pointBorderColor:"black",placeLine:0}]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,scaleShowValues:!0,scales:{x:{max:366,offset:!0,type:"time",grid:{display:!1},time:{unit:"day",displayFormats:{day:"MM/dd"}},border:{display:!1},ticks:Nt(Nt(Nt(Nt(Nt(Nt({maxRotation:0,stepSize:1,source:"date",autoSkip:!0,callback:function(t,e,r){var i=new Date(t),n=i.getMonth(),o=i.getDate(),s=n+1+"/"+String(o).padStart(2,"0");return a.filter===a.AverageRestingHRFilter.WEEKLY?s:a.filter!==a.AverageRestingHRFilter.MONTHLY||(e-2+a.dayCounter)%7!=0&&e-2+a.dayCounter!==0?a.filter===a.AverageRestingHRFilter.YEARLY?a.getMonth(n,o):"":s}},"maxRotation",0),"minRotation",0),"color",this.colors.LINE),"padding",10),"font",{weight:"normal",size:15}),"autoSkip",!1)},y:{min:this.thresholds.ADJUSTABLE_MIN,border:{display:!1},grid:{lineWidth:1,color:this.colors.LINE},ticks:{stepSize:1,color:this.colors.LINE,font:{weight:"normal",size:15},callback:function(t,e){if(t===a.thresholds.LOW||t===a.thresholds.MODERATE||t===a.thresholds.HIGH)return t}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.customXAxisLabelColorPlugin,this.lineIndicatorPlugin,this.noDataTextPlugin,this.hoverCursorValuesXYPlugin,this.clickAndChangeLinePositionPlugin]};this.myChart=new Chart(this.chartCanvas,r),this.myChart.canvas.addEventListener("wheel",(function(t){a.scroller(t,myChart),t.preventDefault()})),this.updateChartXMinMax(this.AverageRestingHRFilter.WEEKLY),this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}var e,a;return e=t,(a=[{key:"scroller",value:function(t){if(0!==this.myChart.data.datasets[0].data.length&&0!==this.aveRestingHRData){var e=864e5;t.deltaY>0?this.myChart.options.scales.x.max.getTime()+e<=this.highestDateScrolling.getTime()&&(this.myChart.options.scales.x.min=new Date(this.myChart.options.scales.x.min.getTime()+e),this.myChart.options.scales.x.max=new Date(this.myChart.options.scales.x.max.getTime()+e),this.dayCounter++,this.myChart.data.datasets[0].placeLine--):t.deltaY<0&&this.myChart.options.scales.x.min.getTime()-e>=this.lowestDateScrolling.getTime()&&(this.myChart.options.scales.x.min=new Date(this.myChart.options.scales.x.min.getTime()-e),this.myChart.options.scales.x.max=new Date(this.myChart.options.scales.x.max.getTime()-e),this.dayCounter--,this.myChart.data.datasets[0].placeLine++),this.myChart.update(),7!==this.dayCounter&&7!==this.dayCounter||(this.dayCounter=0)}}},{key:"moveLineToLatest",value:function(t){this.myChart.data.datasets[0].placeLine=t}},{key:"setTodayDate",value:function(t){/^\d{4}-\d{2}-\d{2}$/.test(t)?this.todayDate=new Date(t):(alert("Error: Invalid date format. Setting the date to today."),this.todayDate=new Date),this.updateChartXMinMax(this.filter),this.updateChartYMinMax(),this.myChart.update()}},{key:"setFilter",value:function(t){this.filter=t}},{key:"setChartData",value:function(t,e){this.aveRestingHRData=t,this.updateChart(e)}},{key:"addMultipleData",value:function(t,e){var a;(a=this.aveRestingHRData).push.apply(a,Mt(t)),this.updateChart(e)}},{key:"addData",value:function(t,e){this.aveRestingHRData.push(t),this.updateChart(e)}},{key:"setFilterView",value:function(t){this.updateChart(t)}},{key:"updateChart",value:function(t){this.myChart.data.datasets[0].data=[],this.updateChartXMinMax(t),this.convertToDates(),this.sortData(),this.updateChartYMinMax();for(var e=0;e<this.aveRestingHRData.length;e++){var a=this.aveRestingHRData[e].y;"string"==typeof a&&(a=parseInt(a)),this.myChart.data.datasets[0].data.push({x:this.aveRestingHRData[e].x,y:a})}this.myChart.update()}},{key:"getFormatDate",value:function(t){var e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(a,"-").concat(r,"T00:00:00")}},{key:"convertToDates",value:function(){this.aveRestingHRData.forEach((function(t){t.x instanceof Date||(t.x=new Date(t.x+"T00:00:00"))}))}},{key:"sortData",value:function(){this.aveRestingHRData.sort((function(t,e){return t.x.getTime()-e.x.getTime()}))}},{key:"getMonth",value:function(t,e){var a=" ";switch(t){case 0:1===e&&(a="JAN");break;case 1:1===e&&(a="FEB");break;case 2:1===e&&(a="MAR");break;case 3:1===e&&(a="APR");break;case 4:1===e&&(a="MAY");break;case 5:1===e&&(a="JUN");break;case 6:1===e&&(a="JUL");break;case 7:1===e&&(a="AUG");break;case 8:1===e&&(a="SEP");break;case 9:1===e&&(a="OCT");break;case 10:1===e&&(a="NOV");break;case 11:1===e&&(a="DEC");break;default:a=" "}return a}},{key:"updateChartXMinMax",value:function(t){this.endDate=this.todayDate,this.endDate.setHours(0),this.endDate.setMinutes(0),this.endDate.setSeconds(0),this.endDate.setMilliseconds(0),this.startDate=new Date(this.endDate),this.setFilter(t),this.dayCounter=0,this.filter===this.AverageRestingHRFilter.WEEKLY?(this.startDate.setDate(this.startDate.getDate()-7),this.moveLineToLatest(7)):this.filter===this.AverageRestingHRFilter.MONTHLY?(this.startDate.setDate(this.startDate.getDate()-30),this.moveLineToLatest(30)):this.filter===this.AverageRestingHRFilter.YEARLY&&(this.startDate.setDate(this.startDate.getDate()-365),this.moveLineToLatest(365)),this.myChart.options.scales.x.min=this.startDate,this.myChart.options.scales.x.max=this.endDate}},{key:"updateChartYMinMax",value:function(){if(0!==this.aveRestingHRData.length){var t=Math.min.apply(Math,Mt(this.aveRestingHRData.map((function(t){return t.y})))),e=Math.max.apply(Math,Mt(this.aveRestingHRData.map((function(t){return t.y}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX;var a=this.aveRestingHRData.map((function(t){return new Date(t.x)}));this.lowestDateScrolling=new Date(Math.min.apply(Math,Mt(a))),this.highestDateScrolling=new Date(Math.max.apply(Math,Mt(a)));var r=this.todayDate;this.highestDateScrolling<r&&(this.highestDateScrolling=r);var i=this.todayDate-this.lowestDateScrolling,n=0;if(this.filter===this.AverageRestingHRFilter.WEEKLY?n=7:this.filter===this.AverageRestingHRFilter.MONTHLY?n=30:this.filter===this.AverageRestingHRFilter.YEARLY&&(n=365),i<=24*n*60*60*1e3&&i>=0){var o=new Date(this.todayDate);o.setDate(o.getDate()-n),this.lowestDateScrolling=o}}else this.thresholds.LOW<=20?this.thresholds.ADJUSTABLE_MIN=0:this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN,this.thresholds.MAX=this.thresholds.HIGH+20,this.myChart.options.scales.y.max=this.thresholds.MAX}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),n=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(n)&&r<=i&&i<=n?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=n,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"clearChart",value:function(){console.log("Clearing..."),this.aveRestingHRData=[],this.updateChartXMinMax(this.AverageRestingHRFilter.WEEKLY),this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}}])&&Ht(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Bt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jt(r.key),r)}}function Ut(t,e,a){return e&&Bt(t.prototype,e),a&&Bt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function jt(t){var e=function(t,e){if("object"!=_t(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_t(e)?e:String(e)}const Wt=Ut((function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hr=e,this.time=a}));function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Xt(t){return function(t){if(Array.isArray(t))return Jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Gt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){if(t){if("string"==typeof t)return Jt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Jt(t,e):void 0}}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Yt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function Vt(t,e,a){return(e=zt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zt(t){var e=function(t,e){if("object"!=Ft(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ft(e)?e:String(e)}const qt=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Vt(this,"hoverLineAndTextPlugin",{afterDatasetsDraw:function(t,e,r){var i=t.ctx,n=(t.canvas,t.data),o=t.chartArea,s=o.top,l=o.bottom,h=o.left,u=o.right,c=(o.width,o.height),d=t.scales,f=(d.x,d.y);if(a.xHoverCoor&&a.yHoverCoor)for(var y=0;y<t._metasets[0].data.length;y++){var m=void 0,p=void 0,v=t._metasets[0].data[y].x-1,b=t._metasets[0].data[y].x+1;if(a.xHoverCoor>=v&&a.xHoverCoor<=b){t.ctx.save(),t.ctx.beginPath();var g=void 0,C=t._metasets[0].data[y].$context.raw.y,A=t._metasets[0].data[y].$context.raw.x;if(null!==C&&a.isChartClicked){m=C,p=A,C>=a.thresholds.ADJUSTABLE_MIN&&C<a.thresholds.LOW?g=a.colors.MIN:C>=a.thresholds.LOW&&C<a.thresholds.MODERATE?g=a.colors.LOW:C>=a.thresholds.MODERATE&&C<a.thresholds.HIGH?g=a.colors.MODERATE:C>=a.thresholds.HIGH&&C<=a.thresholds.MAX&&(g=a.colors.HIGH),t.ctx.strokeStyle=g,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore();var x=c/3-m;x<s&&(x=s);var T=a.xHoverCoor-100,S=T+28;a.xHoverCoor<100+h?S=(T=h)+28:a.xHoverCoor>u-100&&(S=28+(T=u-200)),t.ctx.beginPath(),i.arc(a.xHoverCoor,f.getPixelForValue(C),5,0,2*Math.PI),i.borderWidth=5,i.borderColor="white",i.fillStyle=g,i.fill(),i.closePath(),t.ctx.beginPath(),t.ctx.fillStyle=g,t.ctx.roundRect(T-3,x-3,206,46,0),t.ctx.fill(),t.ctx.beginPath(),t.ctx.fillStyle="white",t.ctx.roundRect(T,x,200,40,0),t.ctx.fill(),t.ctx.beginPath(),i.arc(S-10,x+22,5,0,2*Math.PI),i.fillStyle=g,i.fill(),i.closePath(),t.ctx.font="bold 20px sans-serif";var D=new Date(p),E=D.getHours(),L=E>=12?"PM":"AM",I=(E%12||12).toString().padStart(2,"0"),w=D.getMinutes().toString().padStart(2,"0"),M="".concat(I,":").concat(w).concat(L),k=t.ctx.measureText("".concat(m," bpm ")).width;t.ctx.fillStyle="black",t.ctx.fillText("".concat(m," bpm "),S,x+23),t.ctx.font="20px sans-serif",t.ctx.fillText(M,S+k,x+23);break}g="rgba(255,255,255,0)"}else a.isChartClicked&&a.xHoverCoor+1>n.datasets[0].placeLineInPixels&&(t.ctx.save(),t.ctx.beginPath(),t.ctx.strokeStyle=a.colors.MIN,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore())}}}),Vt(this,"nowIndicatorLinePlugin",{beforeDatasetsDraw:function(t,e,r){if(!1!==a.lineIndicator&&0!==t._metasets[0].data.length){var i=t.ctx,n=t.data,o=t.chartArea,s=(o.top,o.bottom),l=o.left,h=o.right,u=t.scales;u.x,u.y,i.save(),a.myChart.ctx.beginPath(),a.myChart.ctx.strokeStyle=a.colors.MODERATE,a.myChart.ctx.lineWidth=a.lineWidthValues.NOW_INDICATOR_LINE;var c=(f=n.datasets[0].placeLine.split(":").map(Number),y=2,function(t){if(Array.isArray(t))return t}(f)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,n,o,s=[],l=!0,h=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=n.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(h)throw i}}return s}}(f,y)||Gt(f,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=(60*c[0]+c[1])/1440*(h-l);n.datasets[0].placeLineInPixels=d+l,a.myChart.ctx.moveTo(d+l,1),a.myChart.ctx.lineTo(d+l,s),a.myChart.ctx.stroke(),a.myChart.ctx.restore(),a.myChart.ctx.font="normal 23px Arial",a.myChart.ctx.textBaseline="middle",a.myChart.ctx.fillStyle=a.colors.MODERATE,a.myChart.ctx.fillText(a.lineIndicatorText,d+20,s+70)}var f,y}}),Vt(this,"fadeChartPlugin",{afterDatasetsDraw:function(t,e,r){t.ctx,t.canvas,t.data;var i=t.chartArea,n=(i.top,i.bottom),o=(i.left,i.right),s=(i.width,i.height,t.scales);if(s.x,s.y,a.isChartClicked){var l=t.ctx;t.scales.y,t.scales.x,l.save(),l.fillStyle=a.colors.FADE_CHART_ONCLICK,l.fillRect(2,2,o,n-2),l.restore()}}}),Vt(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,i=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);i.x,i.y,e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),Vt(this,"clickOnChartEnableHoverPlugin",{afterEvent:function(t,e){var r=e.event.x;if(e.event.y,"click"===e.event.type){t.ctx,t.data;for(var i=t.chartArea,n=(i.top,i.bottom,i.left,i.right,t.scales),o=(n.x,n.y,0);o<t._metasets[0].data.length;o++){var s=t._metasets[0].data[o].x-8,l=t._metasets[0].data[o].x+8;if(r>=s&&r<=l){if(!0===a.isChartClicked)return void(a.isChartClicked=!1);a.isChartClicked=!0;break}}}}}),Vt(this,"lineColorChangeOnThresholdPlugin",{afterLayout:function(t){var e=t.ctx;e.save();var r=t.scales.y,i=e.createLinearGradient(0,r.top,0,r.bottom);i.addColorStop(0,a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MIN),i.addColorStop(1,a.colors.MIN),t.data.datasets[0].borderColor=i,e.restore()}}),Vt(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,n=!1,o=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Gt(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,n=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw n}}}}(t.data.datasets);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){n=!0;break}}}catch(t){o.e(t)}finally{o.f()}if(!n){var l=t.chartArea,h=l.left,u=l.top,c=l.right,d=l.bottom,f=t.ctx,y=(t.scales.x,(h+c)/2),m=(u+d)/2;f.save(),f.strokeStyle=a.colors.X_AXIS_LABELS,f.lineWidth=2,f.strokeRect(2,u+2,c+h-4,d-u),f.textAlign="center",f.font="40px Arial",f.fillStyle=a.colors.X_AXIS_LABELS,f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)",X_AXIS_LABELS:"rgb(128, 128, 128)",HOVER_RECTANGLE:"rgba(237, 239, 240,0.3)",FADE_CHART_ONCLICK:"rgba(255, 255, 255, 0.7)"},this.lineWidthValues={NOW_INDICATOR_LINE:3,HOVER_LINE:2,CHART_LINE:3,BORDER_LINE:2},this.myChart,this.xHoverCoor,this.yHoverCoor,this.isChartClicked=!1,this.chartCanvas=e,this.paiEarnedData=[],this.hourFormat=!0,this.maxValue=220,this.lineIndicator=!0,this.lineIndicatorText="NOW",this.noDataText="NO DATA",this.connectDuration=10,this.connectAllPoints=!0,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:220},this.initializeChart()}var e,a;return e=t,(a=[{key:"initializeChart",value:function(){var t=this,e={labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:this.lineWidthValues.CHART_LINE,spanGaps:!1,placeLine:"00:00",placeLineInPixels:0}]},a={type:"line",data:e,options:{animation:{duration:0},layout:{padding:{bottom:50}},responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour",autoSkip:!1},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!0,grid:{drawOnChartArea:!1,display:!1,drawBorder:!1},border:{display:!1},ticks:{offset:!1,callback:function(e,a,r){var i=new Date(e);if(a%4==0){var n,o=i.getHours();return t.hourFormat?(n=(o%12||12).toString(),n+=o<12?"am":"pm"):n=o.toString().padStart(2,"0"),n}},maxRotation:0,minRotation:0,color:"black",padding:8,font:{weight:"normal",size:20}}},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},ticks:{stepSize:1,maxTicksLimit:2*this.thresholds.MAX,color:"black",font:{weight:"bold",size:20},callback:function(a,r){if(0!==e.datasets[0].data.length)return a===t.thresholds.LOW||a===t.thresholds.MODERATE||a===t.thresholds.HIGH?a:void 0},grid:{color:"red"},gridLines:{drawBorder:!1}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.nowIndicatorLinePlugin,this.hoverCursorValuesXYPlugin,this.fadeChartPlugin,this.hoverLineAndTextPlugin,this.clickOnChartEnableHoverPlugin,this.lineColorChangeOnThresholdPlugin,this.noDataTextPlugin]};this.myChart=new Chart(this.chartCanvas,a)}},{key:"setChartData",value:function(t){this.paiEarnedData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.paiEarnedData).push.apply(e,Xt(t)),this.updateChart()}},{key:"addData",value:function(t){this.paiEarnedData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortPAIEarnedDataByTime(),this.updateChartYMinMax(),this.updateChartData(),this.myChart.update()}},{key:"updateChartData",value:function(){for(var t,e=0;e<this.paiEarnedData.length;e++){var a=this.paiEarnedData[e];this.myChart.data.datasets[0].data.push({x:a.time,y:parseInt(a.hr)}),this.addGapIfRequired(e)}var r=null===(t=this.paiEarnedData[this.paiEarnedData.length-1])||void 0===t?void 0:t.time;r&&this.moveLineToLatest(r)}},{key:"addGapIfRequired",value:function(t){if(t+1<this.paiEarnedData.length){var e=(this.paiEarnedData[t+1].time-this.paiEarnedData[t].time)/6e4,a=this.connectAllPoints,r=this.connectDuration;if(!a&&e>r){var i=new Date(this.paiEarnedData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:i,y:null})}}}},{key:"convertToDates",value:function(){this.paiEarnedData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortPAIEarnedDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.paiEarnedData=this.paiEarnedData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.paiEarnedData.length){var t=Math.min.apply(Math,Xt(this.paiEarnedData.map((function(t){return t.hr})))),e=Math.max.apply(Math,Xt(this.paiEarnedData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"setMaxValue",value:function(t){t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setFormat",value:function(t){"12HR"===t||"24HR"===t?(this.hourFormat="12HR"===t,this.myChart.update()):alert("Error value. Values accepted are only 12HR and 24HR")}},{key:"deleteData",value:function(t){t>=this.paiEarnedData.length?alert("Error value. Can delete index from length of list value"):(this.paiEarnedData.splice(t,1),this.updateChart())}},{key:"moveLine",value:function(t){/^([01]\d|2[0-3]):([0-5]\d)$/.test(t)?0===this.paiEarnedData.length?alert("No data in chart."):(this.myChart.data.datasets[0].placeLine=t,this.myChart.update()):alert("Invalid time format. Please use military time format (HH:mm).")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),n=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(n)&&r<=i&&i<=n?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=n,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"setTimeLineIndicatorToggle",value:function(t){"boolean"==typeof t&&(this.lineIndicator=!!t,this.myChart.update())}},{key:"setLineIndicator",value:function(t){this.lineIndicatorText=t,this.myChart.update()}},{key:"clearChart",value:function(){this.paiEarnedData=[],this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.connectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.paiEarnedData.length>0){var i=this.paiEarnedData[this.paiEarnedData.length-1].time,n=i.getHours(),o=i.getMinutes(),s=i.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(n,o,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.paiEarnedData.push({hr:h,time:new Date(r)}),r.setMinutes(r.getMinutes()+1)}}},{key:"moveLineToLatest",value:function(t){var e=new Date(t),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");this.myChart.data.datasets[0].placeLine="".concat(a,":").concat(r)}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}}])&&Yt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function Kt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qt(r.key),r)}}function Qt(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(e)?e:String(e)}const Zt=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startTime=e,this.heartRate=a}var e,a;return e=t,(a=[{key:"heartRate",get:function(){return this._heartRate},set:function(t){this._heartRate=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}}])&&Kt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),te={NAME:"Timex JS Charts Library",VERSION:"v0.1.10",COMPANY:"Timex Group USA"};void 0!==(t=a.hmd(t)).exports?t.exports={TimeDisplayFormat:r,TimeInterval:i,StepCountInterval:l,StepCountBarChart:f,SleepQuality:y,SleepQualityInterval:b,SleepQualityBarChart:w,FitnessAgeBarChart:N,PAIScore:B,DailyPAIBarChart:J,ActivityHistoryFilter:Y,ActivityHistoryBarChart:Z,HeartRateLineDataModel:it,HeartRateLineChart:dt,TileHeartRateLineDataModel:vt,TileHeartRateLineChart:Tt,AveRestingHRLineChartModel:It,AveRestingHRLineChart:Ot,PAIEarnedLineChartModel:Wt,PAIEarnedLineChart:qt,ChartLanguage:T,HeartRateInterval:Zt,TimexCharts:te}:(window.TimeDisplayFormat=r,window.TimeInterval=i,window.StepCountInterval=l,window.StepCountBarChart=f,window.SleepQuality=y,window.SleepQualityInterval=b,window.SleepQualityBarChart=w,window.FitnessAgeBarChart=N,window.PAIScore=B,window.DailyPAIBarChart=J,window.ActivityHistoryFilter=Y,window.ActivityHistoryBarChart=Z,window.HeartRateLineDataModel=it,window.HeartRateLineChart=dt,window.TileHeartRateLineDataModel=vt,window.TileHeartRateLineChart=Tt,window.AveRestingHRLineChartModel=It,window.AveRestingHRLineChart=Ot,window.PAIEarnedLineChartModel=Wt,window.PAIEarnedLineChart=qt,window.ChartLanguage=T,window.HeartRateInterval=Zt,window.TimexCharts=te)}},e={};function a(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={id:r,loaded:!1,exports:{}};return t[r](n,n.exports,a),n.loaded=!0,n.exports}return a.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a(320)})()));