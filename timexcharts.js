!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.timexcharts=e():t.timexcharts=e()}(self,(()=>(()=>{"use strict";var t={856:(t,e,a)=>{a.r(e);const r={USE_12HR_FORMAT:0,USE_24HR_FORMAT:1},i={ONE_SECOND:86400,ONE_MINUTE:1440,FIVE_MINUTES:288,TEN_MINUTES:144,FIFTEEN_MINUTES:96,TWENTY_MINUTES:72,THIRTY_MINUTES:48,ONE_HOUR:24};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:String(e)}const l=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startTime=e,this.stepCount=a}var e,a;return e=t,(a=[{key:"stepCount",get:function(){return this._stepCount},set:function(t){this._stepCount=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}}])&&n(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function u(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:String(e)}const f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.barColor="#3EB1C8",this.timeFormat=r.USE_12HR_FORMAT,this.maxIntervalCount=i.ONE_SECOND,this.intervalUsed=i.ONE_SECOND,this.displayIntervalCount=i.FIFTEEN_MINUTES,this.defdata={labels:[""],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,hoverBackgroundColor:this.barColor,borderWidth:0,barPercentage:1,categoryPercentage:1}]};var a={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,a){return a.length,""}}},y:{display:!1,beginAtZero:!0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customXAxisBackground:{enabled:!0,label1:"12:00 AM",label2:"12:00 PM",label3:"11:59 PM"}}}};this.addCustomPlugins(),this.chart=new Chart(this.ctx,a)}var e,a;return e=t,(a=[{key:"addCustomPlugins",value:function(){Chart.register({id:"customXAxisBackground",beforeDraw:function(t,e,a){var r=t.ctx,i=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,i.width,30),r.fillStyle="black",r.textAlign="center",r.fillText(a.label1,t.chartArea.left+30,t.chartArea.bottom+15),r.fillText(a.label2,i.width/2,t.chartArea.bottom+15),r.fillText(a.label3,t.chartArea.right-30,t.chartArea.bottom+15),r.restore()}})}},{key:"convertTimeToIndex",value:function(t){var e,a,r=t.split(":"),o=0,n=!1,s=0;switch(t.length>5&&(n=!0),e=Number(r[0]),a=Number(r[1]),1==n&&(o=Number(r[2])),this.maxIntervalCount){case i.ONE_SECOND:s=3600*e,s+=60*a,!0===n&&(s+=o);break;case i.ONE_MINUTE:s=60*e,s+=a;break;case i.FIVE_MINUTES:s=12*e,s+=a/5;break;case i.TEN_MINUTES:s=6*e,s+=a/10;break;case i.FIFTEEN_MINUTES:s=4*e,s+=a/15;break;case i.TWENTY_MINUTES:s=3*e,s+=a/20;break;case i.THIRTY_MINUTES:s=2*e,s+=a/30;break;case i.ONE_HOUR:s=e;break;default:s=0}return s}},{key:"setChartData",value:function(t){console.log("StepCountBarChart setChartData");var e=new Array(this.maxIntervalCount).fill(0),a=this.displayIntervalCount;if(this.displayIntervalCount>this.maxIntervalCount&&(a=this.maxIntervalCount),null!=t&&Array.isArray(t)&&t.length>0){this.setMaxIntervalCount(this.maxIntervalCount);var r,i=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(t){if("string"==typeof t)return c(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;e[this.convertTimeToIndex(o.startTime)]+=o.stepCount}}catch(t){i.e(t)}finally{i.f()}for(var n=new Array(a).fill(0),s=this.maxIntervalCount/a,l=0,h=0,u=0;u<a;u++)for(l=0;l<s;l++)n[u]+=e[h],h++;this.intervalUsed=this.displayIntervalCount,this.defdata.labels=new Array(a).fill(""),this.defdata.datasets[0].data=n,this.chart.update()}}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=[],this.chart.update()}},{key:"setMaxStepsPerInterval",value:function(t){this.chart.options.scales.y.max=t,this.chart.update()}},{key:"setMaxIntervalCount",value:function(t){this.maxIntervalCount=t}},{key:"setDisplayIntervalCount",value:function(t){this.displayIntervalCount=t}},{key:"getXAxisLabelsWithFormatting",value:function(t,e){switch(this.timeFormat){case r.USE_12HR_FORMAT:return t;case r.USE_24HR_FORMAT:return e;default:return t}}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customXAxisBackground.label1=this.getXAxisLabelsWithFormatting("12:00 AM","00:00"),this.chart.options.plugins.customXAxisBackground.label2=this.getXAxisLabelsWithFormatting("12:00 PM","12:00"),this.chart.options.plugins.customXAxisBackground.label3=this.getXAxisLabelsWithFormatting("11:59 PM","23:59"),this.chart.update()}},{key:"setBarColor",value:function(t){this.barColor=t,this.defdata.datasets[0].backgroundColor=t,this.defdata.datasets[0].borderColor=t,this.defdata.datasets[0].hoverBackgroundColor=t,this.chart.update()}}])&&u(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),y={AWAKE:0,LIGHT_SLEEP:1,DEEP_SLEEP:2,REM_SLEEP:3};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function p(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}const g=function(){function t(e,a,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quality=e,this.startTime=a,this.endTime=r}var e,a;return e=t,(a=[{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"endTime",get:function(){return this._endTime},set:function(t){this._endTime=t}},{key:"totalTime",get:function(){var t=new Date(this._startTime.replace(" ","T")+":00");return(new Date(this._endTime.replace(" ","T")+":00")-t)/6e4}}])&&p(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function x(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=b(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:String(e)}const D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quality=e.quality,this.startTime=e.startTime,this.endTime=e.endTime,this.startIndex=0,this.endIndex=0}var e,a;return e=t,(a=[{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}},{key:"endTime",get:function(){return this._endTime},set:function(t){this._endTime=t}},{key:"startIndex",get:function(){return this._startIndex},set:function(t){this._startIndex=t}},{key:"endIndex",get:function(){return this._endIndex},set:function(t){this._endIndex=t}},{key:"setIndices",value:function(t,e){this.startIndex=t,this.endIndex=e}}])&&x(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();var T="#FFFFFF",A="#C3BEE3",S="#8551D3",E="#3F098A";const I={ENGLISH:"en",SPANISH:"es",SYSTEM_LANGUAGE:"sys"};function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function k(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=M(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function M(t,e){if(t){if("string"==typeof t)return w(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function H(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function P(t,e,a){return(e=R(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function R(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:String(e)}const N=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,"customClickTrackerHandler",(function(t,e,r){if(!0===r.enabled&&"click"===e.event.type){var i=a.chart.options.plugins.customToolTip;i.enabled=!i.enabled,a.chart.update()}})),P(this,"customCursorTrackerHandler",(function(t,e,r){if(!0===r.enabled){t.ctx,t.canvas;for(var i=t.scales.x,o=(t.scales.y,t.chartArea),n=(o.top,o.right,o.bottom,o.left,i.getValueForPixel(e.event.x)),s=0;s<a.blockList.length&&!(n>=a.blockList[s].startIndex&&n<=a.blockList[s].endIndex);s++);s>=0&&s<a.blockList.length&&(a.blockIndex=s,a.toolTipXCoor=e.event.x)}})),P(this,"customToolTipHandler",(function(t,e,r){if(!0===r.enabled){var i=t.ctx,o=(t.canvas,t.scales.x),n=(t.scales.y,t.chartArea),s=(n.top,n.right,n.bottom),l=(n.left,o.getPixelForValue(t.config._config.options.plugins.customToolTip.xCoor),120),h=a.blockList[a.blockIndex],c=h.startTime.split(" ")[1],u=h.endTime.split(" ")[1],d=a.getXAxisLabelsWithFormatting(c)+" - "+a.getXAxisLabelsWithFormatting(u);i.save(),i.fillStyle=r.backgroundColor,i.fillRect(a.toolTipXCoor-60,s-10,l,25),i.strokeStyle=a.sleepColors[h.quality],i.lineWidth=3,i.strokeRect(a.toolTipXCoor-60,s-10,l,25),i.beginPath(),i.moveTo(a.toolTipXCoor-7,s-11),i.lineTo(a.toolTipXCoor+7,s-11),i.lineTo(a.toolTipXCoor,s-17),i.closePath(),i.stroke(),i.fill(),i.font="24px",i.fillStyle="black",i.textAlign="center",i.fillText(d,a.toolTipXCoor,s+5),i.restore()}})),this.ctx=e,this.barColor="#FFFFFFFF",this.timeFormat=r.USE_12HR_FORMAT,this.maxIntervalCount=i.ONE_MINUTE,this.sleepStartTime="22:00",this.sleepEndTime="06:00",this.language=I.ENGLISH,this.sleepColors=[T,A,S,E],this.blockIndex=0,this.toolTipXCoor=0,this.blockList=[],this.defdata={labels:[""],datasets:[{type:"bar",data:[0],backgroundColor:this.barColor,borderColor:this.barColor,borderWidth:0,barPercentage:1,categoryPercentage:1},{type:"line",spanGaps:!0,data:[],tension:.6,pointRadius:0}]};var o={data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,a){return a.length,""}}},y:{display:!1,beginAtZero:!0,max:255}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customXAxisLabels:{enabled:!0,label1:this.getXAxisLabelsWithFormatting(this.sleepStartTime),label2:this.getXAxisLabelsWithFormatting(this.sleepEndTime)},customNoDataBackground:{enabled:!0,backgroundColor:"rgba(200, 200, 200, 0.5)",label:this.getLocalizedNoDataString(this.language),emptyChart:!0},customHRMinMaxMarker:{enabled:!1,minHRValue:0,minHRIndex:0,maxHRValue:0,maxHRIndex:0},customClickTracker:{enabled:!1},customCursorTracker:{enabled:!1},customToolTip:{enabled:!1,backgroundColor:"white"}}}};if("function"!=typeof Chart){var n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/chart.js",document.head.appendChild(n)}this.addCustomPlugins(),this.chart=new Chart(this.ctx,o)}var e,a;return e=t,a=[{key:"addCustomPlugins",value:function(){Chart.register({id:"customXAxisLabels",beforeDraw:this.customXAxisLabelsHandler}),Chart.register({id:"customNoDataBackground",beforeDraw:this.customNoDataBackgroundHandler}),Chart.register({id:"customHRMinMaxMarker",afterDatasetsDraw:this.customHRMinMaxMarkerHandler}),Chart.register({id:"customClickTracker",afterEvent:this.customClickTrackerHandler}),Chart.register({id:"customCursorTracker",afterEvent:this.customCursorTrackerHandler}),Chart.register({id:"customToolTip",afterDatasetsDraw:this.customToolTipHandler})}},{key:"customXAxisLabelsHandler",value:function(t,e,a){var r=t.ctx,i=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,i.width,30),r.fillStyle="black",r.textAlign="center",r.fillText(a.label1,t.chartArea.left+30,t.chartArea.bottom+15),r.fillText(a.label2,t.chartArea.right-30,t.chartArea.bottom+15),r.restore()}},{key:"customNoDataBackgroundHandler",value:function(t,e,a){if(!0===a.emptyChart){var r=t.ctx,i=(t.canvas,t.scales.x),o=t.chartArea;o.top,o.right,o.bottom,o.left,r.save(),r.fillStyle=a.backgroundColor,r.fillRect(0,0,i.width,t.chartArea.bottom),r.fillStyle="black",r.font="20px Arial",r.textAlign="center",r.textBaseline="middle",r.fillText(a.label,i.width/2,t.chartArea.bottom/2),r.restore()}}},{key:"customHRMinMaxMarkerHandler",value:function(t,e,a){if(!0===a.enabled){var r=t.ctx,i=(t.canvas,t.scales.x),o=t.scales.y,n=t.chartArea,s=(n.top,n.right,n.bottom,n.left,i.getPixelForValue(a.minHRIndex)),l=o.getPixelForValue(a.minHRValue),h=i.getPixelForValue(a.maxHRIndex),c=o.getPixelForValue(a.maxHRValue);r.save(),r.beginPath(),r.arc(s,l,4,0,2*Math.PI),r.arc(h,c,4,0,2*Math.PI),r.fillStyle="white",r.lineWidth=2,r.fill(),r.closePath(),r.font="24px",r.textAlign="center",r.textBaseline="middle",r.fillText(String(a.minHRValue),s,l+15),r.fillText(String(a.maxHRValue),h,c-15),r.restore()}}},{key:"convertTimeToIndex",value:function(t){var e,a,r=(e=t.split(":"),a=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,o,n,s=[],l=!0,h=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(n=a.return(),Object(n)!==n))return}finally{if(h)throw i}}return s}}(e,a)||M(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];return r[2],60*Number(i)+Number(o)}},{key:"updateChart",value:function(t,e,a){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=0,n=[],s=[],l=k(a);try{for(l.s();!(r=l.n()).done;){var h=r.value;o<this.maxIntervalCount&&(n.push(255),h===y.AWAKE?s.push(T):h===y.LIGHT_SLEEP?s.push(A):h===y.DEEP_SLEEP?s.push(S):h===y.REM_SLEEP&&s.push(E),o++)}}catch(t){l.e(t)}finally{l.f()}var c=new Array(1440).fill(0);if(null!==i){var u,d=k(i);try{for(d.s();!(u=d.n()).done;){var f=u.value;c[this.convertTimeToIndex(f.timeStamp)]=f.heartRate}}catch(t){d.e(t)}finally{d.f()}}for(var m=this.convertTimeToIndex(t.split(" ")[1]),p=0,v=0,g=0,b=255,x=[],C=0;C<n.length;C++){var D=c[m];D>0?x.push(D):x.push(null),D>0&&(D>v&&(v=D,p=C),D<b&&(b=D,g=C)),++m>=1440&&(m=0)}this.defdata.labels=new Array(n.length).fill(""),this.defdata.datasets[0].data=n,this.defdata.datasets[0].backgroundColor=s,this.defdata.datasets[0].borderColor=s,this.defdata.datasets[0].hoverBackgroundColor=s,this.defdata.datasets[0].order=2,this.defdata.datasets[1].data=x,this.defdata.datasets[1].backgroundColor="white",this.defdata.datasets[1].borderColor="white",this.defdata.datasets[1].order=1,this.sleepStartTime=t.split(" ")[1],this.sleepEndTime=e.split(" ")[1];var I=this.chart.options.plugins;if(I.customXAxisLabels.label1=this.getXAxisLabelsWithFormatting(this.sleepStartTime),I.customXAxisLabels.label2=this.getXAxisLabelsWithFormatting(this.sleepEndTime),b<255&&v>0){I.customHRMinMaxMarker.enabled=!0,I.customHRMinMaxMarker.minHRIndex=g,I.customHRMinMaxMarker.minHRValue=b,I.customHRMinMaxMarker.maxHRIndex=p,I.customHRMinMaxMarker.maxHRValue=v;var L=this.chart.config.options.scales.y;L.min=b,L.max=v,b-5>=0&&(L.min=b-5),v+5<=255&&(L.max=v+5)}I.customNoDataBackground.emptyChart=!1,I.customClickTracker.enabled=!0,I.customCursorTracker.enabled=!0,this.chart.update()}},{key:"setChartData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=t&&Array.isArray(t)&&t.length>0){var a=[];t.sort((function(t,e){var a=t.startTime,r=e.startTime;return a<r?-1:a>r?1:0}));for(var r=0;r<t.length;r++)if(r<t.length-1){var i=t[r].endTime,o=t[r+1].startTime;i!==o&&t.splice(r+1,0,new g(y.AWAKE,i,o))}var n=0,s=0;this.blockList=[];var l,h=k(t);try{for(h.s();!(l=h.n()).done;){var c=l.value,u=new D(c);n=s;for(var d=0;d<c.totalTime;d++)a.push(c.quality),s++;u.setIndices(n,s-1),this.blockList.push(u)}}catch(t){h.e(t)}finally{h.f()}null!==e?this.updateChart(t[0].startTime,t[t.length-1].endTime,a,e):this.updateChart(t[0].startTime,t[t.length-1].endTime,a)}}},{key:"resetChart",value:function(){var t=this.chart.options.plugins;this.defdata.datasets[0].data=[],this.defdata.datasets[1].data=[],this.sleepStartTime="22:00",this.sleepEndTime="06:00",t.customXAxisLabels.label1=this.getXAxisLabelsWithFormatting(this.sleepStartTime),t.customXAxisLabels.label2=this.getXAxisLabelsWithFormatting(this.sleepEndTime),t.customHRMinMaxMarker.enabled=!1,t.customClickTracker.enabled=!1,t.customCursorTracker.enabled=!1,t.customToolTip.enabled=!1,t.customNoDataBackground.emptyChart=!0,this.chart.update()}},{key:"getXAxisLabelsWithFormatting",value:function(t){if(this.timeFormat===r.USE_12HR_FORMAT){var e=t.split(":"),a=parseInt(e[0],10),i=parseInt(e[1],10),o=a>=12?"PM":"AM";return((a=a%12==0?12:a%12)<10?"0":"")+a+":"+(i<10?"0":"")+i+" "+o}return t}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customXAxisLabels.label1=this.getXAxisLabelsWithFormatting(this.sleepStartTime),this.chart.options.plugins.customXAxisLabels.label2=this.getXAxisLabelsWithFormatting(this.sleepEndTime),this.chart.update()}},{key:"getLocalizedNoDataString",value:function(t){return"es"===t?"Sin Datos":"No Data"}},{key:"setLanguage",value:function(t){this.language=t,this.chart.options.plugins.customNoDataBackground.label=this.getLocalizedNoDataString(t),this.chart.update()}}],a&&H(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();var O={BELOW_AVERAGE:0,FAIR:1,GOOD:2,VERY_GOOD:3,EXCELLENT:4};function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function B(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F(r.key),r)}}function F(t){var e=function(t,e){if("object"!=_(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:String(e)}const W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.ageValue=0,this.thresholdValue=[66,62,58,54];var a=["#EB5B59","#F7BD4C","#01B9FE","#9071FE","#26CBA8"];this.defdata={labels:["","","","",""],datasets:[{data:[12,12,12,12,12],backgroundColor:a,borderColor:a,hoverBackgroundColor:a,borderWidth:0,barPercentage:1,categoryPercentage:1}]};var r={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{display:!1,maxTicksLimit:24}},y:{display:!1,beginAtZero:!0,max:35}},plugins:{tooltip:{enabled:!1},legend:{display:!1},selectedBarImage:{enabled:!1,barIndex:2,heartHeightRatio:1,heartWidthRatio:.6,heartColor:"white"}}}};if("function"!=typeof Chart){var i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/chart.js",document.head.appendChild(i)}this.addCustomChartPlugins(),this.chart=new Chart(this.ctx,r)}var e,a;return e=t,(a=[{key:"addCustomChartPlugins",value:function(){Chart.register({id:"selectedBarImage",afterDraw:function(t,e,a){var r=t.ctx,i=t.chartArea,o=t.options.plugins.selectedBarImage;if(o&&!0===o.enabled){var n=o.barIndex||0;if(n>=0&&n<t.data.labels.length){var s=t.getDatasetMeta(0).data[n].x,l=t.getDatasetMeta(0).data[n].width,h=i.height/1.3,c=l*o.heartWidthRatio,u=h*o.heartHeightRatio,d=o.heartColor||"red",f=s,y=i.top+h;r.fillStyle=d,r.beginPath(),r.moveTo(f,y-u/2),r.bezierCurveTo(f-c/3,y-u,f-c,y-u/3,f,y),r.bezierCurveTo(f+c,y-u/3,f+c/3,y-u,f,y-u/2),r.closePath(),r.fill()}}}})}},{key:"setAgeLevelThresholds",value:function(t,e,a,r){this.thresholdValue[0]=t,this.thresholdValue[1]=e,this.thresholdValue[2]=a,this.thresholdValue[3]=r,this.setChartData(this.ageValue)}},{key:"setChartData",value:function(t){var e,a=12,r=12,i=12,o=12,n=12;this.ageValue=t,0==t?e=O.NONE:t>this.thresholdValue[0]?(a=35,e=O.BELOW_AVERAGE):t>this.thresholdValue[1]?(r=35,e=O.FAIR):t>this.thresholdValue[2]?(i=35,e=O.GOOD):t>this.thresholdValue[3]?(o=35,e=O.VERY_GOOD):(n=35,e=O.EXCELLENT),this.chart.options.plugins.selectedBarImage.enabled=!0,this.chart.options.plugins.selectedBarImage.barIndex=e,this.defdata.datasets[0].data=[a,r,i,o,n],this.chart.update()}},{key:"resetChart",value:function(){this.chart.options.plugins.selectedBarImage.enabled=!1,this.defdata.datasets[0].data=[12,12,12,12,12],this.chart.update()}}])&&B(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function X(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:String(e)}const Y=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.paiScore=e,this.paiEarned=a}var e,a;return e=t,(a=[{key:"paiScore",get:function(){return this._paiScore},set:function(t){this._paiScore=t}},{key:"paiEarned",get:function(){return this._paiEarned},set:function(t){this._paiEarned=t}},{key:"paiCarriedOver",get:function(){return this._paiScore-this._paiEarned}}])&&X(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),V=0,G=1;var J="#8551D3",z="#C0B2FB",K="#D3D3D3",$="#E9E7F3";function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function Q(t,e){if(t){if("string"==typeof t)return Z(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Z(t,e):void 0}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function tt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function et(t,e,a){return(e=at(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function at(t){var e=function(t,e){if("object"!=q(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q(e)?e:String(e)}const rt=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),et(this,"processBarClick",(function(t,e){var r=e[0];if(r){a.chart.data;var i=a.chart.options.plugins,o=i.customToolTip;(!1===o.enabled||!0===o.enabled&&o.barIndex===r.index)&&(i.customChartFadeEffect.enabled=!i.customChartFadeEffect.enabled,o.enabled=!o.enabled),i.customChartFadeEffect.barIndex=r.index,o.barIndex=r.index,a.chart.update()}})),et(this,"getTopXAxisLabel",(function(t,e,r){return a.topXAxisLabels[t]})),et(this,"getBottomXAxisLabel",(function(t,e,r){return a.bottomXAxisLabels[t]})),et(this,"customChartFadeEffectHandler",(function(t,e,r){if(r.enabled){var i=t.ctx,o=t.scales.x1;if(i.save(),a.filter===G){var n=o.getPixelForValue(r.barIndex),s=t.chartArea.width/7;i.fillStyle="rgba(211, 211, 211, 0.3)",i.fillRect(n-s/4,0,s/2,t.chartArea.bottom)}else i.fillStyle="rgba(255, 255, 255, 0.6)",i.fillRect(0,0,t.width,t.height);i.restore()}})),et(this,"customToolTipHandler",(function(t,e,r){r.enabled&&(a.filter===G?a.displayPAIHistoryToolTip(t,r):a.displayPAIScoreToolTip(t,r))})),this.ctx=e,this.barColor="#3EB1C8",this.goalValue=100,this.maxLevel=100,this.language=I.ENGLISH,this.filter=V,this.topXAxisLabels=["0","0","0","0","0","0","0"],this.bottomXAxisLabels=["S","M","T","W","T","F","TODAY"],this.dateList=[];var r=new Date;r.getFullYear(),r.getMonth(),r.getDate(),this.customDate=new Date,this.updateBottomXAxisLabels(r),this.defdata={labels:this.bottomXAxisLabels,datasets:[{backgroundColor:z,hoverBackgroundColor:z,data:[0,0,0,0,0,0,0],barThickness:20},{backgroundColor:J,hoverBackgroundColor:J,data:[0,0,0,0,0,0,0],barThickness:20},{backgroundColor:[$,$,$,$,$,$,K],hoverBackgroundColor:[$,$,$,$,$,$,K],data:[100,100,100,100,100,100,100],barThickness:20}]};var i={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{stacked:!0,grid:{display:!1},position:"bottom",ticks:{stepSize:10,padding:0,callback:this.getBottomXAxisLabel}},x1:{display:!1,grid:{display:!1},position:"top",ticks:{callback:this.getTopXAxisLabel}},y:et(et(et({stacked:!0,max:100,display:!0,beginAtZero:!0},"max",this.maxLevel),"grid",{drawBorder:!1,lineWidth:1,color:"#D9D2F8",tick:{stepSize:50}}),"ticks",{autoSkip:!0,maxTicksLimit:4})},plugins:{tooltip:{enabled:!1},legend:{display:!1},customGoalLevelLimitLine:{enabled:!0,goalValue:this.goalValue,lineColor:"#26CBA8",lineWidth:2},customTotalText:{enabled:!1},customChartFadeEffect:{enabled:!1,barIndex:0},customToolTip:{enabled:!1,barIndex:0,backgroundColor:"white"}},onClick:this.processBarClick}};this.addCustomPlugins(),this.chart=new Chart(this.ctx,i),console.log(this.chart.data.datasets[0].backgroundColor)}var e,a;return e=t,(a=[{key:"getLocalizedTodayString",value:function(t){return"es"===t?"HOY":"TODAY"}},{key:"getLocalizedPAIScoreString",value:function(t){return"es"===t?"Puntaje PAI":"PAI Score"}},{key:"getLocalizedPAIEarnedString",value:function(t){return"es"===t?"PAI obtenido":"PAI Earned"}},{key:"getLocalizedPAICarriedOverString",value:function(t){return"es"===t?"PAI acumulado":"PAI Carried Over"}},{key:"getLocalized1LetterDOWString",value:function(t,e){return"es"===t?["d","l","m","m","j","v","s"][e]:["S","M","T","W","T","F","S"][e]}},{key:"updateBottomXAxisLabels",value:function(t){var e=t.getDay();this.bottomXAxisLabels[this.bottomXAxisLabels.length-1]=this.getLocalizedTodayString(this.language),this.dateList.push(t);for(var a=this.bottomXAxisLabels.length-2;a>=0;a--)t.setDate(t.getDate()-1),e=t.getDay(),this.bottomXAxisLabels[a]=this.getLocalized1LetterDOWString(this.language,e),this.dateList.push(t.toString());this.dateList.reverse()}},{key:"addCustomPlugins",value:function(){Chart.register({id:"customGoalLevelLimitLine",afterDatasetsDraw:this.customGoalLevelLimitLineHandler}),Chart.register({id:"customTotalText",afterDatasetsDraw:this.customTotalTextHandler}),Chart.register({id:"customChartFadeEffect",afterDatasetsDraw:this.customChartFadeEffectHandler}),Chart.register({id:"customToolTip",afterDatasetsDraw:this.customToolTipHandler})}},{key:"customGoalLevelLimitLineHandler",value:function(t,e,a){var r=t.ctx,i=t.scales.y,o=t.chartArea.left,n=i.getPixelForValue(t.options.plugins.customGoalLevelLimitLine.goalValue);r.save(),r.beginPath(),r.moveTo(o,n),r.strokeStyle=t.options.plugins.customGoalLevelLimitLine.lineColor,r.lineWidth=t.options.plugins.customGoalLevelLimitLine.lineWidth,r.lineTo(t.chartArea.right,n),r.stroke(),r.restore()}},{key:"customTotalTextHandler",value:function(t,e,a){if(a.enabled){var r=t.ctx;r.save();var i=t.chartArea,o=(t.scales.x1,t.scales.x._labelItems[0].font.lineHeight),n=i.top-o;r.fillStyle="black",r.textAlign="left",r.fillText("Total",0,n),r.restore()}}},{key:"displayPAIScoreToolTip",value:function(t,e){var a=t.ctx,r=t.scales.x,i=t.scales.y,o=t.chartArea,n=o.top,s=(o.right,o.bottom,o.left,r.getPixelForValue(e.barIndex)),l=(i.getPixelForValue(n),140),h=this.defdata.datasets[0].data[e.barIndex],c=this.defdata.datasets[1].data[e.barIndex],u=new Date(this.dateList[e.barIndex]),d=u.getFullYear(),f=u.toLocaleDateString("".concat(this.language,"-US"),{month:"short"}),y=u.getDate(),m=u.toLocaleDateString("".concat(this.language,"-US"),{weekday:"short"});a.save(),a.fillStyle=e.backgroundColor,a.fillRect(s-70,n+10,l,50),a.strokeStyle="black",a.lineWidth=1,a.strokeRect(s-70,n+10,l,50),a.lineWidth=2,a.beginPath(),a.fillStyle=z,a.arc(s-70+10,n+35,4,0,2*Math.PI),a.fill(),a.closePath(),a.beginPath(),a.fillStyle=J,a.arc(s-70+10,n+50,4,0,2*Math.PI),a.fill(),a.closePath(),a.font="24px",a.fillStyle="black",a.textAlign="left",a.fillText("".concat(m,", ").concat(f," ").concat(y,", ").concat(d),s-70+7,n+25),a.fillText("".concat(this.getLocalizedPAICarriedOverString(this.language)," ").concat(h),s-70+20,n+40),a.fillText("".concat(this.getLocalizedPAIEarnedString(this.language)," ").concat(c),s-70+20,n+55),a.restore()}},{key:"displayPAIHistoryToolTip",value:function(t,e){var a=t.ctx,r=t.scales.x,i=(t.scales.y,t.chartArea),o=i.top,n=(i.right,i.bottom,i.left,this.defdata.datasets[0].data[e.barIndex]),s=this.defdata.datasets[1].data[e.barIndex],l=s+n,h=new Date(this.dateList[e.barIndex]),c=h.getFullYear(),u=h.toLocaleDateString("".concat(this.language,"-US"),{month:"short"}),d=h.getDate(),f=h.toLocaleDateString("".concat(this.language,"-US"),{weekday:"short"}),y=0,m=10,p=75;a.save();var v=0,g=o+5,b=0;if(a.beginPath(),0===e.barIndex)v=r.getPixelForValue(e.barIndex)-80,y=155,a.moveTo(v+y-m,g+p),a.lineTo(v+y/2+7.5,g+p),a.lineTo(v+y/2,g+p+15),a.lineTo(v+y/2-7.5,g+p),a.lineTo(v+m,g+p),a.arcTo(v,g+p,v,g,m),a.arcTo(v,g,v+y,g,m),a.arcTo(v+y,g,v+y,g+p,m),a.arcTo(v+y,g+p,v+y-m,g+p,m),b=v+80;else{var x=(v=r.getPixelForValue(e.barIndex)-113)+(y=85)/1.2;a.moveTo(x+m,g+p),a.lineTo(x+y/2-7.5,g+p),a.lineTo(x+y/2,g+p+15),a.lineTo(x+y/2+7.5,g+p),a.lineTo(x+y-m,g+p),a.arcTo(x+y,g+p,x+y,g,m),a.arcTo(x+y,g,v,g,m),a.arcTo(v,g,v,g+p,m),a.arcTo(v,g+p,x+m,g+p,m),b=v+45}a.closePath(),a.fillStyle="white",a.fill(),a.strokeStyle="#DED7F9",a.stroke(),m=4,a.beginPath(),a.fillStyle=J,a.arc(b-y/2+10,o+48,m,0,2*Math.PI),a.fill(),a.closePath(),a.beginPath(),a.fillStyle=z,a.arc(b-y/2+10,o+63,m,0,2*Math.PI),a.fill(),a.closePath(),a.font="24pt",a.fillStyle="black",a.textAlign="left",a.fillText("".concat(f,", ").concat(u," ").concat(d,", ").concat(c),b-y/2+7,o+23),a.fillText("".concat(this.getLocalizedPAIScoreString(this.language),": "),b-y/2+7,o+38),a.fillText("".concat(this.getLocalizedPAIEarnedString(this.language),": ").concat(s," PAI"),b-y/2+20,o+53),a.fillText("".concat(this.getLocalizedPAICarriedOverString(this.language),": ").concat(n," PAI"),b-y/2+20,o+68),a.font="bold 11pt Arial",a.fillStyle="#26CBA8",a.fillText("".concat(l," PAI"),b-y/2+75,o+39),a.restore()}},{key:"updateChart",value:function(t,e){for(var a=[],r=0;r<t.length;r++)this.goalValue<=t[r]+e[r]?a.push(0):a.push(this.goalValue-(t[r]+e[r]));this.defdata.datasets[0].data=e,this.defdata.datasets[1].data=t,this.defdata.datasets[2].data=a,this.chart.data.datasets[2].backgroundColor[6]=$,this.chart.data.datasets[2].hoverBackgroundColor[6]=$,this.chart.options.scales.x1.display=!0,this.chart.options.plugins.customTotalText.enabled=!0,this.chart.update()}},{key:"setMaxLevel",value:function(t){for(this.maxLevel=100,this.chart.options.scales.y.max=100,this.chart.options.scales.y.ticks.maxTicksLimit=4;this.maxLevel<t;)this.maxLevel+=50;this.chart.options.scales.y.max=this.maxLevel,this.chart.options.scales.y.ticks.maxTicksLimit=this.maxLevel/50+1}},{key:"setChartData",value:function(t){if(null!=t&&Array.isArray(t)&&t.length>0){var e=0,a=0,r=[],i=[];this.dateList=[],this.setLanguage(this.language);var o,n=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Q(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(o=n.n()).done;){var s=o.value;s.paiScore>a&&(a=s.paiScore),r.push(s.paiEarned),i.push(s.paiCarriedOver),this.topXAxisLabels[e]=s.paiScore.toString(),e++}}catch(t){n.e(t)}finally{n.f()}this.setMaxLevel(a),this.updateChart(r,i)}}},{key:"setGoalLevel",value:function(t){this.goalValue=t,this.chart.options.plugins.customGoalLevelLimitLine.goalValue=t,this.updateChart(this.defdata.datasets[1].data,this.defdata.datasets[0].data),this.chart.update()}},{key:"setChartFilter",value:function(t){this.filter=t}},{key:"resetChart",value:function(){var t=[];this.dateList=[],this.setGoalLevel(100);for(var e=0;e<7;e++)t.push(100);this.defdata.datasets[0].data=[0,0,0,0,0,0,0],this.defdata.datasets[1].data=[0,0,0,0,0,0,0],this.defdata.datasets[2].data=t,this.chart.data.datasets[2].backgroundColor[6]=K,this.chart.data.datasets[2].hoverBackgroundColor[6]=K,this.chart.options.scales.y.max=100,this.chart.options.scales.y.ticks.maxTicksLimit=4,this.chart.options.scales.x1.display=!1,this.chart.options.plugins.customTotalText.enabled=!1,this.chart.options.plugins.customChartFadeEffect.enabled=!1,this.setLanguage(this.language),this.chart.update()}},{key:"setCustomDate",value:function(t){var e,a,r=(e=t.split("-"),a=3,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,o,n,s=[],l=!0,h=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(n=a.return(),Object(n)!==n))return}finally{if(h)throw i}}return s}}(e,a)||Q(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],n=r[2],s=new Date(Number(i),Number(o)-1,Number(n));this.updateBottomXAxisLabels(s),s.setFullYear(Number(i)),s.setMonth(Number(o)-1),s.setDate(Number(n)),this.customDate=s,this.chart.update()}},{key:"setLanguage",value:function(t){this.language=t;var e=this.customDate.getFullYear(),a=this.customDate.getMonth()+1,r=this.customDate.getDate();this.setCustomDate(e+"-"+(a<10?"0":"")+a+"-"+(r<10?"0":"")+r),this.chart.update()}}])&&tt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),it={DAILY:0,WEEKLY:1,MONTHLY:2};function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function nt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,o,n,s=[],l=!0,h=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(n=a.return(),Object(n)!==n))return}finally{if(h)throw i}}return s}}(t,e)||lt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=lt(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function lt(t,e){if(t){if("string"==typeof t)return ht(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ht(t,e):void 0}}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ct(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dt(r.key),r)}}function ut(t,e,a){return(e=dt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function dt(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:String(e)}const ft=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,"processBarClick",(function(t,e){var r=e[0];if(r){var i=r.index,o=a.chart.data,n=a.chart.options;o.datasets[0].backgroundColor[a.selectedBarIndex]=a.barColor,o.datasets[0].hoverBackgroundColor[a.selectedBarIndex]=a.barColor,!1===a.barSelected||a.selectedBarIndex!==i?(o.datasets[0].backgroundColor[i]=a.barSelectedColor,o.datasets[0].hoverBackgroundColor[i]=a.barSelectedColor,a.barSelected=!0,n.plugins.customIndicatorBar.enabled=!0,n.plugins.customIndicatorBar.barIndex=i,n.plugins.customIndicatorBar.barValue=o.datasets[0].data[i],a.triggerBarTapListener(i)):(a.barSelected=!1,n.plugins.customIndicatorBar.enabled=!1),a.chart.update(),a.selectedBarIndex=i}})),ut(this,"handleMouseDownEvent",(function(t){a.isDragging=!0,a.startX=t.offsetX})),ut(this,"handleMouseUpEvent",(function(t){a.isDragging=!1})),ut(this,"handleMouseOutEvent",(function(t){a.isDragging=!1})),ut(this,"handleMouseMoveEvent",(function(t){if(!0===a.isDragging){var e=t.offsetX-a.startX,r=a.chart.config.options.scales.x;e>0?e>100&&(a.startX=t.offsetX,r.min>0?(r.min-=1,r.max-=1):(r.min=0,r.max=6)):e<0&&e<-100&&(a.startX=t.offsetX,r.max<a.totalBars-1?(r.min+=1,r.max+=1):(r.min=a.totalBars-7,r.max=a.totalBars-1)),a.chart.update()}})),this.ctx=e,this.barColor="#3EB1C8",this.barSelectedColor="#909090",this.language=I.ENGLISH,this.filter=it.DAILY,this.isDragging=!1,this.startX=0,this.selectedBarIndex=0,this.barSelected=!0,this.barsInfo=[],this.totalBars=0,this.barTapListener=null,this.defdata={labels:[this.getDefaultLocalizedString()],datasets:[{data:[0],backgroundColor:this.barColor,borderColor:this.barColor,hoverBackgroundColor:this.barColor,borderWidth:0,barThickness:40}]};var r={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{min:0,max:4,grid:{display:!1},position:"bottom"},y:{display:!1,beginAtZero:!0,max:150}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customXAxisBackground:{enabled:!0},customIndicatorBar:{enabled:!0,barIndex:0,barValue:0}},onClick:this.processBarClick}};this.initBarsInfoArray(),this.addCustomPlugins(),this.chart=new Chart(this.ctx,r)}var e,a;return e=t,(a=[{key:"initBarsInfoArray",value:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=e+"-"+(a<10?"0":"")+a+"-"+(r<10?"0":"")+r;this.barsInfo.push(i)}},{key:"addCustomPlugins",value:function(){Chart.register({id:"customXAxisBackground",beforeDraw:function(t,e,a){var r=t.ctx,i=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,i.width,30),r.restore()}}),Chart.register({id:"customIndicatorBar",afterDatasetsDraw:function(t,e,a){if(a.enabled){var r=t.ctx,i=t.scales.y.getPixelForValue(a.barValue);r.save(),r.fillStyle="red",r.fillRect(t._metasets[0].data[a.barIndex].x-20,i-10,40,5),r.restore()}}})}},{key:"resetIndicatorBar",value:function(){this.chart.options.plugins.customIndicatorBar.enabled=!0,this.chart.options.plugins.customIndicatorBar.barIndex=0,this.chart.options.plugins.customIndicatorBar.barValue=0}},{key:"disableChartScrolling",value:function(){var t=this.chart.canvas;this.chart.config.options.scales.x.min=0,this.chart.config.options.scales.x.max=6,this.isDragging=!1,t.removeEventListener("mousedown",this.handleMouseDownEvent),t.removeEventListener("mousemove",this.handleMouseMoveEvent),t.removeEventListener("mouseup",this.handleMouseUpEvent),t.removeEventListener("mouseout",this.handleMouseOutEvent),t.removeEventListener("touchstart",this.handleMouseDownEvent),t.removeEventListener("touchmove",this.handleMouseMoveEvent),t.removeEventListener("touchend",this.handleMouseUpEvent)}},{key:"enbleChartScrolling",value:function(){var t=this.chart.canvas;this.chart.config.options.scales.x.min=this.totalBars-7,this.chart.config.options.scales.x.max=this.totalBars-1,t.addEventListener("mousedown",this.handleMouseDownEvent),t.addEventListener("mousemove",this.handleMouseMoveEvent),t.addEventListener("mouseup",this.handleMouseUpEvent),t.addEventListener("mouseout",this.handleMouseOutEvent),t.addEventListener("touchstart",this.handleMouseDownEvent),t.addEventListener("touchmove",this.handleMouseMoveEvent),t.addEventListener("touchend",this.handleMouseUpEvent)}},{key:"getMondayOfWeek",value:function(t){var e=t.getDay(),a=0===e?6:e-1;return new Date(t.setDate(t.getDate()-a))}},{key:"getDateDifference",value:function(t,e){var a=(e-t)/864e5;return Math.floor(a)}},{key:"getDateDifferenceFromToday",value:function(t){var e=(new Date-t)/864e5;return Math.floor(e)}},{key:"getWeekDifference",value:function(t,e){for(var a=this.getMondayOfWeek(e),r=0;a.getTime()<=t.getTime();)r++,a.setDate(a.getDate()+7);return r}},{key:"getWeekDifferenceFromToday",value:function(t){for(var e=this.getMondayOfWeek(t),a=new Date,r=0;e.getTime()<a.getTime();)r++,e.setDate(e.getDate()+7);return r}},{key:"getMonthDifferenceFromToday",value:function(t){var e=new Date,a=e.getFullYear(),r=e.getMonth()+1;return 12*(a-t.getFullYear())+(r-(t.getMonth()+1))}},{key:"createDailyLabels",value:function(t,e){for(var a=[],r=[],i=0;i<e;i++){var o=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),l=o+"-"+(n<10?"0":"")+n+"-"+(s<10?"0":"")+s;this.barsInfo.push(l);var h="";switch(s){case 1:case 21:case 31:h="st";break;case 2:case 22:h="nd";break;case 3:case 23:h="rd";break;default:h="th"}var c=t.toLocaleDateString("".concat(this.language,"-US"),{month:"short"})+" ".concat(s).concat(h);a.push(c),r.push(this.barColor),t.setDate(t.getDate()+1)}return[a,r]}},{key:"createWeeklyLabels",value:function(t,e){var a=this.getMondayOfWeek(t),r=new Date(a.getTime());r.setDate(r.getDate()+6);for(var i=[],o=[],n=0;n<e;n++){var s=a.getFullYear(),l=a.getMonth()+1,h=a.getDate(),c=r.getFullYear(),u=r.getMonth()+1,d=r.getDate(),f=s+"-"+(l<10?"0":"")+l+"-"+(h<10?"0":"")+h+"/"+c+"-"+(u<10?"0":"")+u+"-"+(d<10?"0":"")+d;this.barsInfo.push(f);var y=(l<10?"0":"")+l+"/"+(h<10?"0":"")+h+" - "+(u<10?"0":"")+u+"/"+(d<10?"0":"")+d;i.push(y),o.push(this.barColor),a.setDate(a.getDate()+7),r.setDate(r.getDate()+7)}return[i,o]}},{key:"createMonthlyLabels",value:function(t,e){for(var a=[],r=[],i=0;i<e;i++){var o=t.getFullYear(),n=t.getMonth()+1;t.setDate(1);var s=o+"-"+(n<10?"0":"")+n;this.barsInfo.push(s);var l=t.toLocaleDateString("".concat(this.language,"-US"),{month:"long"});a.push(l),r.push(this.barColor),t.setMonth(t.getMonth()+1)}return[a,r]}},{key:"processDailySteps",value:function(t,e,a){var r,i=new Array(a).fill(0),o=0,n=st(t);try{for(n.s();!(r=n.n()).done;){var s=r.value,l=nt(s.startTime.split("-"),3),h=l[0],c=l[1],u=l[2],d=new Date(Number(h),Number(c)-1,Number(u));i[this.getDateDifference(e,d)]=s.stepCount,s.stepCount>o&&(o=s.stepCount)}}catch(t){n.e(t)}finally{n.f()}return[i,o]}},{key:"processWeeklySteps",value:function(t,e,a){var r,i=new Array(a).fill(0),o=0,n=st(t);try{for(n.s();!(r=n.n()).done;){var s=r.value,l=nt(s.startTime.split("-"),3),h=l[0],c=l[1],u=l[2],d=new Date(Number(h),Number(c)-1,Number(u));i[this.getWeekDifference(d,e)-1]+=s.stepCount}}catch(t){n.e(t)}finally{n.f()}var f,y=st(i);try{for(y.s();!(f=y.n()).done;){var m=f.value;m>o&&(o=m)}}catch(t){y.e(t)}finally{y.f()}return[i,o]}},{key:"processMonthlySteps",value:function(t,e,a){var r,i=new Array(a).fill(0),o=0,n=st(t);try{for(n.s();!(r=n.n()).done;){var s=r.value,l=nt(s.startTime.split("-"),3),h=l[0],c=l[1],u=l[2];new Date(Number(h),Number(c)-1,Number(u)),i[12*(h-e.getFullYear())+(c-(e.getMonth()+1))]+=s.stepCount}}catch(t){n.e(t)}finally{n.f()}var d,f=st(i);try{for(f.s();!(d=f.n()).done;){var y=d.value;y>o&&(o=y)}}catch(t){f.e(t)}finally{f.f()}return[i,o]}},{key:"setChartData",value:function(t){if(null!=t&&Array.isArray(t)&&t.length>0){t.sort((function(t,e){var a=t.startTime,r=e.startTime;return a<r?-1:a>r?1:0}));var e=nt(t[0].startTime.split("-"),3),a=e[0],r=e[1],i=e[2],o=new Date(Number(a),Number(r)-1,Number(i)),n=0,s=0,l=[],h=[],c=[];switch(this.barsInfo=[],this.filter){case it.DAILY:n=this.getDateDifferenceFromToday(o)+1;var u=nt(this.createDailyLabels(o,n),2);h=u[0],c=u[1],h[h.length-1]=this.getLocalizedTodayString(this.language),o=new Date(Number(a),Number(r)-1,Number(i));var d=nt(this.processDailySteps(t,o,n),2);l=d[0],s=d[1];break;case it.WEEKLY:n=this.getWeekDifferenceFromToday(o);var f=nt(this.createWeeklyLabels(o,n),2);h=f[0],c=f[1],h[h.length-1]=this.getLocalizedThisWeekString(this.language),o=new Date(Number(a),Number(r)-1,Number(i));var y=nt(this.processWeeklySteps(t,o,n),2);l=y[0],s=y[1];break;case it.MONTHLY:n=this.getMonthDifferenceFromToday(o)+1;var m=nt(this.createMonthlyLabels(o,n),2);h=m[0],c=m[1],h[h.length-1]=this.getLocalizedThisMonthString(this.language),o=new Date(Number(a),Number(r)-1,Number(i));var p=nt(this.processMonthlySteps(t,o,n),2);l=p[0],s=p[1]}var v=h.length-1;this.selectedBarIndex=v,this.chart.options.plugins.customIndicatorBar.enabled=!0,this.chart.options.plugins.customIndicatorBar.barIndex=v,this.chart.options.plugins.customIndicatorBar.barValue=l[v],c[v]="#909090",this.chart.options.scales.y.max=s,this.adjustYAxisMaxValue(s),this.defdata.labels=h,this.defdata.datasets[0].data=l,this.chart.data.datasets[0].backgroundColor=c,this.chart.data.datasets[0].hoverBackgroundColor=c,this.totalBars=n,this.disableChartScrolling(),n>7&&this.enbleChartScrolling(),this.chart.update(),this.triggerBarTapListener(v)}}},{key:"adjustYAxisMaxValue",value:function(t){var e=this.chart.scales.y,a=e.getPixelForValue(1.1*t);this.chart.options.scales.y.max=e.getValueForPixel(a)}},{key:"setChartFilter",value:function(t){this.filter=t,0===this.barsInfo.length&&this.resetChart()}},{key:"getDefaultLocalizedString",value:function(){switch(this.filter){case it.DAILY:return this.getLocalizedTodayString(this.language);case it.WEEKLY:return this.getLocalizedThisWeekString(this.language);case it.MONTHLY:return this.getLocalizedThisMonthString(this.language)}return""}},{key:"shiftBarSelection",value:function(t){var e=this.chart.data,a=this.chart.options;e.datasets[0].backgroundColor[this.selectedBarIndex]=this.barColor,e.datasets[0].hoverBackgroundColor[this.selectedBarIndex]=this.barColor,e.datasets[0].backgroundColor[t]=this.barSelectedColor,e.datasets[0].hoverBackgroundColor[t]=this.barSelectedColor,this.barSelected=!0,a.plugins.customIndicatorBar.enabled=!0,a.plugins.customIndicatorBar.barIndex=t,a.plugins.customIndicatorBar.barValue=e.datasets[0].data[t],t<this.chart.config.options.scales.x.min?(this.chart.config.options.scales.x.max-=this.chart.config.options.scales.x.min-t,this.chart.config.options.scales.x.min=t):t>this.chart.config.options.scales.x.max&&(this.chart.config.options.scales.x.min+=t-this.chart.config.options.scales.x.max,this.chart.config.options.scales.x.max=t),this.chart.update(),this.triggerBarTapListener(t),this.selectedBarIndex=t}},{key:"shiftBarSelectionLeft",value:function(){this.selectedBarIndex>0&&this.shiftBarSelection(this.selectedBarIndex-1)}},{key:"shiftBarSelectionRight",value:function(){this.selectedBarIndex<this.chart.data.datasets[0].data.length-1&&this.shiftBarSelection(this.selectedBarIndex+1)}},{key:"resetChart",value:function(){this.selectedBarIndex=0,this.barSelected=!0,this.barsInfo=[],this.defdata.datasets[0].data=[0],this.defdata.labels=[this.getDefaultLocalizedString()],this.chart.data.datasets[0].data=[0],this.chart.data.labels=[this.getDefaultLocalizedString()],this.chart.options.plugins.customIndicatorBar.enabled=!1,this.disableChartScrolling(),this.resetIndicatorBar(),this.chart.update()}},{key:"triggerBarTapListener",value:function(t){null!==this.barTapListener&&void 0!==this.barTapListener&&this.barTapListener(this.barsInfo[t])}},{key:"setBarTapListener",value:function(t){this.barTapListener=t,this.barSelected&&this.triggerBarTapListener(this.selectedBarIndex)}},{key:"getLocalizedTodayString",value:function(t){return"es"===t?"Hoy":"Today"}},{key:"getLocalizedThisWeekString",value:function(t){return"es"===t?"Esta Semana":"This Week"}},{key:"getLocalizedThisMonthString",value:function(t){return"es"===t?"Este Mes":"This Month"}},{key:"setLanguage",value:function(t){this.language=t,this.defdata.labels[this.defdata.labels.length-1]=this.getLocalizedTodayString(this.language),this.chart.update()}}])&&ct(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function mt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pt(r.key),r)}}function pt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:String(e)}const vt=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._hr=e,this._time=a}var e,a;return e=t,(a=[{key:"hr",get:function(){return console.log("getter hr"),this._hr},set:function(t){this._hr=t}},{key:"time",get:function(){return console.log("getter time"),this._time},set:function(t){this._time=t}}])&&mt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function bt(t){return function(t){if(Array.isArray(t))return Ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){if(t){if("string"==typeof t)return Ct(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ct(t,e):void 0}}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Dt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,At(r.key),r)}}function Tt(t,e,a){return(e=At(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function At(t){var e=function(t,e){if("object"!=gt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:String(e)}const St=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Tt(this,"hoverLineAndTextPlugin",{afterDatasetsDraw:function(t,e,r){var i=t.ctx,o=(t.canvas,t.data),n=t.chartArea,s=n.top,l=n.bottom,h=n.left,c=n.right,u=(n.width,n.height),d=t.scales,f=(d.x,d.y);if(a.xHoverCoor&&a.yHoverCoor)for(var y=0;y<t._metasets[0].data.length;y++){var m=void 0,p=void 0,v=t._metasets[0].data[y].x-1,g=t._metasets[0].data[y].x+1;if(a.xHoverCoor>=v&&a.xHoverCoor<=g){t.ctx.save(),t.ctx.beginPath();var b=void 0,x=t._metasets[0].data[y].$context.raw.y,C=t._metasets[0].data[y].$context.raw.x;if(null!==x&&a.isChartClicked){m=x,p=C,x>=a.thresholds.ADJUSTABLE_MIN&&x<a.thresholds.LOW?b=a.colors.MIN:x>=a.thresholds.LOW&&x<a.thresholds.MODERATE?b=a.colors.LOW:x>=a.thresholds.MODERATE&&x<a.thresholds.HIGH?b=a.colors.MODERATE:x>=a.thresholds.HIGH&&x<=a.thresholds.MAX&&(b=a.colors.HIGH),t.ctx.strokeStyle=b,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore();var D=u/3-m;D<s&&(D=s);var T=a.xHoverCoor-100,A=T+28;a.xHoverCoor<100+h?A=(T=h)+28:a.xHoverCoor>c-100&&(A=28+(T=c-200)),t.ctx.beginPath(),i.arc(a.xHoverCoor,f.getPixelForValue(x),5,0,2*Math.PI),i.borderWidth=5,i.borderColor="white",i.fillStyle=b,i.fill(),i.closePath(),t.ctx.beginPath(),t.ctx.fillStyle=b,t.ctx.roundRect(T-3,D-3,206,46,0),t.ctx.fill(),t.ctx.beginPath(),t.ctx.fillStyle="white",t.ctx.roundRect(T,D,200,40,0),t.ctx.fill(),t.ctx.beginPath(),i.arc(A-10,D+22,5,0,2*Math.PI),i.fillStyle=b,i.fill(),i.closePath(),t.ctx.font="bold 20px sans-serif";var S=new Date(p),E=S.getHours(),I=E>=12?"PM":"AM",L=(E%12||12).toString().padStart(2,"0"),k=S.getMinutes().toString().padStart(2,"0"),M="".concat(L,":").concat(k).concat(I),w=t.ctx.measureText("".concat(m," bpm ")).width;t.ctx.fillStyle="black",t.ctx.fillText("".concat(m," bpm "),A,D+23),t.ctx.font="20px sans-serif",t.ctx.fillText(M,A+w,D+23);break}b="rgba(255,255,255,0)"}else a.isChartClicked&&a.xHoverCoor+1>o.datasets[0].placeLineInPixels&&(t.ctx.save(),t.ctx.beginPath(),t.ctx.strokeStyle=a.colors.MIN,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore())}}}),Tt(this,"customLineBorderPlugin",{beforeDraw:function(t,e){var r=t.chartArea.bottom,i=a.chartCanvas.parentNode,o=i.offsetWidth,n=window.getComputedStyle(i),s=n.getPropertyValue("padding-left"),l=n.getPropertyValue("padding-right"),h=o-(parseInt(s,10)+parseInt(l,10))-2,c=t.ctx;c.save(),c.beginPath(),c.strokeStyle="rgba(128, 128, 128,0.5)",c.moveTo(1,1),c.lineTo(h,1),c.lineTo(h,r+50),c.lineTo(1,r+50),c.closePath(),c.stroke()}}),Tt(this,"nowIndicatorLinePlugin",{beforeDatasetsDraw:function(t,e,r){if(!1!==a.lineIndicator&&0!==t._metasets[0].data.length){var i=t.ctx,o=t.data,n=t.chartArea,s=(n.top,n.bottom),l=n.left,h=n.right,c=t.scales;c.x,c.y,i.save(),a.myChart.ctx.beginPath(),a.myChart.ctx.strokeStyle=a.colors.MODERATE,a.myChart.ctx.lineWidth=a.lineWidthValues.NOW_INDICATOR_LINE;var u=(f=o.datasets[0].placeLine.split(":").map(Number),y=2,function(t){if(Array.isArray(t))return t}(f)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,o,n,s=[],l=!0,h=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(n=a.return(),Object(n)!==n))return}finally{if(h)throw i}}return s}}(f,y)||xt(f,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=(60*u[0]+u[1])/1440*(h-l);o.datasets[0].placeLineInPixels=d+l,a.myChart.ctx.moveTo(d+l,1),a.myChart.ctx.lineTo(d+l,s),a.myChart.ctx.stroke(),a.myChart.ctx.restore(),a.myChart.ctx.font="normal 23px Arial",a.myChart.ctx.textBaseline="middle",a.myChart.ctx.fillStyle=a.colors.MODERATE,a.myChart.ctx.fillText(a.lineIndicatorText,d+20,s+70)}var f,y}}),Tt(this,"fadeChartPlugin",{afterDatasetsDraw:function(t,e,r){t.ctx,t.canvas,t.data;var i=t.chartArea,o=(i.top,i.bottom),n=(i.left,i.right),s=(i.width,i.height,t.scales);if(s.x,s.y,a.isChartClicked){var l=t.ctx;t.scales.y,t.scales.x,l.save(),l.fillStyle=a.colors.FADE_CHART_ONCLICK,l.fillRect(2,2,n,o-2),l.restore()}}}),Tt(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,i=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);i.x,i.y,e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),Tt(this,"clickOnChartEnableHoverPlugin",{afterEvent:function(t,e){var r=e.event.x;if("click"===e.event.type){t.ctx,t.data;for(var i=t.chartArea,o=(i.top,i.bottom,i.left,i.right,t.scales),n=(o.x,o.y,0);n<t._metasets[0].data.length;n++){var s=t._metasets[0].data[n].x-8,l=t._metasets[0].data[n].x+8;if(r>=s&&r<=l){if(!0===a.isChartClicked)return void(a.isChartClicked=!1);a.isChartClicked=!0;break}}}}}),Tt(this,"lineColorChangeOnThresholdPlugin",{afterLayout:function(t){var e=t.ctx;e.save();var r=t.scales.y,i=e.createLinearGradient(0,r.top,0,r.bottom);i.addColorStop(0,a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MIN),i.addColorStop(1,a.colors.MIN),t.data.datasets[0].borderColor=i,e.restore()}}),Tt(this,"customXAxisLabelColorPlugin",{beforeDraw:function(t,e,r){var i=t.scales.x,o=i.top,n=(i.bottom,t.chartArea.left),s=t.chartArea.right,l=t.ctx;l.fillStyle=a.colors.X_AXIS_LABELS,l.fillRect(2,o,s+n-5,49)}}),Tt(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,o=!1,n=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=xt(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}(t.data.datasets);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){o=!0;break}}}catch(t){n.e(t)}finally{n.f()}if(!o){var l=t.chartArea,h=l.left,c=l.top,u=l.right,d=l.bottom,f=t.ctx,y=(h+u)/2,m=(c+d)/2;f.save(),f.textAlign="center",f.font="40px Arial",f.fillStyle="black",f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)",X_AXIS_LABELS:"rgb(237, 239, 240)",HOVER_RECTANGLE:"rgba(237, 239, 240,0.3)",FADE_CHART_ONCLICK:"rgba(255, 255, 255, 0.7)"},this.lineWidthValues={NOW_INDICATOR_LINE:3,HOVER_LINE:2,CHART_LINE:2,BORDER_LINE:1},this.myChart,this.xHoverCoor,this.yHoverCoor,this.isChartClicked=!1,this.chartCanvas=e,this.heartRateData=[],this.hourFormat=!0,this.maxValue=220,this.lineIndicator=!0,this.lineIndicatorText="NOW",this.noDataText="NO DATA",this.connectDuration=10,this.connectAllPoints=!0,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:220},this.initializeChart()}var e,a;return e=t,(a=[{key:"initializeChart",value:function(){var t=this,e={labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:this.lineWidthValues.CHART_LINE,spanGaps:!1,placeLine:"00:00",placeLineInPixels:0}]},a={type:"line",data:e,options:{animation:{duration:0},layout:{padding:{bottom:50}},responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour"},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!0,grid:{drawOnChartArea:!1,display:!1,drawBorder:!1},border:{display:!1},ticks:{offset:!1,autoSkip:!1,callback:function(e,a,r){switch(a){case 0:return t.hourFormat?"12:00AM":"00:00";case 6:return t.hourFormat?"06:00AM":"06:00";case 12:return t.hourFormat?"12:00PM":"12:00";case 18:return t.hourFormat?"06:00PM":"18:00";case 24:return t.hourFormat?"11:59PM":"23:59";default:return}},maxRotation:0,minRotation:0,color:"black",padding:8,font:{weight:"normal",size:20}}},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},ticks:{stepSize:1,maxTicksLimit:2*this.thresholds.MAX,color:"black",font:{weight:"bold",size:20},callback:function(a,r){if(0!==e.datasets[0].data.length)return a===t.thresholds.LOW||a===t.thresholds.MODERATE||a===t.thresholds.HIGH?a:void 0},grid:{color:"red"},gridLines:{drawBorder:!1}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.customLineBorderPlugin,this.nowIndicatorLinePlugin,this.hoverCursorValuesXYPlugin,this.fadeChartPlugin,this.hoverLineAndTextPlugin,this.clickOnChartEnableHoverPlugin,this.lineColorChangeOnThresholdPlugin,this.customXAxisLabelColorPlugin,this.noDataTextPlugin]};this.myChart=new Chart(this.chartCanvas,a)}},{key:"showChart",value:function(){}},{key:"setChartData",value:function(t){this.heartRateData=t,console.log(this.heartRateData),this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.heartRateData).push.apply(e,bt(t)),this.updateChart()}},{key:"addData",value:function(t){this.heartRateData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortHeartRateDataByTime(),this.updateChartYMinMax(),this.updateChartData(),this.myChart.update(),console.log("Heart Rate Chart is rendered!")}},{key:"updateChartData",value:function(){for(var t,e=0;e<this.heartRateData.length;e++){var a=this.heartRateData[e];this.myChart.data.datasets[0].data.push({x:a.time,y:parseInt(a.hr)}),this.addGapIfRequired(e)}var r=null===(t=this.heartRateData[this.heartRateData.length-1])||void 0===t?void 0:t.time;r&&this.moveLineToLatest(r)}},{key:"addGapIfRequired",value:function(t){if(t+1<this.heartRateData.length){var e=(this.heartRateData[t+1].time-this.heartRateData[t].time)/6e4,a=this.connectAllPoints,r=this.connectDuration;if(!a&&e>r){var i=new Date(this.heartRateData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:i,y:null})}}}},{key:"convertToDates",value:function(){this.heartRateData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortHeartRateDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.heartRateData=this.heartRateData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.heartRateData.length){var t=Math.min.apply(Math,bt(this.heartRateData.map((function(t){return t.hr})))),e=Math.max.apply(Math,bt(this.heartRateData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"setMaxValue",value:function(t){t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setFormat",value:function(t){"12HR"===t||"24HR"===t?(this.hourFormat="12HR"===t,this.updateChart()):alert("Error value. Values accepted are only 12HR and 24HR")}},{key:"deleteData",value:function(t){t>=this.heartRateData.length?alert("Error value. Can delete index from length of list value"):this.heartRateData.splice(t,1)}},{key:"moveLine",value:function(t){/^([01]\d|2[0-3]):([0-5]\d)$/.test(t)?0===this.heartRateData.length?alert("No data in chart."):(this.myChart.data.datasets[0].placeLine=t,this.myChart.update()):alert("Invalid time format. Please use military time format (HH:mm).")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),o=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(o)&&r<=i&&i<=o?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=o,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"setTimeLineIndicatorToggle",value:function(t){"boolean"==typeof t&&(this.lineIndicator=!!t,this.myChart.update())}},{key:"setLineIndicator",value:function(t){this.lineIndicatorText=t,this.myChart.update()}},{key:"clearChart",value:function(){this.heartRateData=[],this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.connectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.heartRateData.length>0){var i=this.heartRateData[this.heartRateData.length-1].time,o=i.getHours(),n=i.getMinutes(),s=i.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(o,n,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.heartRateData.push(new vt(h,new Date(r))),r.setMinutes(r.getMinutes()+1)}}},{key:"moveLineToLatest",value:function(t){var e=new Date(t),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");this.myChart.data.datasets[0].placeLine="".concat(a,":").concat(r)}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}}])&&Dt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function It(t){return function(t){if(Array.isArray(t))return Lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Lt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Lt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function kt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mt(r.key),r)}}function Mt(t){var e=function(t,e){if("object"!=Et(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Et(e)?e:String(e)}const wt=function(){function t(e){var a,r,i,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i={afterLayout:function(t){var e=t.ctx;e.save();var a=t.scales.y,r=e.createLinearGradient(0,a.top,0,a.bottom);r.addColorStop(0,o.colors.HIGH),r.addColorStop(o.getThreshold(o.thresholds.HIGH-o.thresholds.ADJUSTABLE_MIN,a.max-o.thresholds.ADJUSTABLE_MIN),o.colors.HIGH),r.addColorStop(o.getThreshold(o.thresholds.HIGH-.5-o.thresholds.ADJUSTABLE_MIN,a.max-o.thresholds.ADJUSTABLE_MIN),o.colors.MODERATE),r.addColorStop(o.getThreshold(o.thresholds.MODERATE-o.thresholds.ADJUSTABLE_MIN,a.max-o.thresholds.ADJUSTABLE_MIN),o.colors.MODERATE),r.addColorStop(o.getThreshold(o.thresholds.MODERATE-.5-o.thresholds.ADJUSTABLE_MIN,a.max-o.thresholds.ADJUSTABLE_MIN),o.colors.LOW),r.addColorStop(o.getThreshold(o.thresholds.LOW-o.thresholds.ADJUSTABLE_MIN,a.max-o.thresholds.ADJUSTABLE_MIN),o.colors.LOW),r.addColorStop(o.getThreshold(o.thresholds.LOW-o.thresholds.ADJUSTABLE_MIN,a.max-o.thresholds.ADJUSTABLE_MIN),o.colors.MIN),r.addColorStop(1,o.colors.MIN),t.data.datasets[0].borderColor=r,e.restore()}},(r=Mt(r="lineColorChangeOnThresholdPlugin"))in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i,this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)"},this.myChart,this.chartCanvas=e,this.heartRateData=[],this.maxValue=220,this.connectDuration=10,this.connectAllPoints=!0,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:220},this.initializeChart()}var e,a;return e=t,(a=[{key:"initializeChart",value:function(){var t={type:"line",data:{labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:1,spanGaps:!1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour"},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!1},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},display:!1}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.lineColorChangeOnThresholdPlugin]};this.myChart=new Chart(this.chartCanvas,t)}},{key:"showChart",value:function(){}},{key:"setChartData",value:function(t){this.heartRateData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.heartRateData).push.apply(e,It(t)),this.updateChart()}},{key:"addData",value:function(t){this.heartRateData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortHeartRateDataByTime(),this.updateChartYMinMax(),this.updateChartData(),this.myChart.update(),console.log("Tile Heart Rate Chart is rendered!")}},{key:"updateChartData",value:function(){for(var t=0;t<this.heartRateData.length;t++){var e=this.heartRateData[t];this.myChart.data.datasets[0].data.push({x:e.time,y:parseInt(e.hr)}),this.addGapIfRequired(t)}}},{key:"addGapIfRequired",value:function(t){if(t+1<this.heartRateData.length){var e=(this.heartRateData[t+1].time-this.heartRateData[t].time)/6e4,a=this.connectAllPoints,r=this.connectDuration;if(!a&&e>r){var i=new Date(this.heartRateData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:i,y:null})}}}},{key:"convertToDates",value:function(){this.heartRateData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortHeartRateDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.heartRateData=this.heartRateData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.heartRateData.length){var t=Math.min.apply(Math,It(this.heartRateData.map((function(t){return t.hr})))),e=Math.max.apply(Math,It(this.heartRateData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"addDataToChart",value:function(t,e){if(""===t||""===e||isNaN(t))alert("Please enter correct values.");else if(parseInt(t)>this.thresholds.MAX)alert("Input exceeds max value. Please enter correct values.");else if(parseInt(t)<this.thresholds.MIN)alert("Input is below minimum value. Please enter correct values.");else{var a={hr:parseInt(t),time:new Date("2024-01-01T".concat(e))};this.heartRateData.push(a)}}},{key:"setMaxValue",value:function(t){t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),o=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(o)&&r<=i&&i<=o?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=o,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"deleteData",value:function(t){t>=this.heartRateData.length?alert("Error value. Can delete index from length of list value"):this.heartRateData.splice(t,1)}},{key:"clearChart",value:function(){this.heartRateData=[],this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.connectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.heartRateData.length>0){var i=this.heartRateData[this.heartRateData.length-1].time,o=i.getHours(),n=i.getMinutes(),s=i.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(o,n,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.heartRateData.push(new vt(h,new Date(r))),r.setMinutes(r.getMinutes()+1)}}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}}])&&kt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Pt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rt(r.key),r)}}function Rt(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:String(e)}const Nt=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=e,this._y=a}var e,a;return e=t,(a=[{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}}])&&Pt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function _t(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Bt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){if(t){if("string"==typeof t)return Ft(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ft(t,e):void 0}}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Wt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xt(r.key),r)}}function Ut(t,e,a){return(e=Xt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Xt(t){var e=function(t,e){if("object"!=Ot(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:String(e)}const jt=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ut(this,"customXAxisLabelColorPlugin",{beforeDraw:function(t,e,r){var i=t.scales.x,o=i.top,n=(i.bottom,t.chartArea.left),s=t.chartArea.right,l=t.ctx;l.fillStyle=a.colors.CUSTOM_X_AXIS,l.fillRect(n,o,s+n,70),l.save(),l.beginPath(),l.strokeStyle=a.colors.LINE,l.lineWidth=1,l.moveTo(n,o),l.lineTo(s+n,o),l.stroke(),l.restore()}}),Ut(this,"lineIndicatorPlugin",{beforeDatasetsDraw:function(t,e,r){var i=t.ctx,o=(t.data,t.chartArea),n=(o.top,o.bottom),s=(o.left,o.right,t.scales),l=s.x;if(s.y,0!==t.data.datasets[0].data.length){i.save(),i.beginPath();var h=a.myChart.data.datasets[0].placeLine;if(a.filter===a.AverageRestingHRFilter.WEEKLY){if(h>7||h<0)return}else if(a.filter===a.AverageRestingHRFilter.MONTHLY){if(h>30||h<0)return}else if(a.filter===a.AverageRestingHRFilter.YEARLY&&(h>365||h<0))return;i.strokeStyle=a.colors.LINE,i.lineWidth=2,i.moveTo(l.getPixelForTick(h),0),i.lineTo(l.getPixelForTick(h),n),i.stroke()}}}),Ut(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,o=!1,n=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Bt(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}(t.data.datasets);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){o=!0;break}}}catch(t){n.e(t)}finally{n.f()}if(!o){var l=t.chartArea,h=l.left,c=l.top,u=l.right,d=l.bottom,f=t.ctx,y=(t.scales.x,(h+u)/2),m=(c+d)/2;f.save(),f.textAlign="center",f.font="40px Arial",f.fillStyle="black",f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),Ut(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,i=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);i.x,i.y,e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),Ut(this,"clickAndChangeLinePositionPlugin",{afterEvent:function(t,e){var r=e.event.x,i=(e.event.y,e.event.type),o=8;if(a.filter===a.AverageRestingHRFilter.YEARLY&&(o=4),"click"===i){t.ctx,t.data;for(var n=t.chartArea,s=(n.top,n.bottom,n.left,n.right,t.scales),l=(s.x,s.y,0);l<t._metasets[0].data.length;l++){var h=t._metasets[0].data[l].x-o,c=t._metasets[0].data[l].x+o;if(r>=h&&r<=c){var u=t._metasets[0].data[l].$context.raw.x,d=a.myChart.options.scales.x.min.getTime(),f=(u.getTime()-d)/864e5;a.moveLineToLatest(f)}}}}}),this.chartCanvas=e,this.myChart,this.noDataText="NOT ENOUGH HR DATA",this.filter,this.startDate,this.endDate,this.todayDate=new Date,this.aveRestingHRData=[],this.lowestDateScrolling,this.highestDateScrolling,this.dayCounter=0,this.xHoverCoor,this.yHoverCoor,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:80,MODERATE:100,HIGH:120,ADJUSTABLE_MAX:200},this.colors={LINE:"rgb(111, 111, 111)",POINTER:"rgb(42, 192, 238)",POINTER_RADIUS:"rgb(147, 147, 147)",CUSTOM_X_AXIS:"rgb(237, 239, 240)"},this.AverageRestingHRFilter={WEEKLY:0,MONTHLY:1,YEARLY:2};var r={type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:this.colors.POINTER,borderColor:this.colors.POINTER_RADIUS,borderWidth:2,pointStyle:"circle",pointRadius:7,pointHoverRadius:7,pointBorderColor:"black",placeLine:0}]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,scaleShowValues:!0,scales:{x:{max:366,offset:!0,type:"time",grid:{display:!1},time:{unit:"day",displayFormats:{day:"MM/dd"}},border:{display:!1},ticks:Ut(Ut(Ut(Ut(Ut(Ut({maxRotation:0,stepSize:1,source:"date",autoSkip:!0,callback:function(t,e,r){var i=new Date(t),o=i.getMonth(),n=i.getDate(),s=o+1+"/"+String(n).padStart(2,"0");return a.filter===a.AverageRestingHRFilter.WEEKLY?s:a.filter!==a.AverageRestingHRFilter.MONTHLY||(e-2+a.dayCounter)%7!=0&&e-2+a.dayCounter!==0?a.filter===a.AverageRestingHRFilter.YEARLY?a.getMonth(o,n):"":s}},"maxRotation",0),"minRotation",0),"color",this.colors.LINE),"padding",10),"font",{weight:"normal",size:15}),"autoSkip",!1)},y:{min:this.thresholds.ADJUSTABLE_MIN,border:{display:!1},grid:{lineWidth:1,color:this.colors.LINE},ticks:{stepSize:1,color:this.colors.LINE,font:{weight:"normal",size:15},callback:function(t,e){if(t===a.thresholds.LOW||t===a.thresholds.MODERATE||t===a.thresholds.HIGH)return t}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.customXAxisLabelColorPlugin,this.lineIndicatorPlugin,this.noDataTextPlugin,this.hoverCursorValuesXYPlugin,this.clickAndChangeLinePositionPlugin]};this.myChart=new Chart(this.chartCanvas,r),this.myChart.canvas.addEventListener("wheel",(function(t){a.scroller(t,myChart),t.preventDefault()})),this.updateChartXMinMax(this.AverageRestingHRFilter.WEEKLY),this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}var e,a;return e=t,(a=[{key:"scroller",value:function(t){if(0!==this.myChart.data.datasets[0].data.length&&0!==this.aveRestingHRData){var e=864e5;t.deltaY>0?this.myChart.options.scales.x.max.getTime()+e<=this.highestDateScrolling.getTime()&&(this.myChart.options.scales.x.min=new Date(this.myChart.options.scales.x.min.getTime()+e),this.myChart.options.scales.x.max=new Date(this.myChart.options.scales.x.max.getTime()+e),this.dayCounter++,this.myChart.data.datasets[0].placeLine--):t.deltaY<0&&this.myChart.options.scales.x.min.getTime()-e>=this.lowestDateScrolling.getTime()&&(this.myChart.options.scales.x.min=new Date(this.myChart.options.scales.x.min.getTime()-e),this.myChart.options.scales.x.max=new Date(this.myChart.options.scales.x.max.getTime()-e),this.dayCounter--,this.myChart.data.datasets[0].placeLine++),this.myChart.update(),7!==this.dayCounter&&7!==this.dayCounter||(this.dayCounter=0)}}},{key:"moveLineToLatest",value:function(t){this.myChart.data.datasets[0].placeLine=t}},{key:"setTodayDate",value:function(t){/^\d{4}-\d{2}-\d{2}$/.test(t)?this.todayDate=new Date(t):(alert("Error: Invalid date format. Setting the date to today."),this.todayDate=new Date),this.updateChartXMinMax(this.filter),this.updateChartYMinMax(),this.myChart.update()}},{key:"setFilter",value:function(t){this.filter=t}},{key:"setChartData",value:function(t,e){this.aveRestingHRData=t,this.updateChart(e)}},{key:"addMultipleData",value:function(t,e){var a;(a=this.aveRestingHRData).push.apply(a,_t(t)),this.updateChart(e)}},{key:"addData",value:function(t,e){this.aveRestingHRData.push(t),this.updateChart(e)}},{key:"setFilterView",value:function(t){this.updateChart(t)}},{key:"updateChart",value:function(t){this.myChart.data.datasets[0].data=[],this.updateChartXMinMax(t),this.convertToDates(),this.sortData(),this.updateChartYMinMax();for(var e=0;e<this.aveRestingHRData.length;e++){var a=this.aveRestingHRData[e].y;"string"==typeof a&&(a=parseInt(a)),this.myChart.data.datasets[0].data.push({x:this.aveRestingHRData[e].x,y:a})}this.myChart.update()}},{key:"getFormatDate",value:function(t){var e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(a,"-").concat(r,"T00:00:00")}},{key:"convertToDates",value:function(){this.aveRestingHRData.forEach((function(t){t.x instanceof Date||(t.x=new Date(t.x+"T00:00:00"))}))}},{key:"sortData",value:function(){this.aveRestingHRData.sort((function(t,e){return t.x.getTime()-e.x.getTime()}))}},{key:"getMonth",value:function(t,e){var a=" ";switch(t){case 0:1===e&&(a="JAN");break;case 1:1===e&&(a="FEB");break;case 2:1===e&&(a="MAR");break;case 3:1===e&&(a="APR");break;case 4:1===e&&(a="MAY");break;case 5:1===e&&(a="JUN");break;case 6:1===e&&(a="JUL");break;case 7:1===e&&(a="AUG");break;case 8:1===e&&(a="SEP");break;case 9:1===e&&(a="OCT");break;case 10:1===e&&(a="NOV");break;case 11:1===e&&(a="DEC");break;default:a=" "}return a}},{key:"updateChartXMinMax",value:function(t){this.endDate=this.todayDate,this.endDate.setHours(0),this.endDate.setMinutes(0),this.endDate.setSeconds(0),this.endDate.setMilliseconds(0),this.startDate=new Date(this.endDate),this.setFilter(t),this.dayCounter=0,this.filter===this.AverageRestingHRFilter.WEEKLY?(this.startDate.setDate(this.startDate.getDate()-7),this.moveLineToLatest(7)):this.filter===this.AverageRestingHRFilter.MONTHLY?(this.startDate.setDate(this.startDate.getDate()-30),this.moveLineToLatest(30)):this.filter===this.AverageRestingHRFilter.YEARLY&&(this.startDate.setDate(this.startDate.getDate()-365),this.moveLineToLatest(365)),this.myChart.options.scales.x.min=this.startDate,this.myChart.options.scales.x.max=this.endDate}},{key:"updateChartYMinMax",value:function(){if(0!==this.aveRestingHRData.length){var t=Math.min.apply(Math,_t(this.aveRestingHRData.map((function(t){return t.y})))),e=Math.max.apply(Math,_t(this.aveRestingHRData.map((function(t){return t.y}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX;var a=this.aveRestingHRData.map((function(t){return new Date(t.x)}));this.lowestDateScrolling=new Date(Math.min.apply(Math,_t(a))),this.highestDateScrolling=new Date(Math.max.apply(Math,_t(a)));var r=this.todayDate;this.highestDateScrolling<r&&(this.highestDateScrolling=r);var i=this.todayDate-this.lowestDateScrolling,o=0;if(this.filter===this.AverageRestingHRFilter.WEEKLY?o=7:this.filter===this.AverageRestingHRFilter.MONTHLY?o=30:this.filter===this.AverageRestingHRFilter.YEARLY&&(o=365),i<=24*o*60*60*1e3&&i>=0){var n=new Date(this.todayDate);n.setDate(n.getDate()-o),this.lowestDateScrolling=n}}else this.thresholds.LOW<=20?this.thresholds.ADJUSTABLE_MIN=0:this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN,this.thresholds.MAX=this.thresholds.HIGH+20,this.myChart.options.scales.y.max=this.thresholds.MAX}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),o=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(o)&&r<=i&&i<=o?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=o,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"clearChart",value:function(){console.log("Clearing..."),this.aveRestingHRData=[],this.updateChartXMinMax(this.AverageRestingHRFilter.WEEKLY),this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}}])&&Wt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Vt(t){return function(t){if(Array.isArray(t))return Jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Gt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){if(t){if("string"==typeof t)return Jt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Jt(t,e):void 0}}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function zt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function Kt(t,e,a){return(e=$t(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $t(t){var e=function(t,e){if("object"!=Yt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yt(e)?e:String(e)}const qt=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Kt(this,"hoverLineAndTextPlugin",{afterDatasetsDraw:function(t,e,r){var i=t.ctx,o=(t.canvas,t.data),n=t.chartArea,s=n.top,l=n.bottom,h=n.left,c=n.right,u=(n.width,n.height),d=t.scales,f=(d.x,d.y);if(a.xHoverCoor&&a.yHoverCoor)for(var y=0;y<t._metasets[0].data.length;y++){var m=void 0,p=void 0,v=t._metasets[0].data[y].x-1,g=t._metasets[0].data[y].x+1;if(a.xHoverCoor>=v&&a.xHoverCoor<=g){t.ctx.save(),t.ctx.beginPath();var b=void 0,x=t._metasets[0].data[y].$context.raw.y,C=t._metasets[0].data[y].$context.raw.x;if(null!==x&&a.isChartClicked){m=x,p=C,x>=a.thresholds.ADJUSTABLE_MIN&&x<a.thresholds.LOW?b=a.colors.MIN:x>=a.thresholds.LOW&&x<a.thresholds.MODERATE?b=a.colors.LOW:x>=a.thresholds.MODERATE&&x<a.thresholds.HIGH?b=a.colors.MODERATE:x>=a.thresholds.HIGH&&x<=a.thresholds.MAX&&(b=a.colors.HIGH),t.ctx.strokeStyle=b,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore();var D=u/3-m;D<s&&(D=s);var T=a.xHoverCoor-100,A=T+28;a.xHoverCoor<100+h?A=(T=h)+28:a.xHoverCoor>c-100&&(A=28+(T=c-200)),t.ctx.beginPath(),i.arc(a.xHoverCoor,f.getPixelForValue(x),5,0,2*Math.PI),i.borderWidth=5,i.borderColor="white",i.fillStyle=b,i.fill(),i.closePath(),t.ctx.beginPath(),t.ctx.fillStyle=b,t.ctx.roundRect(T-3,D-3,206,46,0),t.ctx.fill(),t.ctx.beginPath(),t.ctx.fillStyle="white",t.ctx.roundRect(T,D,200,40,0),t.ctx.fill(),t.ctx.beginPath(),i.arc(A-10,D+22,5,0,2*Math.PI),i.fillStyle=b,i.fill(),i.closePath(),t.ctx.font="bold 20px sans-serif";var S=new Date(p),E=S.getHours(),I=E>=12?"PM":"AM",L=(E%12||12).toString().padStart(2,"0"),k=S.getMinutes().toString().padStart(2,"0"),M="".concat(L,":").concat(k).concat(I),w=t.ctx.measureText("".concat(m," bpm ")).width;t.ctx.fillStyle="black",t.ctx.fillText("".concat(m," bpm "),A,D+23),t.ctx.font="20px sans-serif",t.ctx.fillText(M,A+w,D+23);break}b="rgba(255,255,255,0)"}else a.isChartClicked&&a.xHoverCoor+1>o.datasets[0].placeLineInPixels&&(t.ctx.save(),t.ctx.beginPath(),t.ctx.strokeStyle=a.colors.MIN,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore())}}}),Kt(this,"nowIndicatorLinePlugin",{beforeDatasetsDraw:function(t,e,r){if(!1!==a.lineIndicator&&0!==t._metasets[0].data.length){var i=t.ctx,o=t.data,n=t.chartArea,s=(n.top,n.bottom),l=n.left,h=n.right,c=t.scales;c.x,c.y,i.save(),a.myChart.ctx.beginPath(),a.myChart.ctx.strokeStyle=a.colors.MODERATE,a.myChart.ctx.lineWidth=a.lineWidthValues.NOW_INDICATOR_LINE;var u=(f=o.datasets[0].placeLine.split(":").map(Number),y=2,function(t){if(Array.isArray(t))return t}(f)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,o,n,s=[],l=!0,h=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,i=t}finally{try{if(!l&&null!=a.return&&(n=a.return(),Object(n)!==n))return}finally{if(h)throw i}}return s}}(f,y)||Gt(f,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=(60*u[0]+u[1])/1440*(h-l);o.datasets[0].placeLineInPixels=d+l,a.myChart.ctx.moveTo(d+l,1),a.myChart.ctx.lineTo(d+l,s),a.myChart.ctx.stroke(),a.myChart.ctx.restore(),a.myChart.ctx.font="normal 23px Arial",a.myChart.ctx.textBaseline="middle",a.myChart.ctx.fillStyle=a.colors.MODERATE,a.myChart.ctx.fillText(a.lineIndicatorText,d+20,s+70)}var f,y}}),Kt(this,"fadeChartPlugin",{afterDatasetsDraw:function(t,e,r){t.ctx,t.canvas,t.data;var i=t.chartArea,o=(i.top,i.bottom),n=(i.left,i.right),s=(i.width,i.height,t.scales);if(s.x,s.y,a.isChartClicked){var l=t.ctx;t.scales.y,t.scales.x,l.save(),l.fillStyle=a.colors.FADE_CHART_ONCLICK,l.fillRect(2,2,n,o-2),l.restore()}}}),Kt(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,i=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);i.x,i.y,e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),Kt(this,"clickOnChartEnableHoverPlugin",{afterEvent:function(t,e){var r=e.event.x;if(e.event.y,"click"===e.event.type){t.ctx,t.data;for(var i=t.chartArea,o=(i.top,i.bottom,i.left,i.right,t.scales),n=(o.x,o.y,0);n<t._metasets[0].data.length;n++){var s=t._metasets[0].data[n].x-8,l=t._metasets[0].data[n].x+8;if(r>=s&&r<=l){if(!0===a.isChartClicked)return void(a.isChartClicked=!1);a.isChartClicked=!0;break}}}}}),Kt(this,"lineColorChangeOnThresholdPlugin",{afterLayout:function(t){var e=t.ctx;e.save();var r=t.scales.y,i=e.createLinearGradient(0,r.top,0,r.bottom);i.addColorStop(0,a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.HIGH),i.addColorStop(a.getThreshold(a.thresholds.HIGH-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),i.addColorStop(a.getThreshold(a.thresholds.MODERATE-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),i.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MIN),i.addColorStop(1,a.colors.MIN),t.data.datasets[0].borderColor=i,e.restore()}}),Kt(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,o=!1,n=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Gt(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}(t.data.datasets);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){o=!0;break}}}catch(t){n.e(t)}finally{n.f()}if(!o){var l=t.chartArea,h=l.left,c=l.top,u=l.right,d=l.bottom,f=t.ctx,y=(t.scales.x,(h+u)/2),m=(c+d)/2;f.save(),f.strokeStyle=a.colors.X_AXIS_LABELS,f.lineWidth=2,f.strokeRect(2,c+2,u+h-4,d-c),f.textAlign="center",f.font="40px Arial",f.fillStyle=a.colors.X_AXIS_LABELS,f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)",X_AXIS_LABELS:"rgb(128, 128, 128)",HOVER_RECTANGLE:"rgba(237, 239, 240,0.3)",FADE_CHART_ONCLICK:"rgba(255, 255, 255, 0.7)"},this.lineWidthValues={NOW_INDICATOR_LINE:3,HOVER_LINE:2,CHART_LINE:3,BORDER_LINE:2},this.myChart,this.xHoverCoor,this.yHoverCoor,this.isChartClicked=!1,this.chartCanvas=e,this.paiEarnedData=[],this.hourFormat=!0,this.maxValue=220,this.lineIndicator=!0,this.lineIndicatorText="NOW",this.noDataText="NO DATA",this.connectDuration=10,this.connectAllPoints=!0,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:220},this.initializeChart()}var e,a;return e=t,(a=[{key:"initializeChart",value:function(){var t=this,e={labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:this.lineWidthValues.CHART_LINE,spanGaps:!1,placeLine:"00:00",placeLineInPixels:0}]},a={type:"line",data:e,options:{animation:{duration:0},layout:{padding:{bottom:50}},responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour",autoSkip:!1},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!0,grid:{drawOnChartArea:!1,display:!1,drawBorder:!1},border:{display:!1},ticks:{offset:!1,callback:function(e,a,r){var i=new Date(e);if(a%4==0){var o,n=i.getHours();return t.hourFormat?(o=(n%12||12).toString(),o+=n<12?"am":"pm"):o=n.toString().padStart(2,"0"),o}},maxRotation:0,minRotation:0,color:"black",padding:8,font:{weight:"normal",size:20}}},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},ticks:{stepSize:1,maxTicksLimit:2*this.thresholds.MAX,color:"black",font:{weight:"bold",size:20},callback:function(a,r){if(0!==e.datasets[0].data.length)return a===t.thresholds.LOW||a===t.thresholds.MODERATE||a===t.thresholds.HIGH?a:void 0},grid:{color:"red"},gridLines:{drawBorder:!1}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.nowIndicatorLinePlugin,this.hoverCursorValuesXYPlugin,this.fadeChartPlugin,this.hoverLineAndTextPlugin,this.clickOnChartEnableHoverPlugin,this.lineColorChangeOnThresholdPlugin,this.noDataTextPlugin]};this.myChart=new Chart(this.chartCanvas,a)}},{key:"setChartData",value:function(t){this.paiEarnedData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.paiEarnedData).push.apply(e,Vt(t)),this.updateChart()}},{key:"addData",value:function(t){this.paiEarnedData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortPAIEarnedDataByTime(),this.updateChartYMinMax(),this.updateChartData(),this.myChart.update()}},{key:"updateChartData",value:function(){for(var t,e=0;e<this.paiEarnedData.length;e++){var a=this.paiEarnedData[e];this.myChart.data.datasets[0].data.push({x:a.time,y:parseInt(a.hr)}),this.addGapIfRequired(e)}var r=null===(t=this.paiEarnedData[this.paiEarnedData.length-1])||void 0===t?void 0:t.time;r&&this.moveLineToLatest(r)}},{key:"addGapIfRequired",value:function(t){if(t+1<this.paiEarnedData.length){var e=(this.paiEarnedData[t+1].time-this.paiEarnedData[t].time)/6e4,a=this.connectAllPoints,r=this.connectDuration;if(!a&&e>r){var i=new Date(this.paiEarnedData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:i,y:null})}}}},{key:"convertToDates",value:function(){this.paiEarnedData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortPAIEarnedDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.paiEarnedData=this.paiEarnedData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.paiEarnedData.length){var t=Math.min.apply(Math,Vt(this.paiEarnedData.map((function(t){return t.hr})))),e=Math.max.apply(Math,Vt(this.paiEarnedData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"setMaxValue",value:function(t){t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setFormat",value:function(t){"12HR"===t||"24HR"===t?(this.hourFormat="12HR"===t,this.myChart.update()):alert("Error value. Values accepted are only 12HR and 24HR")}},{key:"deleteData",value:function(t){t>=this.paiEarnedData.length?alert("Error value. Can delete index from length of list value"):(this.paiEarnedData.splice(t,1),this.updateChart())}},{key:"moveLine",value:function(t){/^([01]\d|2[0-3]):([0-5]\d)$/.test(t)?0===this.paiEarnedData.length?alert("No data in chart."):(this.myChart.data.datasets[0].placeLine=t,this.myChart.update()):alert("Invalid time format. Please use military time format (HH:mm).")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),o=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(o)&&r<=i&&i<=o?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=o,this.updateChartYMinMax(),this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"setTimeLineIndicatorToggle",value:function(t){"boolean"==typeof t&&(this.lineIndicator=!!t,this.myChart.update())}},{key:"setLineIndicator",value:function(t){this.lineIndicatorText=t,this.myChart.update()}},{key:"clearChart",value:function(){this.paiEarnedData=[],this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.connectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.paiEarnedData.length>0){var i=this.paiEarnedData[this.paiEarnedData.length-1].time,o=i.getHours(),n=i.getMinutes(),s=i.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(o,n,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.paiEarnedData.push(new vt(h,new Date(r))),r.setMinutes(r.getMinutes()+1)}}},{key:"moveLineToLatest",value:function(t){var e=new Date(t),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");this.myChart.data.datasets[0].placeLine="".concat(a,":").concat(r)}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}}])&&zt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function Zt(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,te(r.key),r)}}function te(t){var e=function(t,e){if("object"!=Qt(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qt(e)?e:String(e)}const ee=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pai=e}var e,a;return e=t,(a=[{key:"pai",get:function(){return console.log("getter pai"),this._pai},set:function(t){this._pai=t}}])&&Zt(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function re(t){return function(t){if(Array.isArray(t))return ie(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ie(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ie(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function oe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function ne(t,e,a){return(e=se(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function se(t){var e=function(t,e){if("object"!=ae(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:String(e)}const le=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ne(this,"lineGoalPlugin",{beforeDatasetsDraw:function(t){var e=t.ctx,r=(t.data,t.chartArea),i=(r.top,r.bottom,r.left),o=r.right,n=t.scales,s=(n.x,n.y),l=a.thresholds.GOAL;if(l){var h=s.getPixelForValue(l);e.save(),e.beginPath(),e.strokeStyle=a.colors.GOAL_LEVEL,e.lineWidth=2,e.moveTo(i-10,h),e.lineTo(o,h),e.stroke(),e.restore()}}}),ne(this,"clickOnChartEnableHoverPlugin",{afterEvent:function(t,e){var r=e.event.x;if("click"===e.event.type){t.ctx,t.data;var i=t.chartArea,o=(i.top,i.bottom,i.left,i.right,t.scales);if(o.x,o.y,a.filter!==a.PAIHistoryFilter.WEEKLY)return void(a.isChartClicked=!0);for(var n=0;n<t._metasets[0].data.length;n++){var s=t._metasets[0].data[n].x-8,l=t._metasets[0].data[n].x+8;if(r>=s&&r<=l){if(!0===a.isChartClicked)return void(a.isChartClicked=!1);a.isChartClicked=!0;break}}}}}),ne(this,"hoverLineAndTextPlugin",{afterDatasetsDraw:function(t,e,r){var i=t.ctx,o=t.chartArea,n=o.top,s=o.bottom,l=o.left,h=o.right,c=t.scales,u=c.x,d=c.y;if(a.filter===a.PAIHistoryFilter.WEEKLY&&a.xHoverCoor&&a.yHoverCoor)for(var f=function(){var e=t._metasets[0].data[y].x,r=e-20,o=e+20;if(a.xHoverCoor>=r&&a.xHoverCoor<=o){var c=e,f=a.paiHistoryData[y];if(a.dataPointIsHovered=!0,t.ctx.save(),t.ctx.beginPath(),!0===a.isChartClicked){var m=t._metasets[0].data[y].$context.raw.x.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"2-digit",year:"numeric"});return a.drawIndicators(i,c,d.getPixelForValue(f),n,s,a.colors.INDICATOR_LINE),a.drawCustomTooltip(i,c,d.getPixelForValue(f),f,m,a.colors),t.ctx.restore(),1}}else for(var p=u.ticks.map((function(t){return t.value})),v={weekday:"short",month:"short",day:"2-digit",year:"numeric"},g=p.map((function(t){return new Date(t).toLocaleDateString("en-US",v)})),b=(h-l)/7,x=t._metasets[0].data[0].x,C=1;C<7;C++){var D=(x+=b)-20,T=x+20;a.xHoverCoor>=D&&a.xHoverCoor<=T&&(void 0!==a.paiHistoryData[C]&&!isNaN(a.paiHistoryData[C])||!0!==a.isChartClicked||(a.dataPointIsHovered=!0,a.drawIndicators(i,x,d.getPixelForValue(0),n,s,a.colors.INDICATOR_LINE),a.drawCustomTooltip(i,x,d.getPixelForValue(0),0,g[C],a.colors)))}},y=0;y<t._metasets[0].data.length&&!f();y++);}}),ne(this,"lineIndicatorPlugin",{afterDatasetsDraw:function(t,e,r){var i=t.ctx,o=t.chartArea,n=o.top,s=o.bottom,l=t.scales,h=l.x,c=l.y,u=t.data.datasets;if(0!==u[0].data.length&&a.isChartClicked&&!a.dataPointIsHovered){var d=u[0].placeLine,f=a.paiHistoryData[d],y=h.getPixelForTick(d),m=c.getPixelForValue(f);if(i.save(),i.beginPath(),a.drawIndicators(i,y,m,n,s,a.colors.INDICATOR_LINE),a.filter===a.PAIHistoryFilter.WEEKLY){var p=t._metasets[0].data[d].$context.raw.x.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"2-digit",year:"numeric"});a.drawCustomTooltip(i,h.getPixelForTick(d),c.getPixelForValue(f),f,p,a.colors)}i.restore()}}}),ne(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),ne(this,"clickAndChangeLinePositionPlugin",{afterEvent:function(t,e){var r=e.event.x;if(e.event.y,"click"===e.event.type&&a.filter===a.PAIHistoryFilter.WEEKLY){t.ctx,t.data;for(var i=t.chartArea,o=(i.top,i.bottom,i.left,i.right,t.scales),n=(o.x,o.y,0);n<t._metasets[0].data.length;n++){var s=t._metasets[0].data[n].x-10,l=t._metasets[0].data[n].x+10;if(r>=s&&r<=l){var h=t._metasets[0].data[n].$context.raw.x,c=a.myChart.options.scales.x.min.getTime(),u=(h.getTime()-c)/864e5;a.moveLineToLatest(u)}}}}}),this.chartCanvas=e,this.myChart,this.filter,this.startDate,this.endDate,this.todayDate=new Date,this.paiHistoryData=[],this.dayCounter=0,this.xHoverCoor,this.yHoverCoor,this.isChartClicked=!0,this.thresholds={MIN:0,GOAL:100,ADJUSTABLE_MAX:150},this.colors={LINE:"rgb(111, 111, 111)",POINTER_RADIUS:"rgb(144, 112, 255)",LINE_DEFAULT:"#5C00D4",INDICATOR_LINE:"#9070FF",LEVEL_LINES:"#D9D2F8",GOAL_LEVEL:"#26CBA8"},this.PAIHistoryFilter={WEEKLY:0,MONTHLY:1,YEARLY:2};var r={type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:this.colors.LINE_DEFAULT,borderColor:this.colors.LINE_DEFAULT,borderWidth:2,pointStyle:"circle",pointHoverRadius:0,pointRadius:0,placeLine:0}]},options:{animation:{duration:0},layout:{padding:{left:50,right:50,top:50,bottom:50}},responsive:!0,maintainAspectRatio:!1,scaleShowValues:!0,scales:{x:{max:366,offset:!0,type:"time",grid:{display:!1},time:{unit:"day",displayFormats:{day:"MM/dd"}},border:{display:!1},ticks:ne(ne(ne(ne(ne(ne({maxRotation:0,stepSize:1,source:"date",autoSkip:!0,callback:function(t,e,r){var i=new Date(t),o=i.getMonth(),n=i.getDate(),s=i.getFullYear();if(a.filter===a.PAIHistoryFilter.WEEKLY)return i.getDate();if(a.filter===a.PAIHistoryFilter.MONTHLY){var l=i.getDate(),h=a.daysInMonth(i.getMonth()+1,i.getFullYear());return l%5==0&&l<=25||1===l||l===h?(l<10?"0":"")+l:" "}return a.filter===a.PAIHistoryFilter.YEARLY?a.getMonth(o,n,s):" "}},"maxRotation",0),"minRotation",0),"color",this.colors.LINE),"padding",10),"font",{weight:"normal",size:15}),"autoSkip",!1)},y:{min:this.thresholds.MIN,max:this.thresholds.ADJUSTABLE_MAX,border:{display:!1},grid:{lineWidth:2,color:this.colors.LEVEL_LINES},ticks:{stepSize:1,autoSkip:!1,color:this.colors.LINE,font:{weight:"normal",size:15},callback:function(t,e){if(0===t||t%50==0)return t}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.lineGoalPlugin,this.lineIndicatorPlugin,this.hoverCursorValuesXYPlugin,this.clickAndChangeLinePositionPlugin,this.hoverLineAndTextPlugin,this.clickOnChartEnableHoverPlugin]};this.myChart=new Chart(this.chartCanvas,r),this.updateChartXMinMax(this.PAIHistoryFilter.WEEKLY),this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}var e,a;return e=t,(a=[{key:"drawIndicators",value:function(t,e,a,r,i,o){t.strokeStyle=o,t.lineWidth=3,t.beginPath(),t.moveTo(e,r),t.lineTo(e,i),t.stroke(),t.beginPath(),t.arc(e,a,6,0,2*Math.PI),t.lineWidth=5,t.fillStyle="white",t.fill(),t.beginPath(),t.arc(e,a,5,0,2*Math.PI),t.fillStyle=o,t.fill()}},{key:"drawCustomTooltip",value:function(t,e,a,r,i,o){t.beginPath(),t.fillStyle=o.POINTER_RADIUS,t.roundRect(e-76,a-61,157,52,3),t.moveTo(e,a+2),t.lineTo(e-30,a-30),t.lineTo(e+30,a-30),t.fill(),t.beginPath(),t.fillStyle="white",t.roundRect(e-75,a-60,155,50,3),t.moveTo(e,a),t.lineTo(e-10,a-10),t.lineTo(e+10,a-10),t.fill(),t.fillStyle="black",t.fillText(i,e-60,a-40),t.fillText("PAI Score ".concat(r," PAI"),e-48,a-20),t.beginPath(),t.strokeStyle=o.LINE_DEFAULT,t.lineWidth=3,t.moveTo(e-65,a-25),t.lineTo(e-55,a-25),t.stroke()}},{key:"moveLineToLatest",value:function(t){this.myChart.data.datasets[0].placeLine=t}},{key:"daysInMonth",value:function(t,e){return new Date(e,t,0).getDate()}},{key:"setTodayDate",value:function(t){/^\d{4}-\d{2}-\d{2}$/.test(t)?this.todayDate=new Date(t):(alert("Error: Invalid date format. Setting the date to today."),this.todayDate=new Date),this.updateChart(this.filter)}},{key:"setFilter",value:function(t){this.filter=t}},{key:"setChartData",value:function(t,e){this.paiHistoryData=t,this.updateChart(e)}},{key:"addMultipleData",value:function(t,e){var a;(a=this.paiHistoryData).push.apply(a,re(t)),this.updateChart(e)}},{key:"addData",value:function(t,e){this.paiHistoryData.push(t),console.log(this.paiHistoryData),this.updateChart(e)}},{key:"setFilterView",value:function(t){this.updateChart(t)}},{key:"updateChart",value:function(t){this.myChart.data.datasets[0].data=[],this.convertToInts(),this.updateChartXMinMax(t),this.updateChartYMinMax();for(var e=[],a=new Date(this.startDate),r=0;r<this.paiHistoryData.length;r++){var i={x:new Date(a),y:this.paiHistoryData[r]};e.push(i),this.myChart.data.datasets[0].data.push(i),a.setDate(a.getDate()+1),a.setHours(0,0,0,0)}var o=this.paiHistoryData.length-1;-1===o?this.moveLineToLatest(0):this.moveLineToLatest(o);var n=this.getNumDaysDifference();(this.filter===this.PAIHistoryFilter.WEEKLY&&this.paiHistoryData.length>n||this.filter===this.PAIHistoryFilter.MONTHLY&&this.paiHistoryData.length>n||this.filter===this.PAIHistoryFilter.YEARLY&&this.paiHistoryData.length>n)&&(this.myChart.data.datasets[0].placeLine=n),this.isChartClicked=!0,this.dataPointIsHovered=!1,this.myChart.update(),console.log("Chart rendered!")}},{key:"getNumDaysDifference",value:function(){var t=this.startDate,e=(this.endDate.getTime()-t.getTime())/864e5;return Math.round(e)}},{key:"convertToInts",value:function(){for(var t=0;t<this.paiHistoryData.length;t++)this.paiHistoryData[t]=parseInt(this.paiHistoryData[t])}},{key:"setGoal",value:function(t){isNaN(t)?alert("Goal should be an integer."):(this.thresholds.GOAL=t,this.myChart.update())}},{key:"getFormatDate",value:function(t){var e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(a,"-").concat(r,"T00:00:00")}},{key:"getMonth",value:function(t,e,a){var r=" ";switch(t){case 0:1===e&&(r=["Jan",a]);break;case 2:1===e&&(r=["Mar",a]);break;case 4:1===e&&(r=["May",a]);break;case 6:1===e&&(r=["Jul",a]);break;case 8:1===e&&(r=["Sep",a]);break;case 10:1===e&&(r=["Nov",a]);break;default:r=""}return r}},{key:"updateChartXMinMax",value:function(t){if(this.filter=t,t===this.PAIHistoryFilter.WEEKLY){var e=this.todayDate.getDay(),a=new Date(this.todayDate);a.setDate(this.todayDate.getDate()-e),a.setHours(0,0,0,0);var r=new Date(a);r.setDate(a.getDate()+6),r.setHours(0,0,0,0),this.startDate=a,this.endDate=r}else if(t===this.PAIHistoryFilter.MONTHLY){var i=new Date(this.todayDate);i.setDate(1),i.setHours(0,0,0,0);var o=new Date(i.getFullYear(),i.getMonth()+1,0);o.setHours(0,0,0,0),this.startDate=i,this.endDate=o}else if(t===this.PAIHistoryFilter.YEARLY){var n=this.todayDate.getFullYear(),s=new Date(n,0,1),l=new Date(n,11,31);this.startDate=s,this.endDate=l}this.myChart.options.scales.x.min=this.startDate,this.myChart.options.scales.x.max=this.endDate}},{key:"updateChartYMinMax",value:function(){if(0!==this.paiHistoryData.length){var t=Math.max.apply(Math,re(this.paiHistoryData.slice(0,this.getNumDaysDifference()+1))),e=this.thresholds.ADJUSTABLE_MAX;t>e||e-t<50||e-t>150?(this.thresholds.ADJUSTABLE_MAX=50*Math.ceil(t/50)+50,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX):t<100&&(this.thresholds.ADJUSTABLE_MAX=150,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX)}else this.thresholds.ADJUSTABLE_MAX=150,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}},{key:"clearChart",value:function(){console.log("Chart is cleared!"),this.paiHistoryData=[],this.updateChartXMinMax(this.PAIHistoryFilter.WEEKLY),this.updateChartYMinMax(),this.myChart.data.datasets[0].data=[],this.myChart.update()}}])&&oe(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function ce(t){return function(t){if(Array.isArray(t))return de(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ue(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(t,e){if(t){if("string"==typeof t)return de(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?de(t,e):void 0}}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function fe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,me(r.key),r)}}function ye(t,e,a){return(e=me(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function me(t){var e=function(t,e){if("object"!=he(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==he(e)?e:String(e)}const pe=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,"highlightDataPoint",{beforeDatasetsDraw:function(t,e,r){var i=t.ctx,o=(t.data,t.chartArea),n=(o.top,o.bottom,o.left,o.right),s=t.scales,l=s.x,h=s.y;if(0!==t.data.datasets[0].data.length){i.save(),i.beginPath();var c=a.myChart.data.datasets[0].placeRadius,u=l.getPixelForValue(c.x),d=h.getPixelForValue(c.y);u>n||!a.isDataHighlighted||(i.arc(u,d,6,0,2*Math.PI),i.fillStyle=a.colors.POINTER,i.fill())}}}),ye(this,"noDataTextPlugin",{afterDraw:function(t,e,r){var i,o=!1,n=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=ue(t))){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}(t.data.datasets);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s.data.length>0&&s.data.some((function(t){return 0!==t}))){o=!0;break}}}catch(t){n.e(t)}finally{n.f()}if(!o){var l=t.chartArea,h=l.left,c=l.top,u=l.right,d=l.bottom,f=t.ctx,y=(t.scales.x,(h+u)/2),m=(c+d)/2;f.save(),f.textAlign="center",f.font="40px Arial",f.fillStyle="black",f.textBaseline="middle",f.fillText(a.noDataText,y,m),f.restore()}}}),ye(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t){t.inChartArea?(a.xHoverCoor=t.event.x,a.yHoverCoor=t.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),t.changed=!0}}),ye(this,"clickAndChangeLinePositionPlugin",{afterEvent:function(t,e){var r=e.event.x;if(e.event.y,"click"===e.event.type){t.ctx,t.data;var i=t.chartArea,o=(i.top,i.bottom,i.left,i.right,t.scales);if(o.x,o.y,!a.isMoreThan29Days)return;for(var n=0;n<t._metasets[0].data.length;n++){var s=t._metasets[0].data[n].x-10,l=t._metasets[0].data[n].x+10;if(r>=s&&r<=l){var h={x:new Date(t._metasets[0].data[n].$context.parsed.x),y:t._metasets[0].data[n].$context.parsed.y},c=a.myChart.data.datasets[0].placeRadius;h.x.getTime()===c.x.getTime()&&a.isDataHighlighted?a.isDataHighlighted=!1:(a.myChart.data.datasets[0].placeRadius=h,a.isDataHighlighted=!0)}a.myChart.update()}}}}),this.chartCanvas=e,this.myChart,this.noDataText="NO DATA",this.startDate,this.endDate,this.todayDate=new Date,this.fitnessAgeData=[],this.lowestDateScrolling,this.highestDateScrolling,this.xHoverCoor,this.yHoverCoor,this.isMouseDown=!1,this.startX=0,this.endX=0,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:55,MODERATE:60,HIGH:65,ADJUSTABLE_MAX:100},this.colors={LINE:"rgb(111, 111, 111)",GRID_LINE:"rgb(236, 236, 236)",POINTER:"rgb(144, 112, 255)",POINTER_RADIUS:"rgb(147, 147, 147)",CUSTOM_X_AXIS:"rgb(237, 239, 240)"};var r={type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:this.colors.POINTER,pointRadius:3,pointHoverRadius:0,borderWidth:0,placeRadius:{}}]},options:{tooltips:{enabled:!1},hover:{mode:null},animation:{duration:0},responsive:!0,maintainAspectRatio:!1,scaleShowValues:!0,scales:{x:{max:366,offset:!0,type:"time",grid:{display:!1},time:{unit:"day",displayFormats:{day:"MM/dd"}},border:{display:!1},ticks:ye(ye(ye(ye(ye(ye({maxRotation:0,stepSize:1,source:"date",autoSkip:!0,callback:function(t,e,a){return""}},"maxRotation",0),"minRotation",0),"color",this.colors.LINE),"padding",10),"font",{weight:"normal",size:15}),"autoSkip",!1)},y:{position:"right",min:this.thresholds.LOW-5,max:this.thresholds.HIGH+5,border:{display:!1},grid:{lineWidth:2,color:this.colors.GRID_LINE},ticks:{stepSize:1,autoSkip:!1,color:this.colors.LINE,font:{weight:"normal",size:15},callback:function(t,e){if(t===a.thresholds.LOW||t===a.thresholds.MODERATE||t===a.thresholds.HIGH)return t}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.noDataTextPlugin,this.hoverCursorValuesXYPlugin,this.clickAndChangeLinePositionPlugin,this.highlightDataPoint]};this.myChart=new Chart(this.chartCanvas,r),this.myChart.canvas.addEventListener("mousedown",(function(t){a.isMouseDown=!0,a.startX=t.clientX})),document.addEventListener("mouseup",(function(){a.isMouseDown&&(a.isMouseDown=!1)})),this.myChart.canvas.addEventListener("mousemove",(function(t){if(a.isMouseDown){a.endX=t.clientX;var e=a.endX-a.startX;Math.abs(e)>25&&(e>0?a.scrollChart("left"):a.scrollChart("right"),a.startX=a.endX)}})),this.updateChartXMinMax(),this.updateChartLevels(),this.myChart.data.datasets[0].data=[],this.myChart.update()}var e,a;return e=t,(a=[{key:"scrollChart",value:function(t){this.scroller(t)}},{key:"scroller",value:function(t){if(0!==this.myChart.data.datasets[0].data.length&&0!==this.fitnessAgeData){var e=864e5;t.deltaY>0||"right"===t?this.myChart.options.scales.x.max.getTime()+e<=this.highestDateScrolling.getTime()&&(this.myChart.options.scales.x.min=new Date(this.myChart.options.scales.x.min.getTime()+e),this.myChart.options.scales.x.max=new Date(this.myChart.options.scales.x.max.getTime()+e)):(t.deltaY<0||"left"===t)&&this.myChart.options.scales.x.min.getTime()-e>=this.lowestDateScrolling.getTime()&&(this.myChart.options.scales.x.min=new Date(this.myChart.options.scales.x.min.getTime()-e),this.myChart.options.scales.x.max=new Date(this.myChart.options.scales.x.max.getTime()-e)),this.myChart.update()}}},{key:"setTodayDate",value:function(t){/^\d{4}-\d{2}-\d{2}$/.test(t)?this.todayDate=new Date(t):(alert("Error: Invalid date format. Setting the date to today."),this.todayDate=new Date),this.updateChartXMinMax(),this.updateChartLevels(),this.myChart.update()}},{key:"setChartData",value:function(t){this.fitnessAgeData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.fitnessAgeData).push.apply(e,ce(t)),this.updateChart()}},{key:"addData",value:function(t){this.fitnessAgeData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.updateChartXMinMax(),this.convertToDates(),this.sortData(),this.adjustIfScrollable(),this.updateChartLevels();for(var t=0;t<this.fitnessAgeData.length;t++){var e=this.fitnessAgeData[t].y;"string"==typeof e&&(e=parseInt(e)),this.myChart.data.datasets[0].data.push({x:this.fitnessAgeData[t].x,y:e})}this.fitnessAgeData[this.fitnessAgeData.length-1].x<=this.todayDate&&(this.myChart.data.datasets[0].placeRadius=this.fitnessAgeData[this.fitnessAgeData.length-1],this.isDataHighlighted=!0),this.myChart.update()}},{key:"adjustIfScrollable",value:function(){var t=this.fitnessAgeData.map((function(t){return new Date(t.x)}));this.lowestDateScrolling=new Date(Math.min.apply(Math,ce(t))),this.highestDateScrolling=new Date(Math.max.apply(Math,ce(t)));var e=this.todayDate;this.highestDateScrolling>e&&(this.highestDateScrolling=e);var a=this.todayDate-this.lowestDateScrolling;if(a<=25056e5&&a>=0){var r=new Date(this.todayDate);r.setDate(r.getDate()-29),this.lowestDateScrolling=r}var i=(this.highestDateScrolling.getTime()-this.lowestDateScrolling.getTime())/864e5;this.isMoreThan29Days=i>29,this.isMoreThan29Days?(this.myChart.data.datasets[0].borderWidth=3,this.myChart.data.datasets[0].borderColor=this.colors.POINTER,this.myChart.data.datasets[0].pointRadius=0):(this.myChart.data.datasets[0].borderWidth=0,this.myChart.data.datasets[0].pointRadius=3)}},{key:"convertToDates",value:function(){this.fitnessAgeData.forEach((function(t){t.x instanceof Date||(t.x=new Date(t.x+"T00:00:00"))}))}},{key:"sortData",value:function(){this.fitnessAgeData.sort((function(t,e){return t.x.getTime()-e.x.getTime()}))}},{key:"updateChartXMinMax",value:function(){this.endDate=this.todayDate,this.endDate.setHours(0),this.endDate.setMinutes(0),this.endDate.setSeconds(0),this.endDate.setMilliseconds(0),this.startDate=new Date(this.endDate),this.startDate.setDate(this.startDate.getDate()-29),this.myChart.options.scales.x.min=this.startDate,this.myChart.options.scales.x.max=this.endDate}},{key:"updateChartLevels",value:function(){if(0!==this.fitnessAgeData.length){var t=Math.min.apply(Math,ce(this.fitnessAgeData.map((function(t){return t.y})))),e=Math.max.apply(Math,ce(this.fitnessAgeData.map((function(t){return t.y})))),a=Math.round((e+t)/2);this.thresholds.LOW=t-5,this.thresholds.MODERATE=a,this.thresholds.HIGH=e+5}else this.thresholds.LOW=55,this.thresholds.MODERATE=60,this.thresholds.HIGH=65;this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-2,this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+2,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),i=parseInt(e),o=parseInt(a);!isNaN(r)&&!isNaN(i)&&!isNaN(o)&&r<=i&&i<=o?(this.thresholds.LOW=r,this.thresholds.MODERATE=i,this.thresholds.HIGH=o,this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-2,this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+2,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX,this.myChart.update()):alert("Please enter valid threshold values.")}}},{key:"clearChart",value:function(){console.log("Clearing..."),this.fitnessAgeData=[],this.updateChartLevels(),this.myChart.data.datasets[0].data=[],this.myChart.update()}}])&&fe(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function ge(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function be(t){var e=function(t,e){if("object"!=ve(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,"string");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ve(e)?e:String(e)}const xe=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeStamp=e,this.heartRate=a}var e,a;return e=t,(a=[{key:"heartRate",get:function(){return this._heartRate},set:function(t){this._heartRate=t}},{key:"timeStamp",get:function(){return this._timeStamp},set:function(t){this._timeStamp=t}}])&&ge(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ce={NAME:"Timex JS Charts Library",VERSION:"v0.2.0",COMPANY:"Timex Group USA"};void 0!==(t=a.hmd(t)).exports?t.exports={TimeDisplayFormat:r,TimeInterval:i,StepCountInterval:l,StepCountBarChart:f,SleepQuality:y,SleepQualityInterval:g,SleepQualityBarChart:N,FitnessAgeBarChart:W,PAIScore:Y,DailyPAIFilter,DailyPAIBarChart:rt,ActivityHistoryFilter:it,ActivityHistoryBarChart:ft,HeartRateLineDataModel:vt,HeartRateLineChart:St,TileHeartRateLineChart:wt,AveRestingHRLineChartModel:Nt,AveRestingHRLineChart:jt,PAIEarnedLineChart:qt,PAIHistoryLineDataModel:ee,PAIHistoryLineChart:le,FitnessAgeLineChart:pe,ChartLanguage:I,HeartRateInterval:xe,TimexCharts:Ce}:(window.TimeDisplayFormat=r,window.TimeInterval=i,window.StepCountInterval=l,window.StepCountBarChart=f,window.SleepQuality=y,window.SleepQualityInterval=g,window.SleepQualityBarChart=N,window.FitnessAgeBarChart=W,window.PAIScore=Y,window.DailyPAIFilter=DailyPAIFilter,window.DailyPAIBarChart=rt,window.ActivityHistoryFilter=it,window.ActivityHistoryBarChart=ft,window.HeartRateLineDataModel=vt,window.HeartRateLineChart=St,window.TileHeartRateLineChart=wt,window.AveRestingHRLineChartModel=Nt,window.AveRestingHRLineChart=jt,window.PAIEarnedLineChart=qt,window.PAIHistoryLineDataModel=ee,window.PAIHistoryLineChart=le,window.FitnessAgeLineChart=pe,window.ChartLanguage=I,window.HeartRateInterval=xe,window.TimexCharts=Ce)}},e={};function a(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,a),o.loaded=!0,o.exports}return a.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a(856)})()));