!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("timexcharts",[],e):"object"==typeof exports?exports.timexcharts=e():t.timexcharts=e()}(self,(()=>(()=>{"use strict";var t={730:(t,e,a)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function n(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:String(e)}a.r(e);var i=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeStamp=e,this.heartRate=a}var e,a,r;return e=t,(a=[{key:"heartRate",get:function(){return this._heartRate},set:function(t){this._heartRate=t}},{key:"timeStamp",get:function(){return this._timeStamp},set:function(t){this._timeStamp=t}}])&&o(e.prototype,a),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:String(e)}var u=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._hr=e,this._time=a}var e,a,r;return e=t,(a=[{key:"hr",get:function(){return this._hr},set:function(t){this._hr=t}},{key:"time",get:function(){return this._time},set:function(t){this._time=t}}])&&l(e.prototype,a),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function d(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:String(e)}var m=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startTime=e,this.stepCount=a}var e,a,r;return e=t,(a=[{key:"stepCount",get:function(){return this._stepCount},set:function(t){this._stepCount=t}},{key:"startTime",get:function(){return this._startTime},set:function(t){this._startTime=t}}])&&d(e.prototype,a),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,o,n,i,s=[],l=!0,h=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=n.call(a)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){h=!0,o=t}finally{try{if(!l&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(h)throw o}}return s}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return b(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function T(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function C(t,e,a){return(e=A(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function A(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(e)?e:String(e)}var x=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,"hoverLineAndTextPlugin",{afterDatasetsDraw:function(t,e,r){var o=t.ctx,n=(t.canvas,t.data),i=t.chartArea,s=i.top,l=i.bottom,h=i.left,u=i.right,c=(i.width,i.height),d=t.scales,f=(d.x,d.y);if(a.xHoverCoor&&a.yHoverCoor)for(var m=0;m<t._metasets[0].data.length;m++){var y=void 0,p=void 0,v=t._metasets[0].data[m].x-1,g=t._metasets[0].data[m].x+1;if(a.xHoverCoor>=v&&a.xHoverCoor<=g){t.ctx.save(),t.ctx.beginPath();var b=void 0,T=t._metasets[0].data[m].$context.raw.y;y=T,p=t._metasets[0].data[m].$context.raw.x,T>=a.thresholds.ADJUSTABLE_MIN&&T<a.thresholds.LOW?b=a.colors.MIN:T>=a.thresholds.LOW&&T<a.thresholds.MODERATE?b=a.colors.LOW:T>=a.thresholds.MODERATE&&T<a.thresholds.HIGH?b=a.colors.MODERATE:T>=a.thresholds.HIGH&&T<=a.thresholds.MAX&&(b=a.colors.HIGH),t.ctx.strokeStyle=b,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore(),null===T&&(y=0);var C=200,A=c/3-y;A<s&&(A=s);var x=a.xHoverCoor-100,S=x+28;a.xHoverCoor<100+h?S=(x=h)+28:a.xHoverCoor>u-100&&(S=(x=u-C)+28),t.ctx.beginPath(),o.arc(a.xHoverCoor,f.getPixelForValue(T),5,0,2*Math.PI),o.borderWidth=5,o.borderColor="white",o.fillStyle=b,o.fill(),o.closePath(),t.ctx.beginPath(),t.ctx.fillStyle=b,t.ctx.roundRect(x-3,A-3,206,46,0),t.ctx.fill(),t.ctx.beginPath(),t.ctx.fillStyle="white",t.ctx.roundRect(x,A,C,40,0),t.ctx.fill(),t.ctx.beginPath(),o.arc(S-10,A+22,5,0,2*Math.PI),o.fillStyle=b,o.fill(),o.closePath(),t.ctx.font="bold 20px sans-serif";var D=new Date(p),I=D.getHours(),E=I>=12?"PM":"AM",M=(I%12||12).toString().padStart(2,"0"),k=D.getMinutes().toString().padStart(2,"0"),N="".concat(M,":").concat(k).concat(E),w=t.ctx.measureText("".concat(y," bpm ")).width;t.ctx.fillStyle="black",t.ctx.fillText("".concat(y," bpm "),S,A+23),t.ctx.font="20px sans-serif",t.ctx.fillText(N,S+w,A+23);break}a.xHoverCoor+1>n.datasets[0].placeLineInPixels&&(t.ctx.save(),t.ctx.beginPath(),t.ctx.strokeStyle=a.colors.MIN,t.ctx.lineWidth=a.lineWidthValues.HOVER_LINE,t.ctx.moveTo(a.xHoverCoor,s-20),t.ctx.lineTo(a.xHoverCoor,l),t.ctx.stroke(),t.ctx.restore())}}}),C(this,"customLineBorderPlugin",{beforeDraw:function(t,e){var r=t.chartArea.bottom,o=a.chartCanvas.parentNode,n=o.offsetWidth,i=window.getComputedStyle(o),s=i.getPropertyValue("padding-left"),l=i.getPropertyValue("padding-right"),h=n-(parseInt(s,10)+parseInt(l,10))-2,u=t.ctx;u.save(),u.beginPath(),u.strokeStyle="rgba(128, 128, 128,0.5)",u.moveTo(1,1),u.lineTo(h,1),u.lineTo(h,r+50),u.lineTo(1,r+50),u.closePath(),u.stroke()}}),C(this,"nowIndicatorLinePlugin",{beforeDatasetsDraw:function(t){if(!1!==a.isLineIndicatorOn&&!1!==a.hasData){var e=t.ctx,r=t.data,o=t.chartArea,n=(o.top,o.bottom),i=o.left,s=o.right,l=t.scales;l.x,l.y;e.save(),a.myChart.ctx.beginPath(),a.myChart.ctx.strokeStyle=a.colors.MODERATE,a.myChart.ctx.lineWidth=a.lineWidthValues.NOW_INDICATOR_LINE;var h=v(r.datasets[0].placeLine.split(":").map(Number),2),u=(60*h[0]+h[1])/1440*(s-i);r.datasets[0].placeLineInPixels=u+i,a.myChart.ctx.moveTo(u+i,1),a.myChart.ctx.lineTo(u+i,n),a.myChart.ctx.stroke(),a.myChart.ctx.restore(),a.myChart.ctx.font="normal 23px Arial",a.myChart.ctx.textBaseline="middle",a.myChart.ctx.fillStyle=a.colors.MODERATE,s-r.datasets[0].placeLineInPixels<20&&(u-=20),""!==a.lineIndicatorText?a.myChart.ctx.fillText(a.lineIndicatorText,u+20,n+70):a.myChart.ctx.fillText(a.getLocalizedNowString(a.language),u+20,n+70)}}}),C(this,"fadeChartPlugin",{afterDatasetsDraw:function(t){t.ctx,t.canvas,t.data;var e=t.chartArea,r=(e.top,e.bottom),o=(e.left,e.right),n=(e.width,e.height,t.scales);n.x,n.y;if(a.isChartClicked){var i=t.ctx;t.scales.y,t.scales.x;i.save(),i.fillStyle=a.colors.FADE_CHART_ONCLICK,i.fillRect(2,2,o,r-2),i.restore()}}}),C(this,"hoverCursorValuesXYPlugin",{afterEvent:function(t,e){t.ctx,t.canvas,t.data;var r=t.chartArea,o=(r.top,r.bottom,r.left,r.right,r.width,r.height,t.scales);o.x,o.y;e.inChartArea?(a.xHoverCoor=e.event.x,a.yHoverCoor=e.event.y):(a.xHoverCoor=void 0,a.yHoverCoor=void 0),e.changed=!0}}),C(this,"clickOnChartEnableHoverPlugin",{afterEvent:function(t,e){var r=e.event.x;if("click"===e.event.type){t.ctx,t.data;for(var o=t.chartArea,n=(o.top,o.bottom,o.left,o.right,t.scales),i=(n.x,n.y,0);i<t._metasets[0].data.length;i++){var s=t._metasets[0].data[i].x-8,l=t._metasets[0].data[i].x+8;if(r>=s&&r<=l){if(a.isChartClicked)return void(a.isChartClicked=!1);a.isChartClicked=!0;break}}}}}),C(this,"lineColorChangeOnThresholdPlugin",{afterLayout:function(t){var e=t.ctx;e.save();var r=t.scales.y,o=e.createLinearGradient(0,r.top,0,r.bottom);o.addColorStop(0,a.colors.HIGH),o.addColorStop(a.getThreshold(a.thresholds.HIGH-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.HIGH),o.addColorStop(a.getThreshold(a.thresholds.HIGH-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),o.addColorStop(a.getThreshold(a.thresholds.MODERATE-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MODERATE),o.addColorStop(a.getThreshold(a.thresholds.MODERATE-.5-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),o.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.LOW),o.addColorStop(a.getThreshold(a.thresholds.LOW-a.thresholds.ADJUSTABLE_MIN,r.max-a.thresholds.ADJUSTABLE_MIN),a.colors.MIN),o.addColorStop(1,a.colors.MIN),t.data.datasets[0].borderColor=o,e.restore()}}),C(this,"customXAxisLabelColorPlugin",{beforeDraw:function(t,e,r){var o=t.scales.x,n=o.top,i=(o.bottom,t.chartArea.left),s=t.chartArea.right,l=t.ctx;l.fillStyle=a.colors.X_AXIS_LABELS,l.fillRect(2,n,s+i-5,49)}}),C(this,"noDataTextPlugin",{afterDraw:function(t){if(!a.hasData){var e=t.chartArea,r=e.left,o=e.top,n=e.right,i=e.bottom,s=t.ctx,l=(r+n)/2,h=(o+i)/2;s.save(),s.textAlign="center",s.font="40px Arial",s.fillStyle="black",s.textBaseline="middle",""!==a.noDataText?s.fillText(a.noDataText,l,h):s.fillText(a.getLocalizedNoDataString(a.language),l,h),s.restore()}}}),this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)",X_AXIS_LABELS:"rgb(237, 239, 240)",HOVER_RECTANGLE:"rgba(237, 239, 240,0.3)",FADE_CHART_ONCLICK:"rgba(255, 255, 255, 0.7)"},this.lineWidthValues={NOW_INDICATOR_LINE:3,HOVER_LINE:2,CHART_LINE:2,BORDER_LINE:1},this.myChart,this.xHoverCoor,this.yHoverCoor,this.chartCanvas=e,this.heartRateData=[],this.is12HourFormat=!0,this.maxValue=220,this.isLineIndicatorOn=!0,this.lineIndicatorText="",this.noDataText="",this.connectDuration=10,this.isConnectAllPoints=!0,this.hasData=!1,this.language=ChartLanguage.ENGLISH,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:250,FIXED_MAX:300},this.initializeChart()}var e,a,r;return e=t,(a=[{key:"initializeChart",value:function(){var t=this,e={type:"line",data:{labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:this.lineWidthValues.CHART_LINE,spanGaps:!1,placeLine:"00:00",placeLineInPixels:0}]},options:{animation:{duration:0},layout:{padding:{bottom:50}},responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour"},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!0,grid:{drawOnChartArea:!1,display:!1,drawBorder:!1},border:{display:!1},ticks:{offset:!1,autoSkip:!1,callback:function(e,a,r){switch(a){case 0:return t.is12HourFormat?"12:00AM":"00:00";case 6:return t.is12HourFormat?"06:00AM":"06:00";case 12:return t.is12HourFormat?"12:00PM":"12:00";case 18:return t.is12HourFormat?"06:00PM":"18:00";case 24:return t.is12HourFormat?"11:59PM":"23:59";default:return}},maxRotation:0,minRotation:0,color:"black",padding:8,font:{weight:"normal",size:20}}},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},ticks:{stepSize:1,maxTicksLimit:2*this.thresholds.MAX,color:"black",font:{weight:"bold",size:20},callback:function(e,a){if(!1!==t.hasData)return e===t.thresholds.LOW||e===t.thresholds.MODERATE||e===t.thresholds.HIGH?e:void 0},gridLines:{drawBorder:!1}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.customLineBorderPlugin,this.nowIndicatorLinePlugin,this.hoverCursorValuesXYPlugin,this.hoverLineAndTextPlugin,this.lineColorChangeOnThresholdPlugin,this.customXAxisLabelColorPlugin,this.noDataTextPlugin]};this.myChart=new Chart(this.chartCanvas,e)}},{key:"showChart",value:function(){}},{key:"setChartData",value:function(t){this.heartRateData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.heartRateData).push.apply(e,p(t)),this.updateChart()}},{key:"addData",value:function(t){this.heartRateData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortHeartRateDataByTime(),this.filterCorrectHRValues(),this.updateChartYMinMax(),this.updateChartData(),this.checkAllBlankData(),this.myChart.update(),console.log("Heart Rate Chart is rendered!")}},{key:"updateChartData",value:function(){for(var t,e=0;e<this.heartRateData.length;e++){var a=this.heartRateData[e],r=0===parseInt(a.hr)?null:parseInt(a.hr);this.myChart.data.datasets[0].data.push({x:a.time,y:r}),this.addGapIfRequired(e)}var o=null===(t=this.heartRateData[this.heartRateData.length-1])||void 0===t?void 0:t.time;o&&null!==this.heartRateData[this.heartRateData.length-1].hr&&this.moveLineToLatest(o)}},{key:"addGapIfRequired",value:function(t){if(t+1<this.heartRateData.length){var e=(this.heartRateData[t+1].time-this.heartRateData[t].time)/6e4,a=this.isConnectAllPoints,r=this.connectDuration;if(!a&&e>r){var o=new Date(this.heartRateData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:o,y:null})}}}},{key:"checkAllBlankData",value:function(){var t=this.myChart.data.datasets;this.hasData=!1;var e,a=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=g(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,n=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw n}}}}(t[0].data);try{for(a.s();!(e=a.n()).done;)if(null!==e.value.y){this.hasData=!0;break}}catch(t){a.e(t)}finally{a.f()}}},{key:"convertToDates",value:function(){this.heartRateData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortHeartRateDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.heartRateData=this.heartRateData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"filterCorrectHRValues",value:function(){var t=this;this.heartRateData=this.heartRateData.filter((function(e){return e._hr>=0&&e._hr<=t.thresholds.MAX}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.heartRateData.length){var t=Math.min.apply(Math,p(this.heartRateData.map((function(t){return t.hr})))),e=Math.max.apply(Math,p(this.heartRateData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"setMaxValue",value:function(t){t>this.thresholds.FIXED_MAX?alert("Error value. Max value is 300"):t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):t<this.thresholds.HIGH&&alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setFormat",value:function(t){"12HR"===t||"24HR"===t?(this.is12HourFormat="12HR"===t,this.updateChart()):alert("Error value. Values accepted are only 12HR and 24HR")}},{key:"deleteData",value:function(t){t>=this.heartRateData.length?alert("Error value. Cannot delete index from length of list value"):(this.heartRateData.splice(t,1),this.updateChart())}},{key:"moveLine",value:function(t){/^([01]\d|2[0-3]):([0-5]\d)$/.test(t)?0===this.heartRateData.length?alert("No data in chart."):(this.myChart.data.datasets[0].placeLine=t,this.myChart.update()):alert("Invalid time format. Please use military time format (HH:mm).")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),o=parseInt(e),n=parseInt(a);!isNaN(r)&&!isNaN(o)&&!isNaN(n)&&r<=o&&o<=n&&n<=this.thresholds.MAX?(this.thresholds.LOW=r,this.thresholds.MODERATE=o,this.thresholds.HIGH=n,this.updateChartYMinMax(),this.myChart.update()):n>this.thresholds.MAX?alert("Current Max value is ".concat(this.thresholds.MAX,". High threshold should not be higher than that")):alert("Please enter valid threshold values.")}}},{key:"setTimeLineIndicatorToggle",value:function(t){"boolean"==typeof t&&(this.isLineIndicatorOn=!!t,this.myChart.update())}},{key:"setLineIndicator",value:function(t){this.lineIndicatorText=t,this.myChart.update()}},{key:"clearChart",value:function(){this.heartRateData=[],this.myChart.data.datasets[0].data=[],this.updateChart(),this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.isConnectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"setNoDataText",value:function(t){""===t?alert("Error value. Please input something."):(this.noDataText=t,this.myChart.update())}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.heartRateData.length>0){var o=this.heartRateData[this.heartRateData.length-1].time,n=o.getHours(),i=o.getMinutes(),s=o.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(n,i,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.heartRateData.push(new u(h,new Date(r))),r.setMinutes(r.getMinutes()+1)}}},{key:"moveLineToLatest",value:function(t){var e=new Date(t),a=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");this.myChart.data.datasets[0].placeLine="".concat(a,":").concat(r)}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}},{key:"getLocalizedNoDataString",value:function(t){return"es"===t?"SIN DATOS":"NO DATA"}},{key:"getLocalizedNowString",value:function(t){return"es"===t?"AHORA":"NOW"}},{key:"setLanguage",value:function(t){this.language=t,this.updateChart()}}])&&T(e.prototype,a),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const S={USE_12HR_FORMAT:0,USE_24HR_FORMAT:1};const D={ONE_SECOND:86400,ONE_MINUTE:1440,FIVE_MINUTES:288,TEN_MINUTES:144,FIFTEEN_MINUTES:96,TWENTY_MINUTES:72,THIRTY_MINUTES:48,ONE_HOUR:24};const I={ENGLISH:"en",SPANISH:"es",SYSTEM_LANGUAGE:"sys"};function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function M(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,n=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw n}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function N(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function w(t,e,a){return(e=R(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function R(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:String(e)}var H=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"customCursorTrackerHandler",(function(t,e,r){if(!0===r.enabled){t.ctx,t.canvas;var o=t.scales.x,n=t.scales.y,i=a.chart.chartArea,s=i.top,l=i.right,h=i.bottom,u=i.left;if(0!==e.event.y||Object.is(e.event.y,0))if(e.event.x>=u&&e.event.x<=l&&e.event.y>=s&&e.event.y<=h){var c=o.getValueForPixel(e.event.x);a.chart.options.plugins.customToolTip.barIndex=-1,a.defdata.datasets[0].data[c]>0&&n.getValueForPixel(e.event.y)>0&&(a.chart.options.plugins.customToolTip.barIndex=c),a.chart.options.plugins.customToolTip.enabled||(a.chart.options.plugins.customToolTip.enabled=!0,a.chart.update())}else a.chart.options.plugins.customToolTip.barIndex=-1,a.chart.options.plugins.customToolTip.enabled&&(a.chart.options.plugins.customToolTip.enabled=!1,a.chart.update());else a.chart.options.plugins.customToolTip.barIndex=-1,a.chart.options.plugins.customToolTip.enabled&&(a.chart.options.plugins.customToolTip.enabled=!1,a.chart.update())}})),w(this,"customToolTipHandler",(function(t,e,r){if(!0===r.enabled){var o=t.ctx,n=(t.canvas,t.scales.x),i=t.scales.y,s=t.chartArea,l=(s.top,s.right,s.bottom),h=(s.left,a.chart.options.plugins.customToolTip.barIndex);if(h<0)return;o.save();var u=a.defdata.datasets[0].data[h];if(u<=0)return;var c,d=a.runningTotals[h],f=155,m=65,y=i.getPixelForValue(u),p=!1,v=n.getPixelForValue(h)-170;v<0&&(v=n.getPixelForValue(h)+15,p=!0),y<0&&(y=0),c=y+20>=l?y:y+20,y+m>t.height&&(y=t.height-m),o.fillStyle=r.backgroundColor,o.strokeStyle=r.backgroundColor,o.beginPath(),o.moveTo(v+f-5,y+m),o.arcTo(v,y+m,v,y,5),o.arcTo(v,y,v+f,y,5),o.arcTo(v+f,y,v+f,y+m,5),o.arcTo(v+f,y+m,v+f-5,y+m,5),o.closePath(),o.stroke(),o.fill(),c+10>l&&(c=l-10),o.beginPath(),p?(o.moveTo(v,c),o.lineTo(v-10,c+10),o.lineTo(v,c+20)):(o.moveTo(v+155,c),o.lineTo(v+165,c+10),o.lineTo(v+155,c+20)),o.closePath(),o.stroke(),o.fill(),console.log("TT data: ".concat(h," ").concat(u," ").concat(d," ").concat(a.runningTotals)),o.font="24pt",o.fillStyle="white",o.textAlign="left",o.fillText(a.convertTimeToTimeFormat(a.convertIndexToTime(h)),v+5,y+20),o.fillText(a.getLocalizedStepCountString(a.language),v+5,y+40),o.fillText(a.getLocalizedTotalStepsString(a.language),v+5,y+55),o.textAlign="right",o.fillText("".concat(u),v+f-5,y+40),o.fillText("".concat(d),v+f-5,y+55),o.restore()}})),this.ctx=e,this.barColor="#3EB1C8",this.xAxisColor="#E7E8E9",this.timeFormat=S.USE_12HR_FORMAT,this.maxIntervalCount=D.ONE_SECOND,this.intervalUsed=D.ONE_SECOND,this.displayIntervalCount=D.FIFTEEN_MINUTES,this.language=I.ENGLISH;this.defdata={labels:[""],datasets:[{data:[0],backgroundColor:[this.xAxisColor],borderColor:[this.xAxisColor],hoverBackgroundColor:[this.xAxisColor],borderWidth:0,barPercentage:1,categoryPercentage:1}]};var r={type:"bar",data:this.defdata,options:{animation:!1,aspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:24,callback:function(t,e,a){a.length;return""}}},y:{display:!1,beginAtZero:!0}},plugins:{tooltip:{enabled:!1},legend:{display:!1},customXAxisBackground:{enabled:!0,label1:"12:00 AM",label2:"12:00 PM",label3:"11:59 PM"},customCursorTracker:{enabled:!1},customToolTip:{enabled:!1,barIndex:-1,backgroundColor:"rgba(51, 51, 51, 0.9)"}}}};this.addCustomPlugins(),this.chart=new Chart(this.ctx,r)}var e,a,r;return e=t,(a=[{key:"addCustomPlugins",value:function(){Chart.register({id:"customXAxisBackground",beforeDraw:this.customXAxisBackgroundHandler}),Chart.register({id:"customCursorTracker",afterEvent:this.customCursorTrackerHandler}),Chart.register({id:"customToolTip",afterDatasetsDraw:this.customToolTipHandler})}},{key:"customXAxisBackgroundHandler",value:function(t,e,a){var r=t.ctx,o=t.scales.x;r.save(),r.fillStyle="rgba(237, 239, 240, 1.0)",r.fillRect(0,t.chartArea.bottom,o.width,30),r.fillStyle="black",r.textAlign="center",r.fillText(a.label1,t.chartArea.left+30,t.chartArea.bottom+15),r.fillText(a.label2,o.width/2,t.chartArea.bottom+15),r.fillText(a.label3,t.chartArea.right-30,t.chartArea.bottom+15),r.restore()}},{key:"convertIndexToTime",value:function(t){var e=0;switch(this.displayIntervalCount){case D.ONE_SECOND:e=Math.floor(t/60);break;case D.ONE_MINUTE:e=1*t;break;case D.FIVE_MINUTES:e=5*t;break;case D.TEN_MINUTES:e=10*t;break;case D.FIFTEEN_MINUTES:e=15*t;break;case D.TWENTY_MINUTES:e=20*t;break;case D.THIRTY_MINUTES:e=30*t;break;case D.ONE_HOUR:e=60*t;break;default:t=0}var a=e%60;return Math.floor(e/60)+":"+(a<10?"0":"")+a}},{key:"convertTimeToIndex",value:function(t){var e,a,r=t.split(":"),o=0,n=!1,i=0;switch(t.length>5&&(n=!0),e=Number(r[0]),a=Number(r[1]),1==n&&(o=Number(r[2])),this.maxIntervalCount){case D.ONE_SECOND:i=3600*e,i+=60*a,!0===n&&(i+=o);break;case D.ONE_MINUTE:i=60*e,i+=a;break;case D.FIVE_MINUTES:i=12*e,i+=a/5;break;case D.TEN_MINUTES:i=6*e,i+=a/10;break;case D.FIFTEEN_MINUTES:i=4*e,i+=a/15;break;case D.TWENTY_MINUTES:i=3*e,i+=a/20;break;case D.THIRTY_MINUTES:i=2*e,i+=a/30;break;case D.ONE_HOUR:i=e;break;default:i=0}return i}},{key:"setChartData",value:function(t){console.log(t);var e=new Array(this.maxIntervalCount).fill(0),a=this.displayIntervalCount;if(this.displayIntervalCount>this.maxIntervalCount&&(a=this.maxIntervalCount),null!=t&&Array.isArray(t)&&t.length>0){this.totalSteps=0,this.setMaxIntervalCount(this.maxIntervalCount);var r,o=M(t);try{for(o.s();!(r=o.n()).done;){var n=r.value;e[this.convertTimeToIndex(n.startTime)]+=n.stepCount,this.totalSteps+=n.stepCount}}catch(t){o.e(t)}finally{o.f()}for(var i=new Array(a).fill(0),s=new Array(this.displaySize).fill(0),l=0,h=new Array(a).fill(this.xAxisColor),u=this.maxIntervalCount/a,c=0,d=0,f=0;f<a;f++)for(c=0;c<u;c++)i[f]+=e[d],l+=e[d],i[f]>0?(h[f]=this.barColor,s[f]=l):s[f]=0,d++;this.intervalUsed=this.displayIntervalCount,this.defdata.labels=new Array(a).fill(""),this.defdata.datasets[0].data=i,this.runningTotals=s,this.defdata.datasets[0].backgroundColor=h,this.defdata.datasets[0].borderColor=h,this.defdata.datasets[0].hoverBackgroundColor=h,this.chart.options.plugins.customCursorTracker.enabled=!0,this.chart.options.plugins.customToolTip.enabled=!1,this.chart.options.plugins.customToolTip.barIndex=-1,this.chart.update()}}},{key:"resetChart",value:function(){this.defdata.datasets[0].data=new Array(this.defdata.datasets[0].data.length).fill(0),this.runningTotals=new Array(this.defdata.datasets[0].data.length).fill(0),this.totalSteps=0;var t=new Array(this.defdata.datasets[0].data.length).fill(this.xAxisColor);this.defdata.datasets[0].backgroundColor=t,this.defdata.datasets[0].borderColor=t,this.defdata.datasets[0].hoverBackgroundColor=t,this.chart.options.plugins.customCursorTracker.enabled=!1,this.chart.options.plugins.customToolTip.enabled=!1,this.chart.update()}},{key:"setMaxStepsPerInterval",value:function(t){this.chart.options.scales.y.max=t,this.chart.update()}},{key:"setMaxIntervalCount",value:function(t){this.maxIntervalCount=t}},{key:"setDisplayIntervalCount",value:function(t){this.displayIntervalCount=t}},{key:"convertTimeToTimeFormat",value:function(t){if(this.timeFormat===S.USE_12HR_FORMAT){var e=t.split(":"),a=parseInt(e[0],10),r=parseInt(e[1],10),o=a>=12?"PM":"AM";return((a=a%12==0?12:a%12)<10?"0":"")+a+":"+(r<10?"0":"")+r+" "+o}return t}},{key:"setTimeDisplayFormat",value:function(t){this.timeFormat=t,this.chart.options.plugins.customXAxisBackground.label1=this.convertTimeToTimeFormat("00:00"),this.chart.options.plugins.customXAxisBackground.label2=this.convertTimeToTimeFormat("12:00"),this.chart.options.plugins.customXAxisBackground.label3=this.convertTimeToTimeFormat("23:59"),this.chart.update()}},{key:"setBarColor",value:function(t){this.barColor=t;for(var e=this.defdata.datasets[0].data,a=new Array(e.length).fill(this.xAxisColor),r=0;r<e.length;r++)e[r]>0&&(a[r]=t);this.defdata.datasets[0].backgroundColor=a,this.defdata.datasets[0].borderColor=a,this.defdata.datasets[0].hoverBackgroundColor=a,this.chart.update()}},{key:"getLocalizedStepCountString",value:function(t){return"es"===t?"PASOS":"STEP COUNT"}},{key:"getLocalizedTotalStepsString",value:function(t){return"es"===t?"PASOS TOTALES":"TOTAL STEPS"}},{key:"setLanguage",value:function(t){this.language=t,this.chart.update()}}])&&N(e.prototype,a),r&&N(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function _(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){if(t){if("string"==typeof t)return P(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function U(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L(e)?e:String(e)}var j=function(){function t(e){var a,r,o,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o={afterLayout:function(t){var e=t.ctx;e.save();var a=t.scales.y,r=e.createLinearGradient(0,a.top,0,a.bottom);r.addColorStop(0,n.colors.HIGH),r.addColorStop(n.getThreshold(n.thresholds.HIGH-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.HIGH),r.addColorStop(n.getThreshold(n.thresholds.HIGH-.5-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.MODERATE),r.addColorStop(n.getThreshold(n.thresholds.MODERATE-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.MODERATE),r.addColorStop(n.getThreshold(n.thresholds.MODERATE-.5-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.LOW),r.addColorStop(n.getThreshold(n.thresholds.LOW-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.LOW),r.addColorStop(n.getThreshold(n.thresholds.LOW-n.thresholds.ADJUSTABLE_MIN,a.max-n.thresholds.ADJUSTABLE_MIN),n.colors.MIN),r.addColorStop(1,n.colors.MIN),t.data.datasets[0].borderColor=r,e.restore()}},(r=B(r="lineColorChangeOnThresholdPlugin"))in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,this.colors={MIN:"rgb(255, 197, 88)",LOW:"rgb(0, 185, 255)",MODERATE:"rgb(144, 112, 255)",HIGH:"rgb(38, 203, 168)"},this.myChart,this.chartCanvas=e,this.heartRateData=[],this.maxValue=220,this.connectDuration=10,this.isConnectAllPoints=!0,this.hasData=!1,this.language=ChartLanguage.ENGLISH,this.thresholds={MIN:0,ADJUSTABLE_MIN:0,LOW:94,MODERATE:115,HIGH:153,MAX:250,FIXED_MAX:300},this.initializeChart()}var e,a,r;return e=t,(a=[{key:"initializeChart",value:function(){var t={type:"line",data:{labels:[],datasets:[{label:"",data:[],tension:.1,pointRadius:0,pointHoverRadius:0,borderWidth:1,spanGaps:!1}]},options:{animation:{duration:0},responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"hour"},min:new Date("2024-01-01T00:00:00"),max:new Date("2024-01-02T00:00:00"),display:!1},y:{min:this.thresholds.ADJUSTABLE_MIN,max:this.thresholds.MAX,border:{display:!1},display:!1}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},plugins:[this.lineColorChangeOnThresholdPlugin]};this.myChart=new Chart(this.chartCanvas,t)}},{key:"showChart",value:function(){}},{key:"setChartData",value:function(t){this.heartRateData=t,this.updateChart()}},{key:"addMultipleData",value:function(t){var e;(e=this.heartRateData).push.apply(e,_(t)),this.updateChart()}},{key:"addData",value:function(t){this.heartRateData.push(t),this.updateChart()}},{key:"updateChart",value:function(){this.myChart.data.datasets[0].data=[],this.convertToDates(),this.sortHeartRateDataByTime(),this.filterCorrectHRValues(),this.updateChartYMinMax(),this.updateChartData(),this.checkAllBlankData(),this.myChart.update(),console.log("Tile Heart Rate Chart is rendered!")}},{key:"updateChartData",value:function(){for(var t=0;t<this.heartRateData.length;t++){var e=this.heartRateData[t],a=0===parseInt(e.hr)?null:parseInt(e.hr);this.myChart.data.datasets[0].data.push({x:e.time,y:a}),this.addGapIfRequired(t)}}},{key:"addGapIfRequired",value:function(t){if(t+1<this.heartRateData.length){var e=(this.heartRateData[t+1].time-this.heartRateData[t].time)/6e4,a=this.isConnectAllPoints,r=this.connectDuration;if(!a&&e>r){var o=new Date(this.heartRateData[t].time.getTime()+6e4);this.myChart.data.datasets[0].data.push({x:o,y:null})}}}},{key:"checkAllBlankData",value:function(){var t=this.myChart.data.datasets;this.hasData=!1;var e,a=function(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=O(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,n=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw n}}}}(t[0].data);try{for(a.s();!(e=a.n()).done;)if(null!==e.value.y){this.hasData=!0;break}}catch(t){a.e(t)}finally{a.f()}}},{key:"convertToDates",value:function(){this.heartRateData.forEach((function(t){t.time instanceof Date||(t.time=new Date("2024-01-01T"+t.time))}))}},{key:"sortHeartRateDataByTime",value:function(){var t=new Date("2024-01-01T00:00:00").getTime(),e=new Date("2024-01-01T23:59:59").getTime();this.heartRateData=this.heartRateData.filter((function(a){var r=a.time.getTime();return r>=t&&r<=e})).sort((function(t,e){return t.time.getTime()-e.time.getTime()}))}},{key:"filterCorrectHRValues",value:function(){var t=this;this.heartRateData=this.heartRateData.filter((function(e){return e._hr>=0&&e._hr<=t.thresholds.MAX}))}},{key:"updateChartYMinMax",value:function(){if(0!==this.heartRateData.length){var t=Math.min.apply(Math,_(this.heartRateData.map((function(t){return t.hr})))),e=Math.max.apply(Math,_(this.heartRateData.map((function(t){return t.hr}))));t<=20?(this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0):(t>=this.thresholds.LOW?this.thresholds.ADJUSTABLE_MIN=this.thresholds.LOW-20:this.thresholds.ADJUSTABLE_MIN=t-20,this.myChart.options.scales.y.min=this.thresholds.ADJUSTABLE_MIN),e<=this.thresholds.HIGH?this.thresholds.ADJUSTABLE_MAX=this.thresholds.HIGH+20:this.thresholds.ADJUSTABLE_MAX=e+20,this.myChart.options.scales.y.max=this.thresholds.ADJUSTABLE_MAX}else this.thresholds.ADJUSTABLE_MIN=0,this.myChart.options.scales.y.min=0}},{key:"addDataToChart",value:function(t,e){if(""===t||""===e||isNaN(t))alert("Please enter correct values.");else if(parseInt(t)>this.thresholds.MAX)alert("Input exceeds max value. Please enter correct values.");else if(parseInt(t)<this.thresholds.MIN)alert("Input is below minimum value. Please enter correct values.");else{var a={hr:parseInt(t),time:new Date("2024-01-01T".concat(e))};this.heartRateData.push(a)}}},{key:"setMaxValue",value:function(t){t>this.thresholds.FIXED_MAX?alert("Error value. Max value is 300"):t>=this.thresholds.HIGH?(this.myChart.options.scales.y.max=t,this.thresholds.MAX=t,this.myChart.update()):t<this.thresholds.HIGH&&alert("Error value. Max value should be higher than HIGH threshold")}},{key:"setThresholds",value:function(t,e,a){if(""===t||""===e||""===a)alert("Please enter correct values.");else{var r=parseInt(t),o=parseInt(e),n=parseInt(a);!isNaN(r)&&!isNaN(o)&&!isNaN(n)&&r<=o&&o<=n&&n<=this.thresholds.MAX?(this.thresholds.LOW=r,this.thresholds.MODERATE=o,this.thresholds.HIGH=n,this.updateChartYMinMax(),this.myChart.update()):n>this.thresholds.MAX?alert("Current Max value is ".concat(this.thresholds.MAX,". High threshold should not be higher than that")):alert("Please enter valid threshold values.")}}},{key:"deleteData",value:function(t){t>=this.heartRateData.length?alert("Error value. Cannot delete index from length of list value"):this.heartRateData.splice(t,1)}},{key:"clearChart",value:function(){this.heartRateData=[],this.myChart.data.datasets[0].data=[],this.updateChart(),this.myChart.update()}},{key:"setConnectDuration",value:function(t){var e=parseInt(t,10);!isNaN(e)&&e>=1&&e<=1440?(this.connectDuration=e,this.updateChart()):alert("Please enter a valid duration (minimum 1 minute).")}},{key:"setConnectAllPoints",value:function(t){"boolean"==typeof t?(this.isConnectAllPoints=t,this.updateChart()):alert("Invalid parameter. Please provide a boolean value.")}},{key:"generateRandomHRArray",value:function(t,e,a,r){if(this.heartRateData.length>0){var o=this.heartRateData[this.heartRateData.length-1].time,n=o.getHours(),i=o.getMinutes(),s=o.getSeconds();(r=r||new Date("2024-01-01T00:00:00")).setHours(n,i,s)}else r=r||new Date("2024-01-01T00:00:00");for(var l=0;l<t;l++){var h=Math.floor(Math.random()*(a-e+1))+e;this.heartRateData.push(new u(h,new Date(r))),r.setMinutes(r.getMinutes()+1)}}},{key:"getThreshold",value:function(t,e){return 1-t/e}},{key:"formatDateTimeWithSeconds",value:function(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}},{key:"getLocalizedNoDataString",value:function(t){return"es"===t?"SIN DATOS":"NO DATA"}},{key:"getLocalizedNowString",value:function(t){return"es"===t?"AHORA":"NOW"}},{key:"setLanguage",value:function(t){this.language=t,this.updateChart()}}])&&U(e.prototype,a),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const F={NAME:"Timex JS Charts Library",VERSION:"vD.1.4.3",COMPANY:"Timex Group USA"};void 0!==(t=a.hmd(t)).exports?t.exports={HeartRateInterval:i,HeartRateLineDataModel:u,StepCountInterval:m,HeartRateLineChart:x,StepCountBarChart:H,TileHeartRateLineChart:j,ChartLanguage:I,TimeDisplayFormat:S,TimeInterval:D,TimexCharts:F}:(window.HeartRateInterval=i,window.HeartRateLineDataModel=u,window.StepCountInterval=m,window.HeartRateLineChart=x,window.StepCountBarChart=H,window.TileHeartRateLineChart=j,window.ChartLanguage=I,window.TimeDisplayFormat=S,window.TimeInterval=D,window.TimexCharts=F)}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={id:r,loaded:!1,exports:{}};return t[r](n,n.exports,a),n.loaded=!0,n.exports}return a.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a(730)})()));